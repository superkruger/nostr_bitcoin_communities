/*! For license information please see main.f36e15c0.js.LICENSE.txt */
(()=>{var __webpack_modules__={522:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/nostr_bitcoin_communities",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(237)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},237:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,s=null;function a(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(!a.enabled)return;const o=a,s=Number(new Date),l=s-(n||s);o.diff=l,o.prev=n,o.curr=s,n=s,r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");let u=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";u++;const i=t.formatters[n];if("function"===typeof i){const t=r[u];e=i.call(o,t),r.splice(u,1),u--}return e})),t.formatArgs.call(o,r);(o.log||t.log).apply(o,r)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"===typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(340),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},558:(e,t,n)=>{const{bech32:r,hex:i,utf8:o}=n(777),s={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},l={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},u={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},h=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],f={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},d=BigInt("2100000000000000000"),p=BigInt(1e11),y={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},g={};for(let _=0,k=Object.keys(y);_<k.length;_++){const e=k[_],t=y[k[_]].toString();g[t]=e}const b={1:e=>i.encode(r.fromWordsUnsafe(e)),16:e=>i.encode(r.fromWordsUnsafe(e)),13:e=>o.encode(r.fromWordsUnsafe(e)),19:e=>i.encode(r.fromWordsUnsafe(e)),23:e=>i.encode(r.fromWordsUnsafe(e)),27:e=>i.encode(r.fromWordsUnsafe(e)),6:m,24:m,3:function(e){const t=[];let n,o,s,a,l,u=r.fromWordsUnsafe(e);for(;u.length>0;)n=i.encode(u.slice(0,33)),o=i.encode(u.slice(33,41)),s=parseInt(i.encode(u.slice(41,45)),16),a=parseInt(i.encode(u.slice(45,49)),16),l=parseInt(i.encode(u.slice(49,51)),16),u=u.slice(51),t.push({pubkey:n,short_channel_id:o,fee_base_msat:s,fee_proportional_millionths:a,cltv_expiry_delta:l});return t},5:function(e){const t=e.slice().reverse().map((e=>[!!(1&e),!!(2&e),!!(4&e),!!(8&e),!!(16&e)])).reduce(((e,t)=>e.concat(t)),[]);for(;t.length<2*h.length;)t.push(!1);const n={};h.forEach(((e,r)=>{let i;i=t[2*r]?"required":t[2*r+1]?"supported":"unsupported",n[e]=i}));const r=t.slice(2*h.length);return n.extra_bits={start_bit:2*h.length,bits:r,has_required:r.reduce(((e,t,n)=>n%2!==0?e||!1:e||t),!1)},n}};function w(e){return t=>({tagCode:parseInt(e),words:r.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function m(e){return e.reverse().reduce(((e,t,n)=>e+t*Math.pow(32,n)),0)}function v(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(r),o=n?i*p/f[n]:i*p;if("p"===n&&i%BigInt(10)!==BigInt(0)||o>d)throw new Error("Amount is outside of valid range");return t?o.toString():o}e.exports={decode:function(e,t){if("string"!==typeof e)throw new Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");const n=[],o=r.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const h=o.prefix;let f=o.words,d=e.slice(h.length+1),p=f.slice(-104);f=f.slice(0,-104);let _=h.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(_&&!_[2]&&(_=h.match(/^ln(\S+)$/)),!_)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const k=_[1];let E;if(t){if(void 0===t.bech32||void 0===t.pubKeyHash||void 0===t.scriptHash||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");E=t}else switch(k){case s.bech32:E=s;break;case a.bech32:E=a;break;case l.bech32:E=l;break;case u.bech32:E=u;break;case c.bech32:E=c}if(!E||E.bech32!==k)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:k,value:E});const x=_[2];let S;if(x){S=v(x+_[3],!0),n.push({name:"amount",letters:_[2]+_[3],value:S})}else S=null;n.push({name:"separator",letters:"1"});const A=m(f.slice(0,7));let C,O,R,I;for(f=f.slice(7),n.push({name:"timestamp",letters:d.slice(0,7),value:A}),d=d.slice(7);f.length>0;){const e=f[0].toString();C=g[e]||"unknown_tag",O=b[e]||w(e),f=f.slice(1),R=m(f.slice(0,2)),f=f.slice(2),I=f.slice(0,R),f=f.slice(R),n.push({name:C,tag:d[0],letters:d.slice(0,3+R),value:O(I)}),d=d.slice(3+R)}n.push({name:"signature",letters:d.slice(0,104),value:i.encode(r.fromWordsUnsafe(p))}),d=d.slice(104),n.push({name:"checksum",letters:d});let N={paymentRequest:e,sections:n,get expiry(){let e=n.find((e=>"expiry"===e.name));if(e)return T("timestamp")+e.value},get route_hints(){return n.filter((e=>"route_hint"===e.name)).map((e=>e.value))}};for(let r in y)"route_hint"!==r&&Object.defineProperty(N,r,{get:()=>T(r)});return N;function T(e){let t=n.find((t=>t.name===e));return t?t.value:void 0}},hrpToMillisat:v}},777:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function r(){const e=(e,t)=>n=>e(t(n));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{encode:Array.from(n).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),decode:n.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0)}}function i(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(n(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function a(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const o=[],s=Array.from(e);for(s.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let o=i;o<s.length;o++){const a=s[o],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%r,s[o]=Math.floor(l/r),!Number.isSafeInteger(s[o])||s[o]*r+e!==l)throw new Error("convertRadix: carry overflow");n&&(s[o]?n=!1:i=o)}if(o.push(e),n)break}for(let n=0;n<e.length-1&&0===e[n];n++)o.push(0);return o.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=n;const u=(e,t)=>t?u(t,e%t):e,c=(e,t)=>e+(t-u(e,t));function h(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(c(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${c(t,r)}`);let o=0,s=0;const a=2**r-1,l=[];for(const u of e){if(n(u),u>=2**t)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(o=o<<t|u,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)l.push((o>>s-r&a)>>>0);o&=2**s-1}if(o=o<<r-s&a,!i&&s>=t)throw new Error("Excess padding");if(!i&&o)throw new Error(`Non-zero padding: ${o}`);return i&&s>0&&l.push(o>>>0),l}function f(e){return n(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(l(t,e,256))}}}function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(c(8,e)>32||c(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(h(n,e,8,t))}}}function p(e){if("function"!==typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch(i){}}}function y(e,t){if(n(e),"function"!==typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}t.utils={alphabet:i,chain:r,checksum:y,radix:f,radix2:d,join:o,padding:s},t.base16=r(d(4),i("0123456789ABCDEF"),o("")),t.base32=r(d(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),t.base32hex=r(d(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),t.base32crockford=r(d(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),t.base64=r(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),t.base64url=r(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o(""));const g=e=>r(f(58),i(e),o(""));t.base58=g("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=g("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=g("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const b=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let n="";for(let r=0;r<e.length;r+=8){const i=e.subarray(r,r+8);n+=t.base58.encode(i).padStart(b[i.length],"1")}return n},decode(e){let n=[];for(let r=0;r<e.length;r+=11){const i=e.slice(r,r+11),o=b.indexOf(i.length),s=t.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(n)}};t.base58check=e=>r(y(4,(t=>e(e(t)))),t.base58);const w=r(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),m=[996825010,642813549,513874426,1027748829,705979059];function v(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<m.length;r++)1===(t>>r&1)&&(n^=m[r]);return n}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let i=1;for(let o=0;o<r;o++){const t=e.charCodeAt(o);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);i=v(i)^t>>5}i=v(i);for(let o=0;o<r;o++)i=v(i)^31&e.charCodeAt(o);for(let o of t)i=v(i)^o;for(let o=0;o<6;o++)i=v(i);return i^=n,w.encode(h([i%2**30],30,5,!1))}function k(e){const t="bech32"===e?1:734539939,n=d(5),r=n.decode,i=n.encode,o=p(r);function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!==typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=w.decode(s).slice(0,-6),l=_(o,a,t);if(!s.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:o,words:a}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!==typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${w.encode(n)}${_(e,n,t)}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:p(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}t.bech32=k("bech32"),t.bech32m=k("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=r(d(4),i("0123456789abcdef"),o(""),a((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const E={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},x=`Invalid encoding type. Available types: ${Object.keys(E).join(", ")}`;t.bytesToString=(e,t)=>{if("string"!==typeof e||!E.hasOwnProperty(e))throw new TypeError(x);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return E[e].encode(t)},t.str=t.bytesToString;t.stringToBytes=(e,t)=>{if(!E.hasOwnProperty(e))throw new TypeError(x);if("string"!==typeof t)throw new TypeError("stringToBytes() expects string");return E[e].decode(t)},t.bytes=t.stringToBytes},340:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,o=7*i,s=365.25*i;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,l){l=l||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===u&&isFinite(e))return l.long?function(e){var o=Math.abs(e);if(o>=i)return a(e,o,i,"day");if(o>=r)return a(e,o,r,"hour");if(o>=n)return a(e,o,n,"minute");if(o>=t)return a(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=r)return Math.round(e/r)+"h";if(o>=n)return Math.round(e/n)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function y(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function m(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,w);g[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,w);g[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,w);g[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var B,F=Object.assign;function z(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var M=!1;function j(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function $(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function D(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case k:return"Portal";case S:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&m(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ye(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ye(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var be=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function me(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ee=null,xe=null;function Se(e){if(e=mi(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),ke(e.stateNode,e.type,t))}}function Ae(e){Ee?xe?xe.push(e):xe=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=xe;if(xe=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Oe(e,t){return e(t)}function Re(){}var Ie=!1;function Ne(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Oe(e,t,n)}finally{Ie=!1,(null!==Ee||null!==xe)&&(Re(),Ce())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Le=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){Le=!1}function Ue(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Be=!1,Fe=null,ze=!1,Me=null,je={onError:function(e){Be=!0,Fe=e}};function $e(e,t,n,r,i,o,s,a,l){Be=!1,Fe=null,Ue.apply(je,arguments)}function De(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(De(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=De(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qe(i),e;if(s===r)return qe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function wt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var mt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,kt,Et,xt,St,At=!1,Ct=[],Ot=null,Rt=null,It=null,Nt=new Map,Tt=new Map,Lt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ut(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Bt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=mi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=wi(e.target);if(null!==t){var n=De(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=mi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Mt(e,t,n){zt(e)&&n.delete(t)}function jt(){At=!1,null!==Ot&&zt(Ot)&&(Ot=null),null!==Rt&&zt(Rt)&&(Rt=null),null!==It&&zt(It)&&(It=null),Nt.forEach(Mt),Tt.forEach(Mt)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Dt(e){function t(t){return $t(t,e)}if(0<Ct.length){$t(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&$t(Ot,e),null!==Rt&&$t(Rt,e),null!==It&&$t(It,e),Nt.forEach(t),Tt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Lt.shift()}var Ht=v.ReactCurrentBatchConfig,qt=!0;function Kt(e,t,n,r){var i=mt,o=Ht.transition;Ht.transition=null;try{mt=1,Wt(e,t,n,r)}finally{mt=i,Ht.transition=o}}function Vt(e,t,n,r){var i=mt,o=Ht.transition;Ht.transition=null;try{mt=4,Wt(e,t,n,r)}finally{mt=i,Ht.transition=o}}function Wt(e,t,n,r){if(qt){var i=Gt(e,t,n,r);if(null===i)qr(e,t,r,Zt,n),Ut(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=Bt(Ot,e,t,n,r,i),!0;case"dragenter":return Rt=Bt(Rt,e,t,n,r,i),!0;case"mouseover":return It=Bt(It,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Bt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Tt.set(o,Bt(Tt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ut(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var o=mi(i);if(null!==o&&_t(o),null===(o=Gt(e,t,n,r))&&qr(e,t,r,Zt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Zt=null;function Gt(e,t,n,r){if(Zt=null,null!==(e=wi(e=_e(r))))if(null===(t=De(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=F({},un,{view:0,detail:0}),fn=on(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(dn),yn=on(F({},dn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),bn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=on(wn),vn=on(F({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return xn}var An=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(An),On=on(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=on(Nn),Ln=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Un=null;c&&"documentMode"in document&&(Un=document.documentMode);var Bn=c&&"TextEvent"in window&&!Un,Fn=c&&(!Pn||Un&&8<Un&&11>=Un),zn=String.fromCharCode(32),Mn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ae(r),0<(t=Vr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Wn=null;function Zn(e){zr(e,0)}function Gn(e){if(W(vi(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Jn=Xn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Wn=Vn=null)}function nr(e){if("value"===e.propertyName&&Gn(Wn)){var t=[];Kn(t,Wn,e,_e(e)),Ne(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Wn)}function or(e,t){if("click"===e)return Gn(t)}function sr(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var s=cr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,br=null,wr=null,mr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==gr||gr!==Z(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&lr(wr,r)||(wr=r,0<(r=Vr(br,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},xr={};function Sr(e){if(Er[e])return Er[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Er[e]=n[t];return e}c&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Ar=Sr("animationend"),Cr=Sr("animationiteration"),Or=Sr("animationstart"),Rr=Sr("transitionend"),Ir=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Ir.set(e,t),l(t,[e])}for(var Lr=0;Lr<Nr.length;Lr++){var Pr=Nr[Lr];Tr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Tr(Ar,"onAnimationEnd"),Tr(Cr,"onAnimationIteration"),Tr(Or,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Rr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Br=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ur));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if($e.apply(this,arguments),Be){if(!Be)throw Error(o(198));var c=Fe;Be=!1,Fe=null,ze||(ze=!0,Me=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,u),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,u),o=l}}}if(ze)throw e=Me,ze=!1,Me=null,e}function Mr(e,t){var n=t[yi];void 0===n&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){if(!e[$r]){e[$r]=!0,s.forEach((function(t){"selectionchange"!==t&&(Br.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,jr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Vt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=wi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ne((function(){var r=o,i=_e(n),s=[];e:{var a=Ir.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Ar:case Cr:case Or:l=bn;break;case Rr:l=In;break;case"scroll":l=fn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==a?a+"Capture":null:a;c=[];for(var d,p=r;null!==p;){var y=(d=p).stateNode;if(5===d.tag&&null!==y&&(d=y,null!==f&&(null!=(y=Te(p,f))&&c.push(Kr(p,y,d)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),s.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ve||!(u=n.relatedTarget||n.fromElement)||!wi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?wi(u):null)&&(u!==(h=De(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,y="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=On,y="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?a:vi(l),d=null==u?a:vi(u),(a=new c(y,p+"leave",l,n,i)).target=h,a.relatedTarget=d,y=null,wi(i)===r&&((c=new c(f,p+"enter",u,n,i)).target=d,c.relatedTarget=h,y=c),h=y,l&&u)e:{for(f=u,p=0,d=c=l;d;d=Wr(d))p++;for(d=0,y=f;y;y=Wr(y))d++;for(;0<p-d;)c=Wr(c),p--;for(;0<d-p;)f=Wr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Wr(c),f=Wr(f)}c=null}else c=null;null!==l&&Zr(s,a,l,c,!1),null!==u&&null!==h&&Zr(s,h,u,c,!0)}if("select"===(l=(a=r?vi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(qn(a))if(Qn)g=sr;else{g=ir;var b=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Kn(s,g,n,i):(b&&b(e,a,r),"focusout"===e&&(b=a._wrapperState)&&b.controlled&&"number"===a.type&&ee(a,"number",a.value)),b=r?vi(r):window,e){case"focusin":(qn(b)||"true"===b.contentEditable)&&(gr=b,br=r,wr=null);break;case"focusout":wr=br=gr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,vr(s,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":vr(s,n,i)}var w;if(Pn)e:{switch(e){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Dn?jn(e,n)&&(m="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(m="onCompositionStart");m&&(Fn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==m?"onCompositionEnd"===m&&Dn&&(w=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Dn=!0)),0<(b=Vr(r,m)).length&&(m=new vn(m,e,null,n,i),s.push({event:m,listeners:b}),w?m.data=w:null!==(w=$n(n))&&(m.data=w))),(w=Bn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Mn=!0,zn);case"textInput":return(e=t.data)===zn&&Mn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!Pn&&jn(e,t)?(e=en(),Xt=Jt=Qt=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new vn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=w))}zr(s,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Te(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=Te(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Te(n,o))&&s.unshift(Kr(n,l,a)):i||null!=(l=Te(n,o))&&s.push(Kr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Gr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Dt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Dt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,yi="__reactEvents$"+hi,gi="__reactListeners$"+hi,bi="__reactHandles$"+hi;function wi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function mi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[di]||null}var ki=[],Ei=-1;function xi(e){return{current:e}}function Si(e){0>Ei||(e.current=ki[Ei],ki[Ei]=null,Ei--)}function Ai(e,t){Ei++,ki[Ei]=e.current,e.current=t}var Ci={},Oi=xi(Ci),Ri=xi(!1),Ii=Ci;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ti(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Si(Ri),Si(Oi)}function Pi(e,t,n){if(Oi.current!==Ci)throw Error(o(168));Ai(Oi,t),Ai(Ri,n)}function Ui(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return F({},n,r)}function Bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ii=Oi.current,Ai(Oi,e),Ai(Ri,Ri.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ui(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Si(Ri),Si(Oi),Ai(Oi,e)):Si(Ri),Ai(Ri,n)}var zi=null,Mi=!1,ji=!1;function $i(e){null===zi?zi=[e]:zi.push(e)}function Di(){if(!ji&&null!==zi){ji=!0;var e=0,t=mt;try{var n=zi;for(mt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Mi=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),We(Xe,Di),i}finally{mt=t,ji=!1}}return null}var Hi=[],qi=0,Ki=null,Vi=0,Wi=[],Zi=0,Gi=null,Yi=1,Qi="";function Ji(e,t){Hi[qi++]=Vi,Hi[qi++]=Ki,Ki=e,Vi=t}function Xi(e,t,n){Wi[Zi++]=Yi,Wi[Zi++]=Qi,Wi[Zi++]=Gi,Gi=e;var r=Yi;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,Qi=o+e}else Yi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Xi(e,1,0))}function to(e){for(;e===Ki;)Ki=Hi[--qi],Hi[qi]=null,Vi=Hi[--qi],Hi[qi]=null;for(;e===Gi;)Gi=Wi[--Zi],Wi[Zi]=null,Qi=Wi[--Zi],Wi[Zi]=null,Yi=Wi[--Zi],Wi[Zi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Nu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ui(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ui(e.nextSibling)}function po(){ro=no=null,io=!1}function yo(e){null===oo?oo=[e]:oo.push(e)}var go=v.ReactCurrentBatchConfig;function bo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mo(e){return(0,e._init)(e._payload)}function vo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&mo(o)===t.type)?((r=i(t,n.props)).ref=bo(e,t,n),r.return=e,r):((r=Pu(n.type,n.key,n.props,null,e.mode,r)).ref=bo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Uu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Pu(t.type,t.key,t.props,null,e.mode,n)).ref=bo(e,null,t),n.return=e,n;case k:return(t=zu(t,e.mode,n)).return=e,t;case T:return f(e,(0,t._init)(t._payload),n)}if(te(t)||U(t))return(t=Uu(t,e.mode,n,null)).return=e,t;wo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case T:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||U(n))return null!==i?null:h(e,t,n,r,null);wo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||U(r))return h(t,e=e.get(n)||null,r,i,null);wo(t,r)}return null}function y(i,o,a,l){for(var u=null,c=null,h=o,y=o=0,g=null;null!==h&&y<a.length;y++){h.index>y?(g=h,h=null):g=h.sibling;var b=d(i,h,a[y],l);if(null===b){null===h&&(h=g);break}e&&h&&null===b.alternate&&t(i,h),o=s(b,o,y),null===c?u=b:c.sibling=b,c=b,h=g}if(y===a.length)return n(i,h),io&&Ji(i,y),u;if(null===h){for(;y<a.length;y++)null!==(h=f(i,a[y],l))&&(o=s(h,o,y),null===c?u=h:c.sibling=h,c=h);return io&&Ji(i,y),u}for(h=r(i,h);y<a.length;y++)null!==(g=p(h,i,y,a[y],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?y:g.key),o=s(g,o,y),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Ji(i,y),u}function g(i,a,l,u){var c=U(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,y=a,g=a=0,b=null,w=l.next();null!==y&&!w.done;g++,w=l.next()){y.index>g?(b=y,y=null):b=y.sibling;var m=d(i,y,w.value,u);if(null===m){null===y&&(y=b);break}e&&y&&null===m.alternate&&t(i,y),a=s(m,a,g),null===h?c=m:h.sibling=m,h=m,y=b}if(w.done)return n(i,y),io&&Ji(i,g),c;if(null===y){for(;!w.done;g++,w=l.next())null!==(w=f(i,w.value,u))&&(a=s(w,a,g),null===h?c=w:h.sibling=w,h=w);return io&&Ji(i,g),c}for(y=r(i,y);!w.done;g++,w=l.next())null!==(w=p(y,i,g,w.value,u))&&(e&&null!==w.alternate&&y.delete(null===w.key?g:w.key),a=s(w,a,g),null===h?c=w:h.sibling=w,h=w);return e&&y.forEach((function(e){return t(i,e)})),io&&Ji(i,g),c}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===E){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===T&&mo(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=bo(r,c,s),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===E?((o=Uu(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Pu(s.type,s.key,s.props,null,r.mode,l)).ref=bo(r,o,s),l.return=r,r=l)}return a(r);case k:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zu(s,r.mode,l)).return=r,r=o}return a(r);case T:return e(r,o,(c=s._init)(s._payload),l)}if(te(s))return y(r,o,s,l);if(U(s))return g(r,o,s,l);wo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fu(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var _o=vo(!0),ko=vo(!1),Eo=xi(null),xo=null,So=null,Ao=null;function Co(){Ao=So=xo=null}function Oo(e){var t=Eo.current;Si(Eo),e._currentValue=t}function Ro(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){xo=e,Ao=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ma=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(Ao!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===xo)throw Error(o(308));So=e,xo.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var To=null;function Lo(e){null===To?To=[e]:To.push(e)}function Po(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Lo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Uo(e,r)}function Uo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Uo(e,n)}return null===(i=r.interleaved)?(t.next=t,Lo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Uo(e,n)}function $o(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}function Do(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,r){var i=e.updateQueue;Bo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,c=u=l=null,a=o;;){var f=a.lane,d=a.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,y=a;switch(f=t,d=n,y.tag){case 1:if("function"===typeof(p=y.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=y.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Bo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=d,l=h):c=c.next=d,s|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Bl|=s,e.lanes=s,e.memoizedState=h}}function qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ko={},Vo=xi(Ko),Wo=xi(Ko),Zo=xi(Ko);function Go(e){if(e===Ko)throw Error(o(174));return e}function Yo(e,t){switch(Ai(Zo,t),Ai(Wo,e),Ai(Vo,Ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Vo),Ai(Vo,t)}function Qo(){Si(Vo),Si(Wo),Si(Zo)}function Jo(e){Go(Zo.current);var t=Go(Vo.current),n=le(t,e.type);t!==n&&(Ai(Wo,e),Ai(Vo,n))}function Xo(e){Wo.current===e&&(Si(Vo),Si(Wo))}var es=xi(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=v.ReactCurrentDispatcher,os=v.ReactCurrentBatchConfig,ss=0,as=null,ls=null,us=null,cs=!1,hs=!1,fs=0,ds=0;function ps(){throw Error(o(321))}function ys(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Xs:ea,e=n(r,i),hs){s=0;do{if(hs=!1,fs=0,25<=s)throw Error(o(301));s+=1,us=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(hs)}if(is.current=Js,t=null!==ls&&null!==ls.next,ss=0,us=ls=as=null,cs=!1,t)throw Error(o(300));return e}function bs(){var e=0!==fs;return fs=0,e}function ws(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?as.memoizedState=us=e:us=us.next=e,us}function ms(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===us?as.memoizedState:us.next;if(null!==t)us=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===us?as.memoizedState=us=e:us=us.next=e}return us}function vs(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=ms(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var h=c.lane;if((ss&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,a=r):u=u.next=f,as.lanes|=h,Bl|=h}c=c.next}while(null!==c&&c!==s);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ma=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Bl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ks(e){var t=ms(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ma=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Es(){}function xs(e,t){var n=as,r=ms(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ma=!0),r=r.queue,Bs(Cs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==us&&1&us.memoizedState.tag){if(n.flags|=2048,Ns(9,As.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(o(349));0!==(30&ss)||Ss(n,t,i)}return i}function Ss(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function As(e,t,n,r){t.value=n,t.getSnapshot=r,Os(t)&&Rs(e)}function Cs(e,t,n){return n((function(){Os(t)&&Rs(e)}))}function Os(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Rs(e){var t=Uo(e,1);null!==t&&nu(t,e,1,-1)}function Is(e){var t=ws();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Zs.bind(null,as,e),[t.memoizedState,e]}function Ns(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ts(){return ms().memoizedState}function Ls(e,t,n,r){var i=ws();as.flags|=e,i.memoizedState=Ns(1|t,n,void 0,void 0===r?null:r)}function Ps(e,t,n,r){var i=ms();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ys(r,s.deps))return void(i.memoizedState=Ns(t,n,o,r))}as.flags|=e,i.memoizedState=Ns(1|t,n,o,r)}function Us(e,t){return Ls(8390656,8,e,t)}function Bs(e,t){return Ps(2048,8,e,t)}function Fs(e,t){return Ps(4,2,e,t)}function zs(e,t){return Ps(4,4,e,t)}function Ms(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function js(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4,4,Ms.bind(null,t,e),n)}function $s(){}function Ds(e,t){var n=ms();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ys(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=ms();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ys(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ma=!0),e.memoizedState=n):(ar(n,t)||(n=yt(),as.lanes|=n,Bl|=n,e.baseState=!0),t)}function Ks(e,t){var n=mt;mt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{mt=n,os.transition=r}}function Vs(){return ms().memoizedState}function Ws(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gs(e))Ys(t,n);else if(null!==(n=Po(e,t,n,r))){nu(n,e,r,eu()),Qs(n,t,r)}}function Zs(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gs(e))Ys(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Lo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Po(e,t,i,r))&&(nu(n,e,r,i=eu()),Qs(n,t,r))}}function Gs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Ys(e,t){hs=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}var Js={readContext:No,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Xs={readContext:No,useCallback:function(e,t){return ws().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:Us,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4194308,4,Ms.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=ws();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ws();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ws().memoizedState=e},useState:Is,useDebugValue:$s,useDeferredValue:function(e){return ws().memoizedState=e},useTransition:function(){var e=Is(!1),t=e[0];return e=Ks.bind(null,e[1]),ws().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ws();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rl)throw Error(o(349));0!==(30&ss)||Ss(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Us(Cs.bind(null,r,s,e),[e]),r.flags|=2048,Ns(9,As.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ws(),t=Rl.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=fs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ds++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:No,useCallback:Ds,useContext:No,useEffect:Bs,useImperativeHandle:js,useInsertionEffect:Fs,useLayoutEffect:zs,useMemo:Hs,useReducer:_s,useRef:Ts,useState:function(){return _s(vs)},useDebugValue:$s,useDeferredValue:function(e){return qs(ms(),ls.memoizedState,e)},useTransition:function(){return[_s(vs)[0],ms().memoizedState]},useMutableSource:Es,useSyncExternalStore:xs,useId:Vs,unstable_isNewReconciler:!1},ta={readContext:No,useCallback:Ds,useContext:No,useEffect:Bs,useImperativeHandle:js,useInsertionEffect:Fs,useLayoutEffect:zs,useMemo:Hs,useReducer:ks,useRef:Ts,useState:function(){return ks(vs)},useDebugValue:$s,useDeferredValue:function(e){var t=ms();return null===ls?t.memoizedState=e:qs(t,ls.memoizedState,e)},useTransition:function(){return[ks(vs)[0],ms().memoizedState]},useMutableSource:Es,useSyncExternalStore:xs,useId:Vs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&De(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=Mo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(nu(t,e,i,r),$o(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=Mo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,i))&&(nu(t,e,i,r),$o(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Mo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=jo(e,i,r))&&(nu(t,e,r,n),$o(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=No(o):(i=Ti(t)?Ii:Oi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=No(o):(o=Ti(t)?Ii:Oi.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Ho(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=Mo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Kl=r),ha(0,t)},n}function pa(e,t,n){(n=Mo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ya(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ba(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mo(-1,1)).tag=2,jo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=v.ReactCurrentOwner,ma=!1;function va(e,t,n,r){t.child=null===e?ko(t,null,n,r):_o(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var o=t.ref;return Io(t,i),r=gs(e,t,n,r,o,i),n=bs(),null===e||ma?(io&&n&&eo(t),t.flags|=1,va(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function ka(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Tu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ea(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return qa(e,t,i)}return t.flags|=1,(e=Lu(o,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ma=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,qa(e,t,i);0!==(131072&e.flags)&&(ma=!0)}}return Aa(e,t,n,r,i)}function xa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ll,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ll,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ai(Ll,Tl),Tl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ai(Ll,Tl),Tl|=r;return va(e,t,i,n),t.child}function Sa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var o=Ti(n)?Ii:Oi.current;return o=Ni(t,o),Io(t,i),n=gs(e,t,n,r,o,i),r=bs(),null===e||ma?(io&&r&&eo(t),t.flags|=1,va(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Ca(e,t,n,r,i){if(Ti(n)){var o=!0;Bi(t)}else o=!1;if(Io(t,i),null===t.stateNode)Ha(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=No(u):u=Ni(t,u=Ti(n)?Ii:Oi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&aa(t,s,r,u),Bo=!1;var f=t.memoizedState;s.state=f,Ho(t,r,s,i),l=t.memoizedState,a!==r||f!==l||Ri.current||Bo?("function"===typeof c&&(ra(t,n,c,r),l=t.memoizedState),(a=Bo||oa(t,n,a,r,f,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,zo(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:na(t.type,a),s.props=u,h=t.pendingProps,f=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=No(l):l=Ni(t,l=Ti(n)?Ii:Oi.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||f!==l)&&aa(t,s,r,l),Bo=!1,f=t.memoizedState,s.state=f,Ho(t,r,s,i);var p=t.memoizedState;a!==h||f!==p||Ri.current||Bo?("function"===typeof d&&(ra(t,n,d,r),p=t.memoizedState),(u=Bo||oa(t,n,u,r,f,p,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Oa(e,t,n,r,o,i)}function Oa(e,t,n,r,i,o){Sa(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),qa(e,t,o);r=t.stateNode,wa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):va(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Yo(e,t.containerInfo)}function Ia(e,t,n,r,i){return po(),yo(i),t.flags|=256,va(e,t,n,r),t.child}var Na,Ta,La,Pa,Ua={dehydrated:null,treeContext:null,retryLane:0};function Ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ai(es,1&s),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bu(l,i,0,null),e=Uu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ba(n),t.memoizedState=Ua,e):za(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ma(e,t,a,r=ca(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Bu({mode:"visible",children:r.children},i,0,null),(s=Uu(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=Ba(a),t.memoizedState=Ua,s);if(0===(1&t.mode))return Ma(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ma(e,t,a,r=ca(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ma||l){if(null!==(r=Rl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Uo(e,i),nu(r,e,i,-1))}return yu(),Ma(e,t,a,r=ca(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Wi[Zi++]=Yi,Wi[Zi++]=Qi,Wi[Zi++]=Gi,Yi=e.id,Qi=e.overflow,Gi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Lu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lu(r,a):(a=Uu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ba(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ua,i}return e=(a=e.child).sibling,i=Lu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Bu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ma(e,t,n,r){return null!==r&&yo(r),_o(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ro(e.return,t,n)}function $a(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Da(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(va(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$a(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$a(t,!0,n,null,o);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Lu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Va(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(t),null;case 1:case 17:return Ti(t.type)&&Li(),Va(t),null;case 3:return r=t.stateNode,Qo(),Si(Ri),Si(Oi),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(su(oo),oo=null))),Ta(e,t),Va(t),null;case 5:Xo(t);var i=Go(Zo.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Va(t),null}if(e=Go(Vo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[fi]=t,r[di]=s,e=0!==(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(i=0;i<Ur.length;i++)Mr(Ur[i],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":Y(r,s),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Mr("invalid",r);break;case"textarea":ie(r,s),Mr("invalid",r)}for(var l in we(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Mr("scroll",r)}switch(n){case"input":V(r),X(r,s,!0);break;case"textarea":V(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[di]=r,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=me(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),i=r;break;case"iframe":case"object":case"embed":Mr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ur.length;i++)Mr(Ur[i],e);i=r;break;case"source":Mr("error",e),i=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),i=r;break;case"details":Mr("toggle",e),i=r;break;case"input":Y(e,r),i=G(e,r),Mr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Mr("invalid",e)}for(s in we(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?ge(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Mr("scroll",e):null!=c&&m(e,s,c,l))}switch(n){case"input":V(e),X(e,r,!1);break;case"textarea":V(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Va(t),null;case 6:if(e&&null!=t.stateNode)Pa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Go(Zo.current),Go(Vo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Va(t),null;case 13:if(Si(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[fi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Va(t),s=!1}else null!==oo&&(su(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Pl&&(Pl=3):yu())),null!==t.updateQueue&&(t.flags|=4),Va(t),null);case 4:return Qo(),Ta(e,t),null===e&&Dr(t.stateNode.containerInfo),Va(t),null;case 10:return Oo(t.type._context),Va(t),null;case 19:if(Si(es),null===(s=t.memoizedState))return Va(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ka(s,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Ka(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Dl&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Va(t),null}else 2*Qe()-s.renderingStartTime>Dl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=es.current,Ai(es,r?1&n|2:1&n),t):(Va(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Va(t),6&t.subtreeFlags&&(t.flags|=8192)):Va(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Za(e,t){switch(to(t),t.tag){case 1:return Ti(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Si(Ri),Si(Oi),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xo(t),null;case 13:if(Si(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(es),null;case 4:return Qo(),null;case 10:return Oo(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ta=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Go(Vo.current);var o,s=null;switch(n){case"input":i=G(e,i),r=G(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(c in we(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Mr("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ga=!1,Ya=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Xa(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){xu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[yi],delete t[gi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Xa(n,t);case 6:var r=cl,i=hl;cl=null,fl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Dt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ya&&(Xa(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xu(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,fl(e,t,n),Ya=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach((function(t){var r=Ou.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(o(160));dl(s,a,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){xu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){xu(e,e.return,g)}try{nl(5,e,e.return)}catch(g){xu(e,e.return,g)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&Xa(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&Xa(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){xu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),me(l,a);var c=me(l,s);for(a=0;a<u.length;a+=2){var h=u[a],f=u[a+1];"style"===h?ge(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):m(i,h,f,c)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):d!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[di]=s}catch(g){xu(e,e.return,g)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){xu(e,e.return,g)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Dt(t.containerInfo)}catch(g){xu(e,e.return,g)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||($l=Qe())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||h,yl(t,e),Ya=c):yl(t,e),bl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(f=Ja=h;null!==Ja;){switch(p=(d=Ja).child,d.tag){case 0:case 11:case 14:case 15:nl(4,d,d.return);break;case 1:Xa(d,d.return);var y=d.stateNode;if("function"===typeof y.componentWillUnmount){r=d,n=d.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){xu(r,n,g)}}break;case 5:Xa(d,d.return);break;case 22:if(null!==d.memoizedState){_l(f);continue}}null!==p?(p.return=d,Ja=p):_l(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=f.stateNode,a=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ye("display",a))}catch(g){xu(e,e.return,g)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){xu(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yl(t,e),bl(e),4&r&&pl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),ul(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){xu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Ja=e,ml(e,t,n)}function ml(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ga;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Ga;var u=Ya;if(Ga=s,(Ya=l)&&!u)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?kl(i):null!==l?(l.return=s,Ja=l):kl(i);for(;null!==o;)Ja=o,ml(o,t,n),o=o.sibling;Ja=i,Ga=a,Ya=u}vl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):vl(e)}}function vl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Dt(f)}}}break;default:throw Error(o(163))}Ya||512&t.flags&&il(t)}catch(d){xu(t,t.return,d)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function _l(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function kl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){xu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xu(t,i,l)}}var o=t.return;try{il(t)}catch(l){xu(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){xu(t,s,l)}}}catch(l){xu(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var El,xl=Math.ceil,Sl=v.ReactCurrentDispatcher,Al=v.ReactCurrentOwner,Cl=v.ReactCurrentBatchConfig,Ol=0,Rl=null,Il=null,Nl=0,Tl=0,Ll=xi(0),Pl=0,Ul=null,Bl=0,Fl=0,zl=0,Ml=null,jl=null,$l=0,Dl=1/0,Hl=null,ql=!1,Kl=null,Vl=null,Wl=!1,Zl=null,Gl=0,Yl=0,Ql=null,Jl=-1,Xl=0;function eu(){return 0!==(6&Ol)?Qe():-1!==Jl?Jl:Jl=Qe()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Nl?Nl&-Nl:null!==go.transition?(0===Xl&&(Xl=yt()),Xl):0!==(e=mt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yl)throw Yl=0,Ql=null,Error(o(185));bt(e,n,r),0!==(2&Ol)&&e===Rl||(e===Rl&&(0===(2&Ol)&&(Fl|=n),4===Pl&&au(e,Nl)),ru(e,r),1===n&&0===Ol&&0===(1&t.mode)&&(Dl=Qe()+500,Mi&&Di()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=dt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ft(e,e===Rl?Nl:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Mi=!0,$i(e)}(lu.bind(null,e)):$i(lu.bind(null,e)),si((function(){0===(6&Ol)&&Di()})),n=null;else{switch(vt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ru(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Jl=-1,Xl=0,0!==(6&Ol))throw Error(o(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=ft(e,e===Rl?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Ol;Ol|=2;var s=pu();for(Rl===e&&Nl===t||(Hl=null,Dl=Qe()+500,fu(e,t));;)try{wu();break}catch(l){du(e,l)}Co(),Sl.current=s,Ol=i,null!==Il?t=0:(Rl=null,Nl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Ul,fu(e,0),au(e,r),ru(e,Qe()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(s=pt(e))&&(r=s,t=ou(e,s))),1===t))throw n=Ul,fu(e,0),au(e,r),ru(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_u(e,jl,Hl);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=$l+500-Qe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_u.bind(null,e,jl,Hl),t);break}_u(e,jl,Hl);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(_u.bind(null,e,jl,Hl),r);break}_u(e,jl,Hl);break;default:throw Error(o(329))}}}return ru(e,Qe()),e.callbackNode===n?iu.bind(null,e):null}function ou(e,t){var n=Ml;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=jl,jl=n,null!==t&&su(t)),e}function su(e){null===jl?jl=e:jl.push.apply(jl,e)}function au(e,t){for(t&=~zl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Ol))throw Error(o(327));ku();var t=ft(e,0);if(0===(1&t))return ru(e,Qe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ul,fu(e,0),au(e,t),ru(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,jl,Hl),ru(e,Qe()),null}function uu(e,t){var n=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=n)&&(Dl=Qe()+500,Mi&&Di())}}function cu(e){null!==Zl&&0===Zl.tag&&0===(6&Ol)&&ku();var t=Ol;Ol|=1;var n=Cl.transition,r=mt;try{if(Cl.transition=null,mt=1,e)return e()}finally{mt=r,Cl.transition=n,0===(6&(Ol=t))&&Di()}}function hu(){Tl=Ll.current,Si(Ll)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:Qo(),Si(Ri),Si(Oi),rs();break;case 5:Xo(r);break;case 4:Qo();break;case 13:case 19:Si(es);break;case 10:Oo(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Rl=e,Il=e=Lu(e.current,null),Nl=Tl=t,Pl=0,Ul=null,zl=Fl=Bl=0,jl=Ml=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}To=null}return e}function du(e,t){for(;;){var n=Il;try{if(Co(),is.current=Js,cs){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(ss=0,us=ls=as=null,hs=!1,fs=0,Al.current=null,null===n||null===n.return){Pl=1,Ul=t,Il=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=Nl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ba(p,a,l,0,t),1&p.mode&&ya(s,c,t),u=c;var y=(t=p).updateQueue;if(null===y){var g=new Set;g.add(u),t.updateQueue=g}else y.add(u);break e}if(0===(1&t)){ya(s,c,t),yu();break e}u=Error(o(426))}else if(io&&1&l.mode){var b=ga(a);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),ba(b,a,l,0,t),yo(ua(u,l));break e}}s=u=ua(u,l),4!==Pl&&(Pl=2),null===Ml?Ml=[s]:Ml.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Do(s,da(0,u,t));break e;case 1:l=u;var w=s.type,m=s.stateNode;if(0===(128&s.flags)&&("function"===typeof w.getDerivedStateFromError||null!==m&&"function"===typeof m.componentDidCatch&&(null===Vl||!Vl.has(m)))){s.flags|=65536,t&=-t,s.lanes|=t,Do(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}vu(n)}catch(v){t=v,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pu(){var e=Sl.current;return Sl.current=Js,null===e?Js:e}function yu(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Rl||0===(268435455&Bl)&&0===(268435455&Fl)||au(Rl,Nl)}function gu(e,t){var n=Ol;Ol|=2;var r=pu();for(Rl===e&&Nl===t||(Hl=null,fu(e,t));;)try{bu();break}catch(i){du(e,i)}if(Co(),Ol=n,Sl.current=r,null!==Il)throw Error(o(261));return Rl=null,Nl=0,Pl}function bu(){for(;null!==Il;)mu(Il)}function wu(){for(;null!==Il&&!Ge();)mu(Il)}function mu(e){var t=El(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?vu(e):Il=t,Al.current=null}function vu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Tl)))return void(Il=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Pl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Pl&&(Pl=5)}function _u(e,t,n){var r=mt,i=Cl.transition;try{Cl.transition=null,mt=1,function(e,t,n,r){do{ku()}while(null!==Zl);if(0!==(6&Ol))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Rl&&(Il=Rl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ru(tt,(function(){return ku(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cl.transition,Cl.transition=null;var a=mt;mt=1;var l=Ol;Ol|=4,Al.current=null,function(e,t){if(ei=qt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(l=a+i),f!==s||0!==r&&3!==f.nodeType||(u=a+r),3===f.nodeType&&(a+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(l=a),d===s&&++h===r&&(u=a),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var y=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var g=y.memoizedProps,b=y.memoizedState,w=t.stateNode,m=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),b);w.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(o(163))}}catch(_){xu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}y=tl,tl=!1}(e,n),gl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Ye(),Ol=l,mt=a,Cl.transition=s}else e.current=n;if(Wl&&(Wl=!1,Zl=e,Gl=i),s=e.pendingLanes,0===s&&(Vl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Kl,Kl=null,e;0!==(1&Gl)&&0!==e.tag&&ku(),s=e.pendingLanes,0!==(1&s)?e===Ql?Yl++:(Yl=0,Ql=e):Yl=0,Di()}(e,t,n,r)}finally{Cl.transition=i,mt=r}return null}function ku(){if(null!==Zl){var e=vt(Gl),t=Cl.transition,n=mt;try{if(Cl.transition=null,mt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,Gl=0,0!==(6&Ol))throw Error(o(331));var i=Ol;for(Ol|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ja=c;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,s)}var f=h.child;if(null!==f)f.return=h,Ja=f;else for(;null!==Ja;){var d=(h=Ja).sibling,p=h.return;if(ol(h),h===c){Ja=null;break}if(null!==d){d.return=p,Ja=d;break}Ja=p}}}var y=s.alternate;if(null!==y){var g=y.child;if(null!==g){y.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(null!==g)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var w=s.sibling;if(null!==w){w.return=s.return,Ja=w;break e}Ja=s.return}}var m=e.current;for(Ja=m;null!==Ja;){var v=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==v)v.return=a,Ja=v;else e:for(a=m;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){xu(l,l.return,k)}if(l===a){Ja=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Ja=_;break e}Ja=l.return}}if(Ol=i,Di(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{mt=n,Cl.transition=t}}return!1}function Eu(e,t,n){e=jo(e,t=da(0,t=ua(n,t),1),1),t=eu(),null!==e&&(bt(e,1,t),ru(e,t))}function xu(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=jo(t,e=pa(t,e=ua(n,e),1),1),e=eu(),null!==t&&(bt(t,1,e),ru(t,e));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Nl&n)===n&&(4===Pl||3===Pl&&(130023424&Nl)===Nl&&500>Qe()-$l?fu(e,0):zl|=n),ru(e,t)}function Au(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Uo(e,t))&&(bt(e,t,n),ru(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Ou(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Au(e,n)}function Ru(e,t){return We(e,t)}function Iu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,n,r){return new Iu(e,t,n,r)}function Tu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lu(e,t){var n=e.alternate;return null===n?((n=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Tu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Uu(n.children,i,s,t);case x:a=8,i|=8;break;case S:return(e=Nu(12,n,t,2|i)).elementType=S,e.lanes=s,e;case R:return(e=Nu(13,n,t,i)).elementType=R,e.lanes=s,e;case I:return(e=Nu(19,n,t,i)).elementType=I,e.lanes=s,e;case L:return Bu(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case C:a=9;break e;case O:a=11;break e;case N:a=14;break e;case T:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nu(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Uu(e,t,n,r){return(e=Nu(7,e,r,t)).lanes=n,e}function Bu(e,t,n,r){return(e=Nu(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Nu(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,i,o,s,a,l){return e=new Mu(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function $u(e){if(!e)return Ci;e:{if(De(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ti(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ti(n))return Ui(e,n,t)}return t}function Du(e,t,n,r,i,o,s,a,l){return(e=ju(n,r,!0,e,0,o,0,a,l)).context=$u(null),n=e.current,(o=Mo(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,jo(n,o,i),e.current.lanes=i,bt(e,i,r),ru(e,r),e}function Hu(e,t,n,r){var i=t.current,o=eu(),s=tu(i);return n=$u(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=jo(i,t,s))&&(nu(e,i,s,o),$o(e,i,s)),s}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)ma=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ma=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),po();break;case 5:Jo(t);break;case 1:Ti(t.type)&&Bi(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(Eo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ai(es,1&es.current),null!==(e=qa(e,t,n))?e.sibling:null);Ai(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Da(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return qa(e,t,n)}(e,t,n);ma=0!==(131072&e.flags)}else ma=!1,io&&0!==(1048576&t.flags)&&Xi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ni(t,Oi.current);Io(t,n),i=gs(null,t,r,e,i,n);var s=bs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ti(r)?(s=!0,Bi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Oa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),va(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Tu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===N)return 14}return 2}(r),e=na(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=ka(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,zo(e,t),Ho(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ia(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=qa(e,t,n);break e}va(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&uo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Sa(e,t),va(e,t,a,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Fa(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_o(t,null,r,n):va(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return va(e,t,t.pendingProps,n),t.child;case 8:case 12:return va(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ai(Eo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ri.current){t=qa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Mo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ro(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ro(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}va(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Io(t,n),r=r(i=No(i)),t.flags|=1,va(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),ka(e,t,r,i=na(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Ti(r)?(e=!0,Bi(t)):e=!1,Io(t,n),sa(t,r,i),la(t,r,i,n),Oa(null,t,r,!0,e,n);case 19:return Da(e,t,n);case 22:return xa(e,t,n)}throw Error(o(156,t.tag))};var Wu="function"===typeof reportError?reportError:function(e){console.error(e)};function Zu(e){this._internalRoot=e}function Gu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function Xu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=qu(s);a.call(e)}}Hu(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=qu(s);o.call(e)}}var s=Du(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=s,e[pi]=s.current,Dr(8===e.nodeType?e.parentNode:e),cu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=qu(l);a.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[pi]=l.current,Dr(8===e.nodeType?e.parentNode:e),cu((function(){Hu(t,l,n,r)})),l}(n,t,e,i,r);return qu(s)}Gu.prototype.render=Zu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hu(e,t,null,null)},Gu.prototype.unmount=Zu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Hu(null,e,null,null)})),t[pi]=null}},Gu.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(wt(t,1|n),ru(t,Qe()),0===(6&Ol)&&(Dl=Qe()+500,Di()))}break;case 13:cu((function(){var t=Uo(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Vu(e,1)}},kt=function(e){if(13===e.tag){var t=Uo(e,134217728);if(null!==t)nu(t,e,134217728,eu());Vu(e,134217728)}},Et=function(e){if(13===e.tag){var t=tu(e),n=Uo(e,t);if(null!==n)nu(n,e,t,eu());Vu(e,t)}},xt=function(){return mt},St=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));W(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Oe=uu,Re=cu;var ec={usingClientEntryPoint:!1,Events:[mi,vi,_i,Ae,Ce,uu]},tc={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),ot=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(o(299));var n=!1,r="",i=Wu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Dr(8===e.nodeType?e.parentNode:e),new Zu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(o(200));return Xu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Wu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Du(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Dr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gu(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(o(200));return Xu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(o(40));return!!e._reactRootContainer&&(cu((function(){Xu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Xu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function w(){}function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=b.prototype;var v=m.prototype=new w;v.constructor=m,y(v,b.prototype),v.isPureReactComponent=!0;var _=Array.isArray,k=Object.prototype.hasOwnProperty,E={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,i)&&!x.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:E.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+O(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),R(s,t,i,"",(function(e){return e}))):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var u=0;u<e.length;u++){var c=o+O(a=e[u],u);l+=R(a,t,i,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=R(a=a.value,t,i,c=o+O(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},L={transition:null},P={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:L,ReactCurrentOwner:E};function U(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=i,t.Profiler=s,t.PureComponent=m,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=U,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!x.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=U,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,f=null,d=3,p=!1,y=!1,g=!1,b="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,m="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,v(e),!y)if(null!==r(u))y=!0,L(k);else{var t=r(c);null!==t&&P(_,t.startTime-e)}}function k(e,n){y=!1,g&&(g=!1,w(A),A=-1),p=!0;var o=d;try{for(v(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!R());){var s=f.callback;if("function"===typeof s){f.callback=null,d=f.priorityLevel;var a=s(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?f.callback=a:f===r(u)&&i(u),v(n)}else i(u);f=r(u)}if(null!==f)var l=!0;else{var h=r(c);null!==h&&P(_,h.startTime-n),l=!1}return l}finally{f=null,d=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,x=!1,S=null,A=-1,C=5,O=-1;function R(){return!(t.unstable_now()-O<C)}function I(){if(null!==S){var e=t.unstable_now();O=e;var n=!0;try{n=S(!0,e)}finally{n?E():(x=!1,S=null)}}else x=!1}if("function"===typeof m)E=function(){m(I)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,T=N.port2;N.port1.onmessage=I,E=function(){T.postMessage(null)}}else E=function(){b(I,0)};function L(e){S=e,x||(x=!0,E())}function P(e,n){A=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,L(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(w(A),A=-1):g=!0,P(_,o-s))):(e.sortIndex=a,n(u,e),y||p||(y=!0,L(k))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},731:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var i=n(470),o=n(39),s=n(624);function a(e,t,n,r,i,o){var s=this.events[e];if(s){if(0===s.length)return!1;if(s.argsNum<6)s.call(t,n,r,i,o);else{for(var a=new Array(s.argsNum),l=0,u=a.length;l<u;++l)a[l]=arguments[l+1];s.call.apply(void 0,a)}return!0}return!1}function l(e,t,n,r,i,o){var s,a=this.events[e];if(void 0!==a){if(0===a.length)return!1;if(a.argsNum<6)a.call(t,n,r,i,o);else{for(var l=0,u=(s=new Array(a.argsNum)).length;l<u;++l)s[l]=arguments[l+1];a.call.apply(void 0,s)}}var c=this.onceEvents[e];if(c){if("function"===typeof c)if(this.onceEvents[e]=void 0,arguments.length<6)c(t,n,r,i,o);else{if(void 0===s)for(l=0,u=(s=new Array(arguments.length-1)).length;l<u;++l)s[l]=arguments[l+1];c.apply(void 0,s)}else{var h=c;if(this.onceEvents[e]=void 0,arguments.length<6)for(l=0;l<h.length;++l)h[l](t,n,r,i,o);else{if(void 0===s)for(l=0,u=(s=new Array(arguments.length-1)).length;l<u;++l)s[l]=arguments[l+1];for(l=0;l<h.length;++l)h[l].apply(void 0,s)}}return!0}return void 0!==a}var u=function(){function e(){this.events=(0,s.nullObj)(),this.onceEvents=(0,s.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();function c(e,t,n){if(void 0===n&&(n=t.length),"function"!==typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r?(r.push(t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new i.TaskCollection(n,!0,t,!1),"symbol"===typeof e&&this._symbolKeys.add(e)),this}function h(e,t){var n=this.events[e];n&&n.removeLast(t);var r=this.onceEvents[e];return r&&("function"===typeof r?this.onceEvents[e]=void 0:"object"===typeof r&&(1===r.length&&r[0]===t?this.onceEvents[e]=void 0:(0,o._fast_remove_single)(r,r.lastIndexOf(t)))),this}t.EventEmitter=u,u.prototype.emit=a,u.prototype.on=c,u.prototype.once=function(e,t){switch(this.emit===a&&(this.emit=l),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=t,"symbol"===typeof e&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],t];break;case"object":this.onceEvents[e].push(t)}return this},u.prototype.addListener=c,u.prototype.removeListener=h,u.prototype.addListenerBound=function(e,t,n,r){void 0===n&&(n=this),void 0===r&&(r=t.length),this.boundFuncs||(this.boundFuncs=new Map);var i=t.bind(n);return this.boundFuncs.set(t,i),this.addListener(e,i,r)},u.prototype.removeListenerBound=function(e,t){var n,r,i=null===(n=this.boundFuncs)||void 0===n?void 0:n.get(t);return null===(r=this.boundFuncs)||void 0===r||r.delete(t),this.removeListener(e,i)},u.prototype.hasListeners=function(e){return this.events[e]&&!!this.events[e].length},u.prototype.prependListener=function(e,t,n){if(void 0===n&&(n=t.length),"function"!==typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r&&r instanceof i.TaskCollection?(r.insert(0,t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(r=this.events[e]=new i.TaskCollection(n,!0,t,!1),"symbol"===typeof e&&this._symbolKeys.add(e)),this},u.prototype.prependOnceListener=function(e,t){this.emit===a&&(this.emit=l);var n=this.onceEvents[e];return n?"object"!==typeof n?(this.onceEvents[e]=[t,n],"symbol"===typeof e&&this._symbolKeys.add(e)):(n.unshift(t),this.maxListeners!==1/0&&this.maxListeners<=n.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" once event!'))):(this.onceEvents[e]=[t],"symbol"===typeof e&&this._symbolKeys.add(e)),this},u.prototype.off=h,u.prototype.removeAllListeners=function(e){return void 0===e?(this.events=(0,s.nullObj)(),this.onceEvents=(0,s.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,"symbol"===typeof e&&this._symbolKeys.delete(e)),this},u.prototype.setMaxListeners=function(e){return this.maxListeners=e,this},u.prototype.getMaxListeners=function(){return this.maxListeners},u.prototype.listeners=function(e){return this.emit===a?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?r(r([],this.events[e].tasksAsArray(),!0),"function"===typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?"function"===typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e]:[]},u.prototype.eventNames=function(){var e=this;if(this.emit===a){var t=Object.keys(this.events);return r(r([],t,!0),Array.from(this._symbolKeys),!0).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length}))}t=Object.keys(this.events).filter((function(t){return e.events[t]&&e.events[t].length}));var n=Object.keys(this.onceEvents).filter((function(t){return e.onceEvents[t]&&e.onceEvents[t].length}));return r(r(r([],t,!0),n,!0),Array.from(this._symbolKeys).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length||t in e.onceEvents&&e.onceEvents[t]&&e.onceEvents[t].length})),!0)},u.prototype.listenerCount=function(e){return this.emit===a?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}},821:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(580),t),i(n(731),t)},506:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var t="";if(0===e)return t;for(var n=0;n<e-1;++n)t+="arg"+String(n)+", ";return t+="arg"+String(e-1)}function generateBodyPartsCode(e,t){for(var n="",r="",i=0;i<t;++i)n+="var f".concat(i," = collection[").concat(i,"];\n"),r+="f".concat(i,"(").concat(e,")\n");return{funcDefCode:n,funcCallCode:r}}function generateBodyPartsVariadicCode(e){for(var t="",n="",r=0;r<e;++r)t+="var f".concat(r," = collection[").concat(r,"];\n"),n+="f".concat(r,".apply(undefined, arguments)\n");return{funcDefCode:t,funcCallCode:n}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}exports.bakeCollection=bakeCollection,exports.bakeCollectionAwait=bakeCollectionAwait,exports.bakeCollectionVariadic=bakeCollectionVariadic},470:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(86),t)},86:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCollection=void 0;var i=n(39),o=n(506);function s(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var i;if(1===r)(i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i;else(i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i;this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++}function a(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var i;if(1===r)(i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i;else(i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i;this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++;this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function l(e){0!==this.length&&(1===this.length?this._tasks===e&&(this.length=0):((0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function u(e){if(0!==this.length){if(1===this.length)return this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy?void(this.call=o.BAKED_EMPTY_FUNC):void this.rebuild();(0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=p:this.rebuild()}}function c(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length)}function h(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function f(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollection)(this._tasks,this.argsNum)}function d(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollectionAwait)(this._tasks,this.argsNum)}function p(){this.rebuild(),this.call.apply(void 0,arguments)}var y=function(e,t,n,r){void 0===t&&(t=!0),void 0===n&&(n=null),void 0===r&&(r=!1),this.awaitTasks=r,this.call=o.BAKED_EMPTY_FUNC,this.argsNum=e,this.firstEmitBuildStrategy=!0,this.rebuild=r?d.bind(this):f.bind(this),this.setAutoRebuild(t),n?"function"===typeof n?(this._tasks=n,this.length=1):(this._tasks=n,this.length=n.length):(this._tasks=null,this.length=0),t&&this.rebuild()};t.TaskCollection=y,y.prototype.fastClear=function(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC},y.prototype.clear=function(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC},y.prototype.growArgsNum=function(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())},y.prototype.setAutoRebuild=function(e){e?(this.push=a.bind(this),this.insert=h.bind(this),this.removeLast=u.bind(this)):(this.push=s.bind(this),this.insert=c.bind(this),this.removeLast=l.bind(this))},y.prototype.tasksAsArray=function(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks},y.prototype.setTasks=function(e){0===e.length?(this.length=0,this.call=o.BAKED_EMPTY_FUNC):1===e.length?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}},39:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._fast_remove_single=void 0,t._fast_remove_single=function(e,t){-1!==t&&(0===t?e.shift():t===e.length-1?e.length=e.length-1:e.splice(t,1))}},580:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nullObj=void 0,t.nullObj=function(){var e={__proto__:null};return e}},199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const r=n(452);class i{constructor(e){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:t=25,entryExpirationTimeInMS:n=null,onEntryEvicted:r,onEntryMarkedAsMostRecentlyUsed:i,cloneFn:o,clone:s}=null!==e&&void 0!==e?e:{};if(Number.isNaN(t)||t<=0)throw new Error("maxSize must be greater than 0.");if("number"===typeof n&&(n<=0||Number.isNaN(n)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=t,this.entryExpirationTimeInMS=n,this.onEntryEvicted=r,this.onEntryMarkedAsMostRecentlyUsed=i,this.clone=s,this.cloneFn=o}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(e){if(Number.isNaN(e)||e<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=e,this.enforceSizeLimit()}set(e,t,n){const i=this.lookupTable.get(e);i&&this.removeNodeFromListAndLookupTable(i);const o=new r.LRUCacheNode(e,t,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...n});return this.setNodeAsHead(o),this.lookupTable.set(e,o),this.enforceSizeLimit(),this}get(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):(this.setNodeAsHead(t),t.value):null}peek(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):t.value:null}delete(e){const t=this.lookupTable.get(e);return!!t&&this.removeNodeFromListAndLookupTable(t)}has(e){const t=this.lookupTable.get(e);return!!t&&(!t.isExpired||(this.removeNodeFromListAndLookupTable(t),!1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(e){let t=this.head;for(;t;){if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}const n=this.mapNodeToEntry(t);if(e(n))return this.setNodeAsHead(t),n;t=t.next}return null}forEach(e){let t=this.head,n=0;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else e(t.value,t.key,n),t=t.next,n++}*values(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.value,e=e.next}*keys(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.key,e=e.next}*entries(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}*[Symbol.iterator](){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}enforceSizeLimit(){let e=this.tail;for(;null!==e&&this.size>this.maxSizeInternal;){const t=e.prev;this.removeNodeFromListAndLookupTable(e),e=t}}mapNodeToEntry(e){let{key:t,value:n}=e;return{key:t,value:n}}setNodeAsHead(e){this.removeNodeFromList(e),this.head?(e.next=this.head,this.head.prev=e,this.head=e):(this.head=e,this.tail=e),e.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(e){null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.head===e&&(this.head=e.next),this.tail===e&&(this.tail=e.prev),e.next=null,e.prev=null}removeNodeFromListAndLookupTable(e){return e.invokeOnEvicted(),this.removeNodeFromList(e),this.lookupTable.delete(e.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const e=[];for(const t of this.lookupTable.values())t.isExpired&&e.push(t);e.forEach((e=>this.removeNodeFromListAndLookupTable(e)))}}t.LRUCache=i},452:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCacheNode=void 0;t.LRUCacheNode=class{constructor(e,t,n){const{entryExpirationTimeInMS:r=null,next:i=null,prev:o=null,onEntryEvicted:s,onEntryMarkedAsMostRecentlyUsed:a,clone:l,cloneFn:u}=null!==n&&void 0!==n?n:{};if("number"===typeof r&&(r<=0||Number.isNaN(r)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=null!==l&&void 0!==l&&l,this.cloneFn=null!==u&&void 0!==u?u:this.defaultClone,this.key=e,this.internalValue=this.clone?this.cloneFn(t):t,this.created=Date.now(),this.entryExpirationTimeInMS=r,this.next=i,this.prev=o,this.onEntryEvicted=s,this.onEntryMarkedAsMostRecentlyUsed=a}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"===typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:e,value:t,isExpired:n}=this;this.onEntryEvicted({key:e,value:t,isExpired:n})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:e,value:t}=this;this.onEntryMarkedAsMostRecentlyUsed({key:e,value:t})}}defaultClone(e){return"boolean"===typeof e||"string"===typeof e||"number"===typeof e?e:JSON.parse(JSON.stringify(e))}}},245:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(199),t)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>"static/js/"+e+".a928b369.chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="nostr_bitcoin_communities:";__webpack_require__.l=(n,r,i,o)=>{if(e[n])e[n].push(r);else{var s,a;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==t+i){s=c;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[r];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(r))),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),a&&document.head.appendChild(s)}}})(),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/nostr_bitcoin_communities/",(()=>{var e={792:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,o=n[0],s=n[1],a=n[2],l=0;if(o.some((t=>0!==e[t]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);if(a)a(__webpack_require__)}for(t&&t(n);l<o.length;l++)i=o[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunknostr_bitcoin_communities=self.webpackChunknostr_bitcoin_communities||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{OG:()=>Ou,My:()=>mu,Ph:()=>ku,lX:()=>Eu,Id:()=>Cu,fg:()=>Nu,qj:()=>Au,aT:()=>_u,lq:()=>xu,z:()=>Su,Q5:()=>Lu});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{aK:()=>wb,e8:()=>nb,DO:()=>tb,dJ:()=>mb,OG:()=>vb,My:()=>ib,Ph:()=>cb,lX:()=>hb,Id:()=>yb,fg:()=>Eb,qj:()=>pb,aT:()=>ub,r4:()=>bb,aY:()=>eb,x:()=>Ab,lq:()=>fb,z:()=>db,zW:()=>ob,Q5:()=>Sb});var n=__webpack_require__(43),r=__webpack_require__(391),i=Object.defineProperty,o=(e,t,n)=>(((e,t,n)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var l,u,c={exports:{}};function h(){if(u)return l;u=1;var e=1e3,t=60*e,n=60*t,r=24*n,i=7*r,o=365.25*r;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}return l=function(a,l){l=l||{};var u=typeof a;if("string"===u&&a.length>0)return function(s){if(s=String(s),!(s.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(s);if(a){var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*r;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(a);if("number"===u&&isFinite(a))return l.long?function(i){var o=Math.abs(i);return o>=r?s(i,o,r,"day"):o>=n?s(i,o,n,"hour"):o>=t?s(i,o,t,"minute"):o>=e?s(i,o,e,"second"):i+" ms"}(a):function(i){var o=Math.abs(i);return o>=r?Math.round(i/r)+"d":o>=n?Math.round(i/n)+"h":o>=t?Math.round(i/t)+"m":o>=e?Math.round(i/e)+"s":i+"ms"}(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}}var f=function(e){function t(e){let r,i,o,s=null;function a(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!a.enabled)return;const o=a,s=Number(new Date),l=s-(r||s);o.diff=l,o.prev=r,o.curr=s,r=s,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");let u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";u++;const i=t.formatters[r];if("function"==typeof i){const t=n[u];e=i.call(o,t),n.splice(u,1),u--}return e})),t.formatArgs.call(o,n),(o.log||t.log).apply(o,n)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+(typeof n>"u"?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)!r[n]||("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=h(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/nostr_bitcoin_communities",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG),e},t.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=f(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(c,c.exports);const d=c.exports;var p={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(f=1,l=new Array(h-1);f<h;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn===t&&(!i||a.once)&&(!r||a.context===r)&&s(this,o);else{for(var l=0,u=[],c=a.length;l<c;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&u.push(a[l]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(p);const y=p.exports;function g(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function b(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const w={number:g,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:b,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");g(e.outputLen),g(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){b(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},m="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,v=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),_=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function k(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));class E{clone(){return this._cloneInto()}}function x(e){const t=t=>e().update(k(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(m&&"function"==typeof m.getRandomValues)return m.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class A extends E{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=v(this.buffer)}update(e){w.exists(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=k(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=v(e);for(;r<=i-o;o+=r)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){w.exists(this),w.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let c=o;c<r;c++)t[c]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;e.setUint32(t+l,s,r),e.setUint32(t+u,a,r)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=v(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)s.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}const C=(e,t,n)=>e&t^~e&n,O=(e,t,n)=>e&t^e&n^t&n,R=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),I=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),N=new Uint32Array(64);class T extends A{constructor(){super(64,32,8,!1),this.A=0|I[0],this.B=0|I[1],this.C=0|I[2],this.D=0|I[3],this.E=0|I[4],this.F=0|I[5],this.G=0|I[6],this.H=0|I[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let c=0;c<16;c++,t+=4)N[c]=e.getUint32(t,!1);for(let c=16;c<64;c++){const e=N[c-15],t=N[c-2],n=_(e,7)^_(e,18)^e>>>3,r=_(t,17)^_(t,19)^t>>>10;N[c]=r+N[c-7]+n+N[c-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let c=0;c<64;c++){const e=u+(_(s,6)^_(s,11)^_(s,25))+C(s,a,l)+R[c]+N[c]|0,t=(_(n,2)^_(n,13)^_(n,22))+O(n,r,i)|0;u=l,l=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,l,u)}roundClean(){N.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class L extends T{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const P=x((()=>new T));x((()=>new L));const U=BigInt(0),B=BigInt(1),F=BigInt(2),z=e=>e instanceof Uint8Array,M=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function j(e){if(!z(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=M[e[n]];return t}function $(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function D(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function H(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("invalid byte sequence");t[n]=o}return t}function q(e){return D(j(e))}function K(e){if(!z(e))throw new Error("Uint8Array expected");return D(j(Uint8Array.from(e).reverse()))}const V=(e,t)=>H(e.toString(16).padStart(2*t,"0")),W=(e,t)=>V(e,t).reverse();function Z(e,t,n){let r;if("string"==typeof t)try{r=H(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else{if(!z(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!z(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}function Y(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}const Q=e=>(F<<BigInt(e-1))-B,J=e=>new Uint8Array(e),X=e=>Uint8Array.from(e);function ee(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=J(e),i=J(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(i,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J();i=a(X([0]),e),r=a(),0!==e.length&&(i=a(X([1]),e),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return G(...n)};return(e,t)=>{let n;for(s(),l(e);!(n=t(u()));)l();return s(),n}}const te={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ne(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const i=te[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=e[t];if((!r||void 0!==o)&&!i(o,e))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const re=Object.freeze(Object.defineProperty({__proto__:null,bytesToHex:j,numberToHexUnpadded:$,hexToNumber:D,hexToBytes:H,bytesToNumberBE:q,bytesToNumberLE:K,numberToBytesBE:V,numberToBytesLE:W,numberToVarBytesBE:e=>H($(e)),ensureBytes:Z,concatBytes:G,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},utf8ToBytes:Y,bitLen:function(e){let t;for(t=0;e>U;e>>=B,t+=1);return t},bitGet:(e,t)=>e>>BigInt(t)&B,bitSet:(e,t,n)=>e|(n?B:U)<<BigInt(t),bitMask:Q,createHmacDrbg:ee,validateObject:ne},Symbol.toStringTag,{value:"Module"})),ie=BigInt(0),oe=BigInt(1),se=BigInt(2),ae=BigInt(3),le=BigInt(4),ue=BigInt(5),ce=BigInt(8);function he(e,t){const n=e%t;return n>=ie?n:t+n}function fe(e,t,n){if(n<=ie||t<ie)throw new Error("Expected power/modulo > 0");if(n===oe)return ie;let r=oe;for(;t>ie;)t&oe&&(r=r*e%n),e=e*e%n,t>>=oe;return r}function de(e,t,n){let r=e;for(;t-- >ie;)r*=r,r%=n;return r}function pe(e,t){if(e===ie||t<=ie)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=he(e,t),r=t,i=ie,o=oe;for(;n!==ie;){const e=r%n,t=i-o*(r/n);r=n,n=e,i=o,o=t}if(r!==oe)throw new Error("invert: does not exist");return he(i,t)}function ye(e){if(e%le===ae){const t=(e+oe)/le;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%ce===ue){const t=(e-ue)/ce;return function(e,n){const r=e.mul(n,se),i=e.pow(r,t),o=e.mul(n,i),s=e.mul(e.mul(o,se),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-oe)/se;let n,r,i;for(n=e-oe,r=0;n%se===ie;n/=se,r++);for(i=se;i<e&&fe(i,t,e)!==e-oe;i++);if(1===r){const t=(e+oe)/le;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+oe)/se;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),n),u=e.pow(s,o),c=e.pow(s,n);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,oe<<BigInt(a-t-1));l=e.sqr(n),u=e.mul(u,n),c=e.mul(c,l),a=t}return u}}(e)}BigInt(9),BigInt(16);const ge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function be(e){const t=ge.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return ne(e,t)}function we(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const me=BigInt(0),ve=BigInt(1);function _e(e){return be(e.Fp),ne(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...we(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:ke,hexToBytes:Ee}=re,xe={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=xe;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ke(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=xe,n="string"==typeof e?Ee(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=xe._parseInt(n.subarray(2)),{d:s,l:a}=xe._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:s}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,a=n(o),l=n(s);return`30${n(s+o+4)}02${l}${i}02${a}${r}`}},Se=BigInt(0),Ae=BigInt(1),Ce=BigInt(2),Oe=BigInt(3),Re=BigInt(4);function Ie(e){const t=function(e){const t=_e(e);ne(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return G(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,o=n.sqr(e),s=n.mul(o,e);return n.add(n.add(s,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&Se<e&&e<t.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=j(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let s;try{s="bigint"==typeof e?e:q(Z("private key",e,r))}catch{throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=he(s,o)),a(s),s}const u=new Map;function c(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(i(Z("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(e);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:r,pz:i}=this,{px:o,py:s,pz:a}=e,l=n.eql(n.mul(t,a),n.mul(o,i)),u=n.eql(n.mul(r,a),n.mul(s,i));return l&&u}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,Oe),{px:o,py:s,pz:a}=this;let l=n.ZERO,u=n.ZERO,c=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),c=n.mul(o,a),c=n.add(c,c),l=n.mul(e,c),u=n.mul(i,p),u=n.add(l,u),l=n.sub(d,u),u=n.add(d,u),u=n.mul(l,u),l=n.mul(y,l),c=n.mul(i,c),p=n.mul(e,p),y=n.sub(f,p),y=n.mul(e,y),y=n.add(y,c),c=n.add(f,f),f=n.add(c,f),f=n.add(f,p),f=n.mul(f,y),u=n.add(u,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,y),l=n.sub(l,f),c=n.mul(p,d),c=n.add(c,c),c=n.add(c,c),new h(l,u,c)}add(e){c(e);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:l}=e;let u=n.ZERO,f=n.ZERO,d=n.ZERO;const p=t.a,y=n.mul(t.b,Oe);let g=n.mul(r,s),b=n.mul(i,a),w=n.mul(o,l),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,b),m=n.sub(m,v),v=n.add(r,o);let _=n.add(s,l);return v=n.mul(v,_),_=n.add(g,w),v=n.sub(v,_),_=n.add(i,o),u=n.add(a,l),_=n.mul(_,u),u=n.add(b,w),_=n.sub(_,u),d=n.mul(p,v),u=n.mul(y,w),d=n.add(u,d),u=n.sub(b,d),d=n.add(b,d),f=n.mul(u,d),b=n.add(g,g),b=n.add(b,g),w=n.mul(p,w),v=n.mul(y,v),b=n.add(b,w),w=n.sub(g,w),w=n.mul(p,w),v=n.add(v,w),g=n.mul(b,v),f=n.add(f,g),g=n.mul(_,v),u=n.mul(m,u),u=n.sub(u,g),g=n.mul(m,b),d=n.mul(_,d),d=n.add(d,g),new h(u,f,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}))}multiplyUnsafe(e){const r=h.ZERO;if(e===Se)return r;if(a(e),e===Ae)return this;const{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:l,k2:u}=i.splitScalar(e),c=r,f=r,p=this;for(;s>Se||u>Se;)s&Ae&&(c=c.add(p)),u&Ae&&(f=f.add(p)),p=p.double(),s>>=Ae,u>>=Ae;return o&&(c=c.negate()),l&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),c.add(f)}multiply(e){a(e);let r,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:l}=s.splitScalar(o);let{p:u,f:c}=this.wNAF(t),{p:f,f:p}=this.wNAF(l);u=d.constTimeNegate(e,u),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=u.add(f),i=c.add(p)}else{const{p:e,f:t}=this.wNAF(o);r=e,i=t}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,i=(e,t)=>t!==Se&&t!==Ae&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){const{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));const s=n.mul(t,e),a=n.mul(r,e),l=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Ae)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Ae?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),r(h,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return j(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,d=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>me;)n&ve&&(r=r.add(i)),i=i.double(),n>>=ve;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),o=[];let s=e,a=s;for(let r=0;r<n;r++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=r(t);let l=e.ZERO,u=e.BASE;const c=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let r=Number(o&c);o>>=f,r>a&&(r-=h,o+=ve);const s=t,d=t+Math.abs(r)-1,p=e%2!==0,y=r<0;0===r?u=u.add(n(p,i[s])):l=l.add(n(y,i[d]))}return{p:l,f:u}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}(h,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function Ne(e){const t=function(e){const t=_e(e);return ne(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(e){return he(e,r)}function a(e){return pe(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:h}=Ie({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),s=G;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],s=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===o&&4===r){return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=q(s);if(!function(e){return Se<e&&e<n.ORDER}(e))throw new Error("Point is not on curve");const t=c(e);let i=n.sqrt(t);return 1===(1&r)!==((i&Ae)===Ae)&&(i=n.neg(i)),{x:e,y:i}}}}),f=e=>j(V(e,t.nByteLength));function d(e){return e>r>>Ae}const p=(e,t,n)=>q(e.slice(t,n));class y{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=Z("compactSignature",e,2*n),new y(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=xe.toSig(Z("DER",e));return new y(t,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:o}=this,u=m(Z("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const c=2===o||3===o?r+t.n:r;if(c>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&o)?"02":"03",d=l.fromHex(h+f(c)),p=a(c),y=s(-u*p),g=s(i*p),b=l.BASE.multiplyAndAddUnsafe(d,y,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return H(this.toDERHex())}toDERHex(){return xe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return H(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const g={isValidPrivateKey(e){try{return u(e),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(e=Z("privateHash",e)).length,i=we(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return he(n?K(e):q(e),t-oe)+oe}(t.randomBytes(n.BYTES+8),r);return V(e,t.nByteLength)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function b(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof l}const w=t.bits2int||function(e){const n=q(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},m=t.bits2int_modN||function(e){return s(w(e))},v=Q(t.nBitLength);function _(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(Se<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return V(e,t.nByteLength)}function k(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:c}=t;let{lowS:f,prehash:p,extraEntropy:g}=i;null==f&&(f=!0),e=Z("msgHash",e),p&&(e=Z("prehashed msgHash",o(e)));const b=m(e),v=u(r),k=[_(v),_(b)];if(null!=g){const e=!0===g?c(n.BYTES):g;k.push(Z("extraEntropy",e,n.BYTES))}const x=G(...k),S=b;return{seed:x,k2sig:function(e){const t=w(e);if(!h(t))return;const n=a(t),r=l.BASE.multiply(t).toAffine(),i=s(r.x);if(i===Se)return;const o=s(n*s(S+i*v));if(o===Se)return;let u=(r.x===i?0:2)|Number(r.y&Ae),c=o;return f&&d(o)&&(c=function(e){return d(e)?s(-e):e}(o),u^=1),new y(i,c,u)}}}const E={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:i,k2sig:o}=k(e,n,r);return ee(t.hash.outputLen,t.nByteLength,t.hmac)(i,o)},verify:function(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;var o;const u=e;if(n=Z("msgHash",n),r=Z("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:h}=i;let f,d;try{if("string"==typeof u||u instanceof Uint8Array)try{f=y.fromDER(u)}catch(mc){if(!(mc instanceof xe.Err))throw mc;f=y.fromCompact(u)}else{if("object"!=typeof u||"bigint"!=typeof u.r||"bigint"!=typeof u.s)throw new Error("PARSE");{const{r:e,s:t}=u;f=new y(e,t)}}d=l.fromHex(r)}catch(mc){if("PARSE"===mc.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&f.hasHighS())return!1;h&&(n=t.hash(n));const{r:p,s:g}=f,b=m(n),w=a(g),v=s(b*w),_=s(p*w),k=null==(o=l.BASE.multiplyAndAddUnsafe(d,v,_))?void 0:o.toAffine();return!!k&&s(k.x)===p},ProjectivePoint:l,Signature:y,utils:g}}class Te extends E{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,w.hash(e);const n=k(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return w.exists(this),this.iHash.update(e),this}digestInto(e){w.exists(this),w.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Le=(e,t,n)=>new Te(e,t).update(n).digest();function Pe(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Le(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const r=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(r);for(let o=0,s=0;o<t.length;o++){const e=t[o];i.set(e,s),s+=e.length}return i}(...r))},randomBytes:S}}Le.create=(e,t)=>new Te(e,t);const Ue=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Be=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Fe=BigInt(1),ze=BigInt(2),Me=(e,t)=>(e+t/ze)/t;function je(e){const t=Ue,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,c=u*u*e%t,h=de(c,n,t)*c%t,f=de(h,n,t)*c%t,d=de(f,ze,t)*u%t,p=de(d,i,t)*d%t,y=de(p,o,t)*p%t,g=de(y,a,t)*y%t,b=de(g,l,t)*g%t,w=de(b,a,t)*y%t,m=de(w,n,t)*c%t,v=de(m,s,t)*p%t,_=de(v,r,t)*u%t,k=de(_,ze,t);if(!$e.eql($e.sqr(k),e))throw new Error("Cannot find square root");return k}const $e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=ie)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=we(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=ye(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Q(i),ZERO:ie,ONE:oe,create:t=>he(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return ie<=t&&t<e},is0:e=>e===ie,isOdd:e=>(e&oe)===oe,neg:t=>he(-t,e),eql:(e,t)=>e===t,sqr:t=>he(t*t,e),add:(t,n)=>he(t+n,e),sub:(t,n)=>he(t-n,e),mul:(t,n)=>he(t*n,e),pow:(e,t)=>function(e,t,n){if(n<ie)throw new Error("Expected power > 0");if(n===ie)return e.ONE;if(n===oe)return t;let r=e.ONE,i=t;for(;n>ie;)n&oe&&(r=e.mul(r,i)),i=e.sqr(i),n>>=oe;return r}(a,e,t),div:(t,n)=>he(t*pe(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>pe(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?W(e,o):V(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return n?K(e):q(e)}});return Object.freeze(a)}(Ue,void 0,void 0,{sqrt:je}),De=function(e,t){const n=t=>Ne({...e,...Pe(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:$e,n:Be,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Be,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Fe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=Me(o*e,t),l=Me(-r*e,t);let u=he(e-a*n-l*i,t),c=he(-a*r-l*o,t);const h=u>s,f=c>s;if(h&&(u=t-u),f&&(c=t-c),u>s||c>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:f,k2:c}}}},P),He=BigInt(0),qe=e=>"bigint"==typeof e&&He<e&&e<Ue,Ke={};function Ve(e){let t=Ke[e];if(void 0===t){const n=P(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=G(n,n),Ke[e]=t}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return P(G(t,...r))}const We=e=>e.toRawBytes(!0).slice(1),Ze=e=>V(e,32),Ge=e=>he(e,Ue),Ye=e=>he(e,Be),Qe=De.ProjectivePoint;function Je(e){let t=De.utils.normPrivateKeyToScalar(e),n=Qe.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Ye(-t),bytes:We(n)}}function Xe(e){if(!qe(e))throw new Error("bad x: need 0 < x < p");const t=Ge(e*e);let n=je(Ge(t*e+BigInt(7)));n%ze!==He&&(n=Ge(-n));const r=new Qe(e,n,Fe);return r.assertValidity(),r}function et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ye(q(Ve("BIP0340/challenge",...t)))}function tt(e,t,n){const r=Z("signature",e,64),i=Z("message",t),o=Z("publicKey",n,32);try{const e=Xe(q(o)),t=q(r.subarray(0,32));if(!qe(t))return!1;const n=q(r.subarray(32,64));if(!(e=>"bigint"==typeof e&&He<e&&e<Be)(n))return!1;const s=et(Ze(t),We(e),i),a=((e,t,n)=>Qe.BASE.multiplyAndAddUnsafe(e,t,n))(e,n,Ye(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==t)}catch{return!1}}const nt={getPublicKey:function(e){return Je(e).bytes},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S(32);const r=Z("message",e),{bytes:i,scalar:o}=Je(t),s=Z("auxRand",n,32),a=Ze(o^q(Ve("BIP0340/aux",s))),l=Ve("BIP0340/nonce",a,i,r),u=Ye(q(l));if(u===He)throw new Error("sign failed: k is zero");const{bytes:c,scalar:h}=Je(u),f=et(c,i,r),d=new Uint8Array(64);if(d.set(c,0),d.set(Ze(Ye(h+f*o)),32),!tt(d,r,i))throw new Error("sign: Invalid signature produced");return d},verify:tt,utils:{randomPrivateKey:De.utils.randomPrivateKey,lift_x:Xe,pointToBytes:We,numberToBytesBE:V,bytesToNumberBE:q,taggedHash:Ve,mod:he}},rt=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[i,o,s,a]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(i,o),r=e.mul(r,e.div(s,a)),{x:t,y:r}}}($e,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))),it=function(e,t){if(be(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=function(e,t){const n=e.ORDER;let r=Se;for(let f=n-Ae;f%Ce===Se;f/=Ce)r+=Ae;const i=r,o=(n-Ae)/Ce**i,s=(o-Ae)/Ce,a=Ce**i-Ae,l=Ce**(i-Ae),u=e.pow(t,o),c=e.pow(t,(o+Ae)/Ce);let h=(t,n)=>{let r=u,o=e.pow(n,a),h=e.sqr(o);h=e.mul(h,n);let f=e.mul(t,h);f=e.pow(f,s),f=e.mul(f,o),o=e.mul(f,n),h=e.mul(f,t);let d=e.mul(h,o);f=e.pow(d,l);let p=e.eql(f,e.ONE);o=e.mul(h,c),f=e.mul(d,r),h=e.cmov(o,h,p),d=e.cmov(f,d,p);for(let s=i;s>Ae;s--){let t=Ce**(s-Ce),n=e.pow(d,t);const i=e.eql(n,e.ONE);o=e.mul(h,r),r=e.mul(r,r),n=e.mul(d,r),h=e.cmov(o,h,i),d=e.cmov(n,d,i)}return{isValid:p,value:h}};if(e.ORDER%Re===Oe){const n=(e.ORDER-Oe)/Re,r=e.sqrt(e.neg(t));h=(t,i)=>{let o=e.sqr(i);const s=e.mul(t,i);o=e.mul(o,s);let a=e.pow(o,n);a=e.mul(a,s);const l=e.mul(a,r),u=e.mul(e.sqr(a),i),c=e.eql(u,t);return{isValid:c,value:e.cmov(l,a,c)}}}return h}(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,o,s,a,l,u,c,h;i=e.sqr(r),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),a=e.mul(a,t.A),o=e.sqr(s),u=e.sqr(a),l=e.mul(u,t.A),o=e.add(o,l),o=e.mul(o,s),u=e.mul(u,a),l=e.mul(u,t.B),o=e.add(o,l),c=e.mul(i,s);const{isValid:f,value:d}=n(o,u);h=e.mul(i,r),h=e.mul(h,d),c=e.cmov(c,s,f),h=e.cmov(h,d,f);const p=e.isOdd(r)===e.isOdd(h);return h=e.cmov(e.neg(h),h,p),c=e.div(c,a),{x:c,y:h}}}($e,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:$e.create(BigInt("-11"))});!function(e,t){if("function"!=typeof t)throw new Error("mapToCurve() must be defined")}(De.ProjectivePoint,(e=>{const{x:t,y:n}=it($e.create(e[0]));return rt(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:$e.ORDER,m:1,k:128,expand:"xmd",hash:P});const ot="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,st=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),at=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const lt=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ut(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=lt[e[n]];return t}function ct(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ht(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class ft{clone(){return this._cloneInto()}}function dt(e){const t=t=>e().update(ht(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function pt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function yt(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const gt={number:pt,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:yt,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");pt(e.outputLen),pt(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){yt(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}};class bt extends ft{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=st(this.buffer)}update(e){gt.exists(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=ht(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=st(e);for(;r<=i-o;o+=r)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){gt.exists(this),gt.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let c=o;c<r;c++)t[c]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;e.setUint32(t+l,s,r),e.setUint32(t+u,a,r)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=st(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)s.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}const wt=(e,t,n)=>e&t^~e&n,mt=(e,t,n)=>e&t^e&n^t&n,vt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_t=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),kt=new Uint32Array(64);class Et extends bt{constructor(){super(64,32,8,!1),this.A=0|_t[0],this.B=0|_t[1],this.C=0|_t[2],this.D=0|_t[3],this.E=0|_t[4],this.F=0|_t[5],this.G=0|_t[6],this.H=0|_t[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let c=0;c<16;c++,t+=4)kt[c]=e.getUint32(t,!1);for(let c=16;c<64;c++){const e=kt[c-15],t=kt[c-2],n=at(e,7)^at(e,18)^e>>>3,r=at(t,17)^at(t,19)^t>>>10;kt[c]=r+kt[c-7]+n+kt[c-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let c=0;c<64;c++){const e=u+(at(s,6)^at(s,11)^at(s,25))+wt(s,a,l)+vt[c]+kt[c]|0,t=(at(n,2)^at(n,13)^at(n,22))+mt(n,r,i)|0;u=l,l=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,l,u)}roundClean(){kt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class xt extends Et{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const St=dt((()=>new Et));function At(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=(e,t)=>n=>e(t(n)),i=Array.from(t).reverse().reduce(((e,t)=>e?r(e,t.encode):t.encode),void 0),o=t.reduce(((e,t)=>e?r(e,t.decode):t.decode),void 0);return{encode:i,decode:o}}function Ot(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(At(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function Rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function It(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(At(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Nt(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function Tt(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],o=Array.from(e);for(o.forEach((e=>{if(At(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let i=r;i<o.length;i++){const a=o[i],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%n,o[i]=Math.floor(l/n),!Number.isSafeInteger(o[i])||o[i]*n+e!==l)throw new Error("convertRadix: carry overflow");s&&(o[i]?s=!1:r=i)}if(i.push(e),s)break}for(let s=0;s<e.length-1&&0===e[s];s++)i.push(0);return i.reverse()}dt((()=>new xt));const Lt=(e,t)=>t?Lt(t,e%t):e,Pt=(e,t)=>e+(t-Lt(e,t));function Ut(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Pt(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Pt(t,n)}`);let i=0,o=0;const s=2**n-1,a=[];for(const l of e){if(At(l),l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(i=i<<t|l,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)a.push((i>>o-n&s)>>>0);i&=2**o-1}if(i=i<<n-o&s,!r&&o>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function Bt(e){return At(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Tt(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Tt(t,e,256))}}}function Ft(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(At(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Pt(8,e)>32||Pt(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Ut(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Ut(n,e,8,t))}}}function zt(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch{}}}function Mt(e,t){if(At(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),o=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw new Error("Invalid checksum");return r}}}const jt={alphabet:Ot,chain:Ct,checksum:Mt,radix:Bt,radix2:Ft,join:Rt,padding:It},$t=Ct(Ft(4),Ot("0123456789ABCDEF"),Rt("")),Dt=Ct(Ft(5),Ot("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),It(5),Rt("")),Ht=Ct(Ft(5),Ot("0123456789ABCDEFGHIJKLMNOPQRSTUV"),It(5),Rt("")),qt=Ct(Ft(5),Ot("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Rt(""),Nt((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),Kt=Ct(Ft(6),Ot("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),It(6),Rt("")),Vt=Ct(Ft(6),Ot("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),It(6),Rt("")),Wt=e=>Ct(Bt(58),Ot(e),Rt("")),Zt=Wt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Gt=Wt("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Yt=Wt("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Qt=[0,2,3,5,6,7,9,10,11],Jt={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Zt.encode(r).padStart(Qt[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=Qt.indexOf(r.length),o=Zt.decode(r);for(let e=0;e<o.length-i;e++)if(0!==o[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(t)}},Xt=e=>Ct(Mt(4,(t=>e(e(t)))),Zt),en=Ct(Ot("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Rt("")),tn=[996825010,642813549,513874426,1027748829,705979059];function nn(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<tn.length;r++)1===(t>>r&1)&&(n^=tn[r]);return n}function rn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let i=1;for(let o=0;o<r;o++){const t=e.charCodeAt(o);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);i=nn(i)^t>>5}i=nn(i);for(let o=0;o<r;o++)i=nn(i)^31&e.charCodeAt(o);for(let o of t)i=nn(i)^o;for(let o=0;o<6;o++)i=nn(i);return i^=n,en.encode(Ut([i%2**30],30,5,!1))}function on(e){const t="bech32"===e?1:734539939,n=Ft(5),r=n.decode,i=n.encode,o=zt(r);function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=en.decode(s).slice(0,-6),l=rn(o,a,t);if(!s.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:o,words:a}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${en.encode(n)}${rn(e,n,t)}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:zt(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}const sn=on("bech32"),an=on("bech32m"),ln={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},un=Ct(Ft(4),Ot("0123456789abcdef"),Rt(""),Nt((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),cn={utf8:ln,hex:un,base16:$t,base32:Dt,base64:Kt,base64url:Vt,base58:Zt,base58xmr:Jt},hn=`Invalid encoding type. Available types: ${Object.keys(cn).join(", ")}`,fn=(e,t)=>{if("string"!=typeof e||!cn.hasOwnProperty(e))throw new TypeError(hn);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return cn[e].encode(t)},dn=fn,pn=(e,t)=>{if(!cn.hasOwnProperty(e))throw new TypeError(hn);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return cn[e].decode(t)},yn=pn,gn=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:At,utils:jt,base16:$t,base32:Dt,base32hex:Ht,base32crockford:qt,base64:Kt,base64url:Vt,base58:Zt,base58flickr:Gt,base58xrp:Yt,base58xmr:Jt,base58check:Xt,bech32:sn,bech32m:an,utf8:ln,hex:un,bytesToString:fn,str:dn,stringToBytes:pn,bytes:yn},Symbol.toStringTag,{value:"Module"}));var bn={};Object.defineProperty(bn,"__esModule",{value:!0});var wn=bn.wordlist=void 0;wn=bn.wordlist="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n");var mn={};function vn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function _n(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function kn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function En(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");vn(e.outputLen),vn(e.blockLen)}function xn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Sn(e,t){kn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const An={number:vn,bool:_n,bytes:kn,hash:En,exists:xn,output:Sn},Cn=a(Object.freeze(Object.defineProperty({__proto__:null,number:vn,bool:_n,bytes:kn,hash:En,exists:xn,output:Sn,default:An},Symbol.toStringTag,{value:"Module"})));var On={},Rn={};function In(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Nn(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function Tn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function Ln(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");In(e.outputLen),In(e.blockLen)}function Pn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Un(e,t){Tn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.output=Rn.exists=Rn.hash=Rn.bytes=Rn.bool=Rn.number=void 0,Rn.number=In,Rn.bool=Nn,Rn.bytes=Tn,Rn.hash=Ln,Rn.exists=Pn,Rn.output=Un;const Bn={number:In,bool:Nn,bytes:Tn,hash:Ln,exists:Pn,output:Un};Rn.default=Bn;var Fn={},zn={};const Mn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,jn=a(Object.freeze(Object.defineProperty({__proto__:null,crypto:Mn},Symbol.toStringTag,{value:"Module"})));!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=jn,n=e=>e instanceof Uint8Array;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(e.rotr=(e,t)=>e<<32-t|e>>>t,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));e.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,i=e.slice(t,t+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n};function i(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function o(e){if("string"==typeof e&&(e=i(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e}e.nextTick=async()=>{},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let o=0;o<t;o++){r(o);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=i,e.toBytes=o,e.concatBytes=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let o=0;return t.forEach((e=>{if(!n(e))throw new Error("Uint8Array expected");i.set(e,o),o+=e.length})),i};e.Hash=class{clone(){return this._cloneInto()}};e.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||!(e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object)(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(o(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(o(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}(zn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=Rn,n=zn;class r extends n.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,t.default.hash(e);const i=(0,n.toBytes)(r);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(i.length>o?e.create().update(i).digest():i);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=e.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(e){return t.default.exists(this),this.iHash.update(e),this}digestInto(e){t.default.exists(this),t.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=r;e.hmac=(e,t,n)=>new r(e,t).update(n).digest(),e.hmac.create=(e,t)=>new r(e,t)}(Fn),Object.defineProperty(On,"__esModule",{value:!0}),On.pbkdf2Async=On.pbkdf2=void 0;const $n=Rn,Dn=Fn,Hn=zn;function qn(e,t,n,r){$n.default.hash(e);const i=(0,Hn.checkOpts)({dkLen:32,asyncTick:10},r),{c:o,dkLen:s,asyncTick:a}=i;if($n.default.number(o),$n.default.number(s),$n.default.number(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,Hn.toBytes)(t),u=(0,Hn.toBytes)(n),c=new Uint8Array(s),h=Dn.hmac.create(e,l),f=h._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:c,PRF:h,PRFSalt:f}}function Kn(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}On.pbkdf2=function(e,t,n,r){const{c:i,dkLen:o,DK:s,PRF:a,PRFSalt:l}=qn(e,t,n,r);let u;const c=new Uint8Array(4),h=(0,Hn.createView)(c),f=new Uint8Array(a.outputLen);for(let d=1,p=0;p<o;d++,p+=a.outputLen){const e=s.subarray(p,p+a.outputLen);h.setInt32(0,d,!1),(u=l._cloneInto(u)).update(c).digestInto(f),e.set(f.subarray(0,e.length));for(let t=1;t<i;t++){a._cloneInto(u).update(f).digestInto(f);for(let t=0;t<e.length;t++)e[t]^=f[t]}}return Kn(a,l,s,u,f)},On.pbkdf2Async=async function(e,t,n,r){const{c:i,dkLen:o,asyncTick:s,DK:a,PRF:l,PRFSalt:u}=qn(e,t,n,r);let c;const h=new Uint8Array(4),f=(0,Hn.createView)(h),d=new Uint8Array(l.outputLen);for(let p=1,y=0;y<o;p++,y+=l.outputLen){const e=a.subarray(y,y+l.outputLen);f.setInt32(0,p,!1),(c=u._cloneInto(c)).update(h).digestInto(d),e.set(d.subarray(0,e.length)),await(0,Hn.asyncLoop)(i-1,s,(t=>{l._cloneInto(c).update(d).digestInto(d);for(let n=0;n<e.length;n++)e[n]^=d[n]}))}return Kn(l,u,a,c,d)};const Vn=e=>e instanceof Uint8Array,Wn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Zn=(e,t)=>e<<32-t|e>>>t,Gn=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!Gn)throw new Error("Non little-endian hardware is not supported");const Yn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Qn(e){if(!Vn(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Yn[e[n]];return t}function Jn(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,i=e.slice(t,t+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}const Xn=async()=>{};function er(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function tr(e){if("string"==typeof e&&(e=er(e)),!Vn(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function nr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!Vn(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}class rr{clone(){return this._cloneInto()}}function ir(e){const t=t=>e().update(tr(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const or=Object.freeze(Object.defineProperty({__proto__:null,u8:e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),u32:e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),createView:Wn,rotr:Zn,isLE:Gn,bytesToHex:Qn,hexToBytes:Jn,nextTick:Xn,asyncLoop:async function(e,t,n){let r=Date.now();for(let i=0;i<e;i++){n(i);const e=Date.now()-r;e>=0&&e<t||(await Xn(),r+=e)}},utf8ToBytes:er,toBytes:tr,concatBytes:nr,Hash:rr,checkOpts:function(e,t){if(void 0!==t&&("object"!=typeof t||!(e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object)(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)},wrapConstructor:ir,wrapConstructorWithOpts:function(e){const t=(t,n)=>e(n).update(tr(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},wrapXOFConstructorWithOpts:function(e){const t=(t,n)=>e(n).update(tr(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},randomBytes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Mn&&"function"==typeof Mn.getRandomValues)return Mn.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},Symbol.toStringTag,{value:"Module"}));class sr extends rr{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Wn(this.buffer)}update(e){An.exists(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=tr(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Wn(e);for(;r<=i-o;o+=r)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){An.exists(this),An.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let c=o;c<r;c++)t[c]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;e.setUint32(t+l,s,r),e.setUint32(t+u,a,r)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=Wn(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)s.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}const ar=(e,t,n)=>e&t^~e&n,lr=(e,t,n)=>e&t^e&n^t&n,ur=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hr=new Uint32Array(64);class fr extends sr{constructor(){super(64,32,8,!1),this.A=0|cr[0],this.B=0|cr[1],this.C=0|cr[2],this.D=0|cr[3],this.E=0|cr[4],this.F=0|cr[5],this.G=0|cr[6],this.H=0|cr[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let c=0;c<16;c++,t+=4)hr[c]=e.getUint32(t,!1);for(let c=16;c<64;c++){const e=hr[c-15],t=hr[c-2],n=Zn(e,7)^Zn(e,18)^e>>>3,r=Zn(t,17)^Zn(t,19)^t>>>10;hr[c]=r+hr[c-7]+n+hr[c-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let c=0;c<64;c++){const e=u+(Zn(s,6)^Zn(s,11)^Zn(s,25))+ar(s,a,l)+ur[c]+hr[c]|0,t=(Zn(n,2)^Zn(n,13)^Zn(n,22))+lr(n,r,i)|0;u=l,l=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,l,u)}roundClean(){hr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class dr extends fr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const pr=ir((()=>new fr)),yr=ir((()=>new dr)),gr=a(Object.freeze(Object.defineProperty({__proto__:null,sha256:pr,sha224:yr},Symbol.toStringTag,{value:"Module"}))),br=BigInt(2**32-1),wr=BigInt(32);function mr(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&br),l:Number(e>>wr&br)}:{h:0|Number(e>>wr&br),l:0|Number(e&br)}}const vr={fromBig:mr,split:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=mr(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<wr|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},[_r,kr]=vr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),Er=new Uint32Array(80),xr=new Uint32Array(80);class Sr extends sr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:l,El:u,Fh:c,Fl:h,Gh:f,Gl:d,Hh:p,Hl:y}=this;return[e,t,n,r,i,o,s,a,l,u,c,h,f,d,p,y]}set(e,t,n,r,i,o,s,a,l,u,c,h,f,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|l,this.El=0|u,this.Fh=0|c,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let w=0;w<16;w++,t+=4)Er[w]=e.getUint32(t),xr[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const e=0|Er[w-15],t=0|xr[w-15],n=vr.rotrSH(e,t,1)^vr.rotrSH(e,t,8)^vr.shrSH(e,t,7),r=vr.rotrSL(e,t,1)^vr.rotrSL(e,t,8)^vr.shrSL(e,t,7),i=0|Er[w-2],o=0|xr[w-2],s=vr.rotrSH(i,o,19)^vr.rotrBH(i,o,61)^vr.shrSH(i,o,6),a=vr.rotrSL(i,o,19)^vr.rotrBL(i,o,61)^vr.shrSL(i,o,6),l=vr.add4L(r,a,xr[w-7],xr[w-16]),u=vr.add4H(l,n,s,Er[w-7],Er[w-16]);Er[w]=0|u,xr[w]=0|l}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:l,Dl:u,Eh:c,El:h,Fh:f,Fl:d,Gh:p,Gl:y,Hh:g,Hl:b}=this;for(let w=0;w<80;w++){const e=vr.rotrSH(c,h,14)^vr.rotrSH(c,h,18)^vr.rotrBH(c,h,41),t=vr.rotrSL(c,h,14)^vr.rotrSL(c,h,18)^vr.rotrBL(c,h,41),m=c&f^~c&p,v=h&d^~h&y,_=vr.add5L(b,t,v,kr[w],xr[w]),k=vr.add5H(_,g,e,m,_r[w],Er[w]),E=0|_,x=vr.rotrSH(n,r,28)^vr.rotrBH(n,r,34)^vr.rotrBH(n,r,39),S=vr.rotrSL(n,r,28)^vr.rotrBL(n,r,34)^vr.rotrBL(n,r,39),A=n&i^n&s^i&s,C=r&o^r&a^o&a;g=0|p,b=0|y,p=0|f,y=0|d,f=0|c,d=0|h,({h:c,l:h}=vr.add(0|l,0|u,0|k,0|E)),l=0|s,u=0|a,s=0|i,a=0|o,i=0|n,o=0|r;const O=vr.add3L(E,S,C);n=vr.add3H(O,k,x,A),r=0|O}({h:n,l:r}=vr.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=vr.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=vr.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:l,l:u}=vr.add(0|this.Dh,0|this.Dl,0|l,0|u)),({h:c,l:h}=vr.add(0|this.Eh,0|this.El,0|c,0|h)),({h:f,l:d}=vr.add(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:y}=vr.add(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:b}=vr.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(n,r,i,o,s,a,l,u,c,h,f,d,p,y,g,b)}roundClean(){Er.fill(0),xr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ar extends Sr{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Cr extends Sr{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Or extends Sr{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Rr=ir((()=>new Sr)),Ir=ir((()=>new Ar)),Nr=ir((()=>new Cr)),Tr=ir((()=>new Or)),Lr=a(Object.freeze(Object.defineProperty({__proto__:null,SHA512:Sr,sha512:Rr,sha512_224:Ir,sha512_256:Nr,sha384:Tr},Symbol.toStringTag,{value:"Module"}))),Pr=a(or),Ur=a(gn);Object.defineProperty(mn,"__esModule",{value:!0});var Br=mn.mnemonicToSeedSync=mn.mnemonicToSeed=Qr=mn.validateMnemonic=mn.entropyToMnemonic=mn.mnemonicToEntropy=Vr=mn.generateMnemonic=void 0;const Fr=Cn,zr=On,Mr=gr,jr=Lr,$r=Pr,Dr=Ur;function Hr(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function qr(e){const t=Hr(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function Kr(e){Fr.default.bytes(e,16,20,24,28,32)}var Vr=mn.generateMnemonic=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128;if(Fr.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return Yr((0,$r.randomBytes)(t/8),e)};const Wr=e=>{const t=8-e.length/4;return new Uint8Array([(0,Mr.sha256)(e)[0]>>t<<t])};function Zr(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),Dr.utils.chain(Dr.utils.checksum(1,Wr),Dr.utils.radix2(11,!0),Dr.utils.alphabet(e))}function Gr(e,t){const{words:n}=qr(e),r=Zr(t).decode(n);return Kr(r),r}function Yr(e,t){return Kr(e),Zr(t).encode(e).join((e=>"\u3042\u3044\u3053\u304f\u3057\u3093"===e[0])(t)?"\u3000":" ")}mn.mnemonicToEntropy=Gr,mn.entropyToMnemonic=Yr;var Qr=mn.validateMnemonic=function(e,t){try{Gr(e,t)}catch{return!1}return!0};const Jr=e=>Hr(`mnemonic${e}`);mn.mnemonicToSeed=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,zr.pbkdf2Async)(jr.sha512,qr(e).nfkd,Jr(t),{c:2048,dkLen:64})},Br=mn.mnemonicToSeedSync=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,zr.pbkdf2)(jr.sha512,qr(e).nfkd,Jr(t),{c:2048,dkLen:64})};class Xr extends rr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,An.hash(e);const n=tr(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return An.exists(this),this.iHash.update(e),this}digestInto(e){An.exists(this),An.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ei=(e,t,n)=>new Xr(e,t).update(n).digest();ei.create=(e,t)=>new Xr(e,t);const ti=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ni=Uint8Array.from({length:16},((e,t)=>t)),ri=ni.map((e=>(9*e+5)%16));let ii=[ni],oi=[ri];for(let Cv=0;Cv<4;Cv++)for(let e of[ii,oi])e.push(e[Cv].map((e=>ti[e])));const si=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),ai=ii.map(((e,t)=>e.map((e=>si[t][e])))),li=oi.map(((e,t)=>e.map((e=>si[t][e])))),ui=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),ci=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),hi=(e,t)=>e<<t|e>>>32-t;function fi(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const di=new Uint32Array(16);class pi extends sr{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:i}=this;return[e,t,n,r,i]}set(e,t,n,r,i){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|i}process(e,t){for(let f=0;f<16;f++,t+=4)di[f]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,o=i,s=0|this.h2,a=s,l=0|this.h3,u=l,c=0|this.h4,h=c;for(let f=0;f<5;f++){const e=4-f,t=ui[f],d=ci[f],p=ii[f],y=oi[f],g=ai[f],b=li[f];for(let r=0;r<16;r++){const e=hi(n+fi(f,i,s,l)+di[p[r]]+t,g[r])+c|0;n=c,c=l,l=0|hi(s,10),s=i,i=e}for(let n=0;n<16;n++){const t=hi(r+fi(e,o,a,u)+di[y[n]]+d,b[n])+h|0;r=h,h=u,u=0|hi(a,10),a=o,o=t}}this.set(this.h1+s+u|0,this.h2+l+h|0,this.h3+c+r|0,this.h4+n+o|0,this.h0+i+a|0)}roundClean(){di.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const yi=ir((()=>new pi)),gi=De.ProjectivePoint,bi=Xt(pr);function wi(e){return BigInt(`0x${Qn(e)}`)}const mi=er("Bitcoin seed"),vi={private:76066276,public:76067358},_i=2147483648,ki=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return Wn(t).setUint32(0,e,!1),t};class Ei{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,Wn(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return bi.encode(this.serialize(this.versions.private,nr(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return bi.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vi;if(kn(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=ei(Rr,mi,e);return new Ei({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vi;const n=bi.decode(e),r=Wn(n),i=r.getUint32(0,!1),o={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},s=n.slice(45),a=0===s[0];if(i!==t[a?"private":"public"])throw new Error("Version mismatch");return new Ei(a?{...o,privateKey:s.slice(1)}:{...o,publicKey:s})}static fromJSON(e){return Ei.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||vi,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!De.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:wi(e.privateKey),this.privKeyBytes=Jn(this.privKey.toString(16).padStart(64,"0")),this.pubKey=De.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=gi.fromHex(e.publicKey).toRawBytes(!0)}this.pubHash=(e=>yi(pr(e)))(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let n=this;for(const r of t){const e=/^(\d+)('?)$/.exec(r);if(!e||3!==e.length)throw new Error(`Invalid child index: ${r}`);let t=+e[1];if(!Number.isSafeInteger(t)||t>=_i)throw new Error("Invalid index");"'"===e[2]&&(t+=_i),n=n.deriveChild(t)}return n}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=ki(e);if(e>=_i){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=nr(new Uint8Array([0]),e,t)}else t=nr(this.pubKey,t);const n=ei(Rr,this.chainCode,t),r=wi(n.slice(0,32)),i=n.slice(32);if(!De.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=he(this.privKey+r,De.CURVE.n);if(!De.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=e}else{const e=gi.fromHex(this.pubKey).add(gi.fromPrivateKey(r));if(e.equals(gi.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=e.toRawBytes(!0)}return new Ei(o)}catch{return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return kn(e,32),De.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if(kn(e,32),kn(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=De.Signature.fromCompact(t)}catch{return!1}return De.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return kn(t,33),nr(ki(e),new Uint8Array([this.depth]),ki(this.parentFingerprint),ki(this.index),this.chainCode,t)}}var xi=Object.defineProperty,Si=(e,t)=>{for(var n in t)xi(e,n,{get:t[n],enumerable:!0})};function Ai(e){return ut(nt.getPublicKey(e))}Si({},{MessageNode:()=>Ti,MessageQueue:()=>Li,insertEventIntoAscendingList:()=>Ni,insertEventIntoDescendingList:()=>Ii,normalizeURL:()=>Ri,utf8Decoder:()=>Ci,utf8Encoder:()=>Oi});var Ci=new TextDecoder("utf-8"),Oi=new TextEncoder;function Ri(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function Ii(e,t){var n;let r,i=0,o=e.length-1,s=i;if(o<0)s=0;else if(t.created_at<e[o].created_at)s=o+1;else if(t.created_at>=e[i].created_at)s=i;else for(;;){if(o<=i+1){s=o;break}if(r=Math.floor(i+(o-i)/2),e[r].created_at>t.created_at)i=r;else{if(!(e[r].created_at<t.created_at)){s=r;break}o=r}}return(null==(n=e[s])?void 0:n.id)!==t.id?[...e.slice(0,s),t,...e.slice(s)]:e}function Ni(e,t){var n;let r,i=0,o=e.length-1,s=i;if(o<0)s=0;else if(t.created_at>e[o].created_at)s=o+1;else if(t.created_at<=e[i].created_at)s=i;else for(;;){if(o<=i+1){s=o;break}if(r=Math.floor(i+(o-i)/2),e[r].created_at<t.created_at)i=r;else{if(!(e[r].created_at>t.created_at)){s=r;break}o=r}}return(null==(n=e[s])?void 0:n.id)!==t.id?[...e.slice(0,s),t,...e.slice(s)]:e}var Ti=class{constructor(e){o(this,"_value"),o(this,"_next"),this._value=e,this._next=null}get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}},Li=class{constructor(){o(this,"_first"),o(this,"_last"),o(this,"_size"),this._first=null,this._last=null,this._size=0}get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}enqueue(e){const t=new Ti(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}};function Pi(e,t){let n=e;return n.pubkey=Ai(t),n.id=Ui(n),n.sig=Mi(n,t),n}function Ui(e){let t=St(Oi.encode(function(e){if(!Fi(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e)));return ut(t)}var Bi=e=>e instanceof Object;function Fi(e){if(!Bi(e)||"number"!=typeof e.kind||"string"!=typeof e.content||"number"!=typeof e.created_at||"string"!=typeof e.pubkey||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}function zi(e){try{return nt.verify(e.sig,Ui(e),e.pubkey)}catch{return!1}}function Mi(e,t){return ut(nt.sign(Ui(e),t))}function ji(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some((e=>t.id.startsWith(e)))||e.kinds&&-1===e.kinds.indexOf(t.kind)||e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some((e=>t.pubkey.startsWith(e))))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((e=>{let[t,i]=e;return t===n.slice(1)&&-1!==r.indexOf(i)})))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>=e.until)}function $i(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function Di(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function Hi(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return e.slice(r+1,o)}function qi(e,t){return t===$i(e,"id")}function Ki(e,t){return t===$i(e,"pubkey")}function Vi(e,t){return t===Di(e,"kind")}Si({},{getHex64:()=>$i,getInt:()=>Di,getSubscriptionId:()=>Hi,matchEventId:()=>qi,matchEventKind:()=>Vi,matchEventPubkey:()=>Ki});function Wi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:i=3e3}=t;var o,s,a={},l={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},c={};async function h(){return s||(s=new Promise(((t,n)=>{try{o=new WebSocket(e)}catch(f){n(f)}o.onopen=()=>{l.connect.forEach((e=>e())),t()},o.onerror=()=>{s=void 0,l.error.forEach((e=>e())),n()},o.onclose=async()=>{s=void 0,l.disconnect.forEach((e=>e()))};let r,i=new Li;function h(){var t,n,o;if(0===i.size)return clearInterval(r),void(r=null);var s=i.dequeue();if(!s)return;let h=Hi(s);if(h){let t=a[h];if(t&&t.alreadyHaveEvent&&t.alreadyHaveEvent($i(s,"id"),e))return}try{let e=JSON.parse(s);switch(e[0]){case"EVENT":{let n=e[1],r=e[2];return void(Fi(r)&&a[n]&&(a[n].skipVerification||zi(r))&&function(e,t){for(let n=0;n<e.length;n++)if(ji(e[n],t))return!0;return!1}(a[n].filters,r)&&(a[n],((null==(t=u[n])?void 0:t.event)||[]).forEach((e=>e(r)))))}case"COUNT":let r=e[1],i=e[2];return void(a[r]&&((null==(n=u[r])?void 0:n.count)||[]).forEach((e=>e(i))));case"EOSE":{let t=e[1];return void(t in u&&(u[t].eose.forEach((e=>e())),u[t].eose=[]))}case"OK":{let t=e[1],n=e[2],r=e[3]||"";return void(t in c&&(n?c[t].ok.forEach((e=>e())):c[t].failed.forEach((e=>e(r))),c[t].ok=[],c[t].failed=[]))}case"NOTICE":let s=e[1];return void l.notice.forEach((e=>e(s)));case"AUTH":{let t=e[1];return void(null==(o=l.auth)||o.forEach((e=>e(t))))}}}catch{return}}o.onmessage=e=>{i.enqueue(e.data),r||(r=setInterval(h,0))}})),s)}function f(){return 1===(null==o?void 0:o.readyState)}async function d(e){let t=JSON.stringify(e);if(f()||(await new Promise((e=>setTimeout(e,1e3))),f()))try{o.send(t)}catch(n){console.log(n)}}const p=function(e){let{verb:t="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:i=Math.random().toString().slice(2)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i;return a[o]={id:o,filters:e,skipVerification:n,alreadyHaveEvent:r},d([t,o,...e]),{sub:function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(t||e,{skipVerification:i.skipVerification||n,alreadyHaveEvent:i.alreadyHaveEvent||r,id:o})},unsub:()=>{delete a[o],delete u[o],d(["CLOSE",o])},on:(e,t)=>{u[o]=u[o]||{event:[],count:[],eose:[]},u[o][e].push(t)},off:(e,t)=>{let n=u[o],r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)}}};function y(e,t){if(!e.id)throw new Error(`event ${e} has no id`);let n=e.id;return d([t,e]),{on:(e,t)=>{c[n]=c[n]||{ok:[],failed:[]},c[n][e].push(t)},off:(e,t)=>{let r=c[n];if(!r)return;let i=r[e].indexOf(t);i>=0&&r[e].splice(i,1)}}}return{url:e,sub:p,on:(e,t)=>{l[e].push(t),"connect"===e&&1===(null==o?void 0:o.readyState)&&t()},off:(e,t)=>{let n=l[e].indexOf(t);-1!==n&&l[e].splice(n,1)},list:(e,t)=>new Promise((r=>{let i=p(e,t),o=[],s=setTimeout((()=>{i.unsub(),r(o)}),n);i.on("eose",(()=>{i.unsub(),clearTimeout(s),r(o)})),i.on("event",(e=>{o.push(e)}))})),get:(e,t)=>new Promise((n=>{let i=p([e],t),o=setTimeout((()=>{i.unsub(),n(null)}),r);i.on("event",(e=>{i.unsub(),clearTimeout(o),n(e)}))})),count:e=>new Promise((t=>{let n=p(e,{...p,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),t(null)}),i);n.on("count",(e=>{n.unsub(),clearTimeout(r),t(e)}))})),publish:e=>y(e,"EVENT"),auth:e=>y(e,"AUTH"),connect:async function(){f()||await h()},close(){l={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},c={},o.readyState===WebSocket.OPEN&&(null==o||o.close())},get status(){var e;return null!=(e=null==o?void 0:o.readyState)?e:3}}}var Zi={};Si(Zi,{BECH32_REGEX:()=>Yi,decode:()=>Qi,naddrEncode:()=>oo,neventEncode:()=>io,noteEncode:()=>to,nprofileEncode:()=>ro,npubEncode:()=>eo,nrelayEncode:()=>so,nsecEncode:()=>Xi});var Gi=5e3,Yi=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Qi(e){var t,n,r,i,o,s,a;let{prefix:l,words:u}=sn.decode(e,Gi),c=new Uint8Array(sn.fromWords(u));switch(l){case"nprofile":{let e=Ji(c);if(null==(t=e[0])||!t[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ut(e[0][0]),relays:e[1]?e[1].map((e=>Ci.decode(e))):[]}}}case"nevent":{let e=Ji(c);if(null==(n=e[0])||!n[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:ut(e[0][0]),relays:e[1]?e[1].map((e=>Ci.decode(e))):[],author:null!=(r=e[2])&&r[0]?ut(e[2][0]):void 0}}}case"naddr":{let e=Ji(c);if(null==(i=e[0])||!i[0])throw new Error("missing TLV 0 for naddr");if(null==(o=e[2])||!o[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(null==(s=e[3])||!s[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Ci.decode(e[0][0]),pubkey:ut(e[2][0]),kind:parseInt(ut(e[3][0]),16),relays:e[1]?e[1].map((e=>Ci.decode(e))):[]}}}case"nrelay":{let e=Ji(c);if(null==(a=e[0])||!a[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Ci.decode(e[0][0])}}case"nsec":case"npub":case"note":return{type:l,data:ut(c)};default:throw new Error(`unknown prefix ${l}`)}}function Ji(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${e}`);let i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function Xi(e){return no("nsec",e)}function eo(e){return no("npub",e)}function to(e){return no("note",e)}function no(e,t){let n=ct(t),r=sn.toWords(n);return sn.encode(e,r,Gi)}function ro(e){let t=ao({0:[ct(e.pubkey)],1:(e.relays||[]).map((e=>Oi.encode(e)))}),n=sn.toWords(t);return sn.encode("nprofile",n,Gi)}function io(e){let t=ao({0:[ct(e.id)],1:(e.relays||[]).map((e=>Oi.encode(e))),2:e.author?[ct(e.author)]:[]}),n=sn.toWords(t);return sn.encode("nevent",n,Gi)}function oo(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=ao({0:[Oi.encode(e.identifier)],1:(e.relays||[]).map((e=>Oi.encode(e))),2:[ct(e.pubkey)],3:[new Uint8Array(t)]}),r=sn.toWords(n);return sn.encode("naddr",r,Gi)}function so(e){let t=ao({0:[Oi.encode(e)]}),n=sn.toWords(t);return sn.encode("nrelay",n,Gi)}function ao(e){let t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;r.forEach((e=>{let r=new Uint8Array(e.length+2);r.set([parseInt(n)],0),r.set([e.length],1),r.set(e,2),t.push(r)}))})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const r=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(r);for(let o=0,s=0;o<t.length;o++){const e=t[o];i.set(e,s),s+=e.length}return i}(...t)}var lo={};async function uo(e,t,n){const r=ho(De.getSharedSecret(e,"02"+t));let i=Uint8Array.from(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(ot&&"function"==typeof ot.getRandomValues)return ot.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(16)),o=Oi.encode(n),s=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),a=await crypto.subtle.encrypt({name:"AES-CBC",iv:i},s,o);return`${Kt.encode(new Uint8Array(a))}?iv=${Kt.encode(new Uint8Array(i.buffer))}`}async function co(e,t,n){let[r,i]=n.split("?iv="),o=ho(De.getSharedSecret(e,"02"+t)),s=await crypto.subtle.importKey("raw",o,{name:"AES-CBC"},!1,["decrypt"]),a=Kt.decode(r),l=Kt.decode(i),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:l},s,a);return Ci.decode(u)}function ho(e){return e.slice(1,33)}Si(lo,{decrypt:()=>co,encrypt:()=>uo}),typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);var fo={};Si(fo,{NIP05_REGEX:()=>yo,queryProfile:()=>wo,searchDomain:()=>bo,useFetchImplementation:()=>go});var po,yo=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{po=fetch}catch{}function go(e){po=e}async function bo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return(await(await po(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch{return{}}}async function wo(e){const t=e.match(yo);if(!t)return null;const[n,r="_",i]=t;try{const e=await po(`https://${i}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),o=t[r];return o?{pubkey:o,relays:null==n?void 0:n[o]}:null}catch{return null}}function mo(e,t){let n=Ei.fromMasterSeed(Br(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return ut(n)}function vo(){return Vr(wn)}function _o(e){return Qr(e,wn)}Si({},{generateSeedWords:()=>vo,privateKeyFromSeedWords:()=>mo,validateWords:()=>_o});function ko(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const e=n[r],[i,o,s,a]=e,l={id:o,relays:s?[s]:[]},u=0===r,c=r===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?u?t.root=l:c?t.reply=l:t.mentions.push(l):t.mentions.push(l):t.reply=l:t.root=l}return t}Si({},{parse:()=>ko});function Eo(e){return function(e){let t,n,r;for(n=0,t=0;n<e.length&&(r=xo(e[n]),t+=r,8===r);n++);return t}(ct(e))}function xo(e){let t=0;if(0===e)return 8;for(;e>>=1;)t++;return 7-t}Si({},{getPow:()=>Eo});function So(e,t,n,r){var i;return Pi({kind:6,tags:[...null!=(i=e.tags)?i:[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function Ao(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t?{id:t[1],relays:[t[2],null==n?void 0:n[2]].filter((e=>"string"==typeof e)),author:null==n?void 0:n[1]}:void 0}function Co(e){let{skipVerification:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ao(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch{return}return r.id===n.id&&(t||zi(r))?r:void 0}Si({},{finishRepostEvent:()=>So,getRepostedEvent:()=>Co,getRepostedEventPointer:()=>Ao});Si({},{NOSTR_URI_REGEX:()=>Oo,parse:()=>Io,test:()=>Ro});var Oo=new RegExp(`nostr:(${Yi.source})`);function Ro(e){return"string"==typeof e&&new RegExp(`^${Oo.source}$`).test(e)}function Io(e){const t=e.match(new RegExp(`^${Oo.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:Qi(t[1])}}function No(e,t,n){var r,i;const o=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return Pi({...e,kind:7,tags:[...null!=(r=e.tags)?r:[],...o,["e",t.id],["p",t.pubkey]],content:null!=(i=e.content)?i:"+"},n)}function To(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}Si({},{finishReactionEvent:()=>No,getReactedEventPointer:()=>To});function Lo(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let i=St(Oi.encode(`nostr:delegation:${t.pubkey}:${r}`)),o=ut(nt.sign(i,e));return{from:Ai(e),to:t.pubkey,cond:r,sig:o}}function Po(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],r=t[2],i=t[3],o=r.split("&");for(let a=0;a<o.length;a++){let[t,n,r]=o[a].split(/\b/);if("kind"!==t||"="!==n||e.kind!==parseInt(r)){if("created_at"===t&&"<"===n&&e.created_at<parseInt(r))continue;if("created_at"===t&&">"===n&&e.created_at>parseInt(r))continue;return null}}let s=St(Oi.encode(`nostr:delegation:${e.pubkey}:${r}`));return nt.verify(i,s,n)?n:null}Si({},{createDelegation:()=>Lo,getDelegator:()=>Po});Si({},{matchAll:()=>Bo,regex:()=>Uo,replaceAll:()=>Fo});var Uo=()=>new RegExp(`\\b${Oo.source}\\b`,"g");function*Bo(e){const t=e.matchAll(Uo());for(const n of t){const[e,t]=n;yield{uri:e,value:t,decoded:Qi(t),start:n.index,end:n.index+e.length}}}function Fo(e,t){return e.replaceAll(Uo(),((e,n)=>t({uri:e,value:n,decoded:Qi(n)})))}var zo;Si({},{useFetchImplementation:()=>Mo,validateGithub:()=>jo});try{zo=fetch}catch{}function Mo(e){zo=e}async function jo(e,t,n){try{return await(await zo(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}Si({},{authenticate:()=>Do});var $o,Do=async e=>{let{challenge:t,relay:n,sign:r}=e;const i={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",n.url],["challenge",t]],content:""},o=n.auth(await r(i));return new Promise(((e,t)=>{o.on("ok",(function t(){o.off("ok",t),e()})),o.on("failed",(function e(n){o.off("failed",e),t(n)}))}))},Ho={};Si(Ho,{getZapEndpoint:()=>Ko,makeZapReceipt:()=>Zo,makeZapRequest:()=>Vo,useFetchImplementation:()=>qo,validateZapRequest:()=>Wo});try{$o=fetch}catch{}function qo(e){$o=e}async function Ko(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=sn.decode(n,1e3),r=sn.fromWords(e);t=Ci.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let i=await(await $o(t)).json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch{}return null}function Vo(e){let{profile:t,event:n,amount:r,relays:i,comment:o=""}=e;if(!r)throw new Error("amount not given");if(!t)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",t],["amount",r.toString()],["relays",...i]]};return n&&s.tags.push(["e",n]),s}function Wo(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Fi(t))return"Zap request is not a valid Nostr event.";if(!zi(t))return"Invalid signature on zap request.";let n=t.tags.find((e=>{let[t,n]=e;return"p"===t&&n}));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((e=>{let[t,n]=e;return"e"===t&&n}));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((e=>{let[t,n]=e;return"relays"===t&&n}))?null:"Zap request doesn't have a 'relays' tag."}function Zo(e){let{zapRequest:t,preimage:n,bolt11:r,paidAt:i}=e,o=JSON.parse(t).tags.filter((e=>{let[t]=e;return"e"===t||"p"===t||"a"===t})),s={kind:9735,created_at:Math.round(i.getTime()/1e3),content:"",tags:[...o,["bolt11",r],["description",t]]};return n&&s.tags.push(["preimage",n]),s}var Go={};Object.defineProperty(Go,"__esModule",{value:!0}),Go.is_node=void 0;var Yo=null;Go.is_node=function(){return null===Yo&&(Yo="object"==typeof s&&"object"==typeof s.process&&"object"==typeof s.process.versions&&typeof s.process.versions.node<"u"),Yo};var Qo,Jo,Xo={};const es="1.0.34";var ts,ns,rs,is;function os(){if(is)return rs;var e;if(is=1,"object"==typeof globalThis)e=globalThis;else try{e=function(){if(Jo)return Qo;Jo=1;var e=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};return Qo=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}()}()}catch{}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var t=e.WebSocket||e.MozWebSocket,n=(ns||(ns=1,ts=es),ts);function r(e,n){return n?new t(e,n):new t(e)}return t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(r,e,{get:function(){return t[e]}})})),rs={w3cwebsocket:t?r:null,version:n}}var ss,as,ls={},us={},cs={},hs={},fs={},ds={};function ps(){if(as)return fs;as=1;var e=s&&s.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(fs,"__esModule",{value:!0}),fs.Container=void 0;var t=function(){if(ss)return ds;ss=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.ForOfAdaptor=void 0;var e=function(){function e(e,t){this.it_=e,this.last_=t}return e.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var e=this.it_;return this.it_=this.it_.next(),{done:!1,value:e.value}},e.prototype[Symbol.iterator]=function(){return this},e}();return ds.ForOfAdaptor=e,ds}(),n=function(){function n(){}return n.prototype.empty=function(){return 0===this.size()},n.prototype.rbegin=function(){return this.end().reverse()},n.prototype.rend=function(){return this.begin().reverse()},n.prototype[Symbol.iterator]=function(){return new t.ForOfAdaptor(this.begin(),this.end())},n.prototype.toJSON=function(){var t,n,r=[];try{for(var i=e(this),o=i.next();!o.done;o=i.next()){var s=o.value;r.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},n}();return fs.Container=n,fs}var ys,gs,bs={};function ws(){if(ys)return bs;ys=1;var e=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(bs,"__esModule",{value:!0}),bs.NativeArrayIterator=void 0;var t=function(){function t(e,t){this.data_=e,this.index_=t}return t.prototype.index=function(){return this.index_},Object.defineProperty(t.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),t.prototype.prev=function(){return--this.index_,this},t.prototype.next=function(){return++this.index_,this},t.prototype.advance=function(e){return this.index_+=e,this},t.prototype.equals=function(e){return this.data_===e.data_&&this.index_===e.index_},t.prototype.swap=function(t){var n,r;n=e([t.data_,this.data_],2),this.data_=n[0],t.data_=n[1],r=e([t.index_,this.index_],2),this.index_=r[0],t.index_=r[1]},t}();return bs.NativeArrayIterator=t,bs}var ms,vs,_s,ks={},Es={},xs={},Ss={};function As(){if(vs)return xs;vs=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(xs,"__esModule",{value:!0}),xs.LogicError=void 0;var t=function(){if(ms)return Ss;ms=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Exception=void 0;var t=function(t){function n(e){var n=this.constructor,r=t.call(this,e)||this,i=n.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(r,i):r.__proto__=i,r}return e(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),n.prototype.what=function(){return this.message},n.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},n}(Error);return Ss.Exception=t,Ss}(),n=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n}(t.Exception);return xs.LogicError=n,xs}function Cs(){if(_s)return Es;_s=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Es,"__esModule",{value:!0}),Es.InvalidArgument=void 0;var t=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n}(As().LogicError);return Es.InvalidArgument=t,Es}var Os,Rs,Is,Ns={};function Ts(){return Rs||(Rs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorGenerator=void 0;var t=Cs(),n=function(){if(Os)return Ns;Os=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.OutOfRange=void 0;var t=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n}(As().LogicError);return Ns.OutOfRange=t,Ns}();!function(e){function r(e){if("string"==typeof e)return e;var t=e.constructor.name;return e.constructor.__MODULE&&(t="".concat(e.constructor.__MODULE,".").concat(t)),"std.".concat(t)}e.get_class_name=r,e.empty=function(e,t){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): it's empty container."))},e.negative_index=function(e,t,i){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): parametric index is negative -> (index = ").concat(i,")."))},e.excessive_index=function(e,t,i,o){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): parametric index is equal or greater than size -> (index = ").concat(i,", size: ").concat(o,")."))},e.not_my_iterator=function(e,n){return new t.InvalidArgument("Error on ".concat(r(e),".").concat(n,"(): parametric iterator is not this container's own."))},e.erased_iterator=function(e,n){return new t.InvalidArgument("Error on ".concat(r(e),".").concat(n,"(): parametric iterator, it already has been erased."))},e.negative_iterator=function(e,t,i){return new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): parametric iterator is directing negative position -> (index = ").concat(i,")."))},e.iterator_end_value=function(e,t){void 0===t&&(t="end");var i=r(e);return new n.OutOfRange("Error on ".concat(i,".Iterator.value: cannot access to the ").concat(i,".").concat(t,"().value."))},e.key_nout_found=function(e,t,i){throw new n.OutOfRange("Error on ".concat(r(e),".").concat(t,"(): unable to find the matched key -> ").concat(i))}}(e.ErrorGenerator||(e.ErrorGenerator={}))}(ks)),ks}function Ls(){if(Is)return cs;Is=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(Ww){i={error:Ww}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(cs,"__esModule",{value:!0}),cs.UniqueSet=void 0;var r=function(){if(gs)return hs;gs=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(hs,"__esModule",{value:!0}),hs.SetContainer=void 0;var t=ps(),n=ws(),r=function(t){function r(e){var n=t.call(this)||this;return n.data_=e(n),n}return e(r,t),r.prototype.assign=function(e,t){this.clear(),this.insert(e,t)},r.prototype.clear=function(){this.data_.clear()},r.prototype.begin=function(){return this.data_.begin()},r.prototype.end=function(){return this.data_.end()},r.prototype.has=function(e){return!this.find(e).equals(this.end())},r.prototype.size=function(){return this.data_.size()},r.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this.size();var r=new n.NativeArrayIterator(e,0),i=new n.NativeArrayIterator(e,e.length);return this._Insert_by_range(r,i),this.size()},r.prototype.insert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?this._Insert_by_key(e[0]):e[0].next instanceof Function&&e[1].next instanceof Function?this._Insert_by_range(e[0],e[1]):this._Insert_by_hint(e[0],e[1])},r.prototype.erase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1!==e.length||e[0]instanceof this.end().constructor&&e[0].source()===this?1===e.length?this._Erase_by_range(e[0]):this._Erase_by_range(e[0],e[1]):this._Erase_by_val(e[0])},r.prototype._Erase_by_range=function(e,t){void 0===t&&(t=e.next());var n=this.data_.erase(e,t);return this._Handle_erase(e,t),n},r}(t.Container);return hs.SetContainer=r,hs}(),i=Ts(),o=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return e(o,r),o.prototype.count=function(e){return this.find(e).equals(this.end())?0:1},o.prototype.insert=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return r.prototype.insert.apply(this,n([],t(e),!1))},o.prototype._Insert_by_range=function(e,t){for(;!e.equals(t);e=e.next())this._Insert_by_key(e.value)},o.prototype.extract=function(e){return e instanceof this.end().constructor?this._Extract_by_iterator(e):this._Extract_by_val(e)},o.prototype._Extract_by_val=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw i.ErrorGenerator.key_nout_found(this,"extract",e);return this._Erase_by_range(t),e},o.prototype._Extract_by_iterator=function(e){return!0===e.equals(this.end())||!1===this.has(e.value)?this.end():(this._Erase_by_range(e),e)},o.prototype._Erase_by_val=function(e){var t=this.find(e);return!0===t.equals(this.end())?0:(this._Erase_by_range(t),1)},o.prototype.merge=function(e){for(var t=e.begin();!t.equals(e.end());)!1===this.has(t.value)?(this.insert(t.value),t=e.erase(t)):t=t.next()},o}(r.SetContainer);return cs.UniqueSet=o,cs}var Ps,Us={},Bs={};var Fs,zs,Ms,js={},$s={},Ds={};function Hs(){if(zs)return $s;zs=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.get_uid=void 0;var e=function(){if(Fs)return Ds;Fs=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds._Get_root=void 0;var e=Go;Ds._Get_root=function(){return null===t&&void 0===(t=(0,e.is_node)()?s:self).__s_iUID&&(t.__s_iUID=0),t};var t=null;return Ds}();return $s.get_uid=function(t){if(t instanceof Object){if(!1===t.hasOwnProperty("__get_m_iUID")){var n=++(0,e._Get_root)().__s_iUID;Object.defineProperty(t,"__get_m_iUID",{value:function(){return n}})}return t.__get_m_iUID()}return void 0===t?-1:0},$s}function qs(){if(Ms)return js;Ms=1;var e=s&&s.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(js,"__esModule",{value:!0}),js.hash=void 0;var t=Hs();function n(e,t){return t^=e?1:0,t*=a}function r(e,t){return i(e.toString(),t)}function i(e,t){for(var n=0;n<e.length;++n)t^=e.charCodeAt(n),t*=a;return Math.abs(t)}js.hash=function(){for(var s,l,u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var h=o;try{for(var f=e(u),d=f.next();!d.done;d=f.next()){var p=d.value,y=typeof(p=p&&p.valueOf());if("boolean"===y)h=n(p,h);else if("number"===y||"bigint"===y)h=r(p,h);else if("string"===y)h=i(p,h);else if(p instanceof Object&&p.hashCode instanceof Function){var g=p.hashCode();if(1===u.length)return g;h^=g,h*=a}else h=r((0,t.get_uid)(p),h)}}catch(b){s={error:b}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}return Math.abs(h)};var o=2166136261,a=16777619;return js}var Ks,Vs,Ws={};function Zs(){if(Ks)return Ws;Ks=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.greater_equal=Ws.greater=Ws.less_equal=Ws.less=Ws.not_equal_to=Ws.equal_to=void 0;var e=Hs();function t(e,t){return e=e&&e.valueOf(),t=t&&t.valueOf(),e instanceof Object&&e.equals instanceof Function?e.equals(t):e===t}function n(t,n){return t=t.valueOf(),n=n.valueOf(),t instanceof Object?t.less instanceof Function?t.less(n):(0,e.get_uid)(t)<(0,e.get_uid)(n):t<n}function r(e,r){return n(e,r)||t(e,r)}return Ws.equal_to=t,Ws.not_equal_to=function(e,n){return!t(e,n)},Ws.less=n,Ws.less_equal=r,Ws.greater=function(e,t){return!r(e,t)},Ws.greater_equal=function(e,t){return!n(e,t)},Ws}function Gs(){return Vs||(Vs=1,function(e){var t=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(Ww){i={error:Ww}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.IHashContainer=void 0;var r=(Ps||(Ps=1,function(e){var t=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.IAssociativeContainer=void 0,(e.IAssociativeContainer||(e.IAssociativeContainer={})).construct=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o,s;return r.length>=1&&r[0]instanceof Array?(o=function(){var i=r[0];e.push.apply(e,n([],t(i),!1))},s=r.slice(1)):r.length>=2&&r[0].next instanceof Function&&r[1].next instanceof Function?(o=function(){var t=r[0],n=r[1];e.assign(t,n)},s=r.slice(2)):(o=null,s=r),{ramda:o,tail:s}}}(Bs)),Bs),i=qs(),o=Zs();(e.IHashContainer||(e.IHashContainer={})).construct=function(e,s,a){for(var l=[],u=3;u<arguments.length;u++)l[u-3]=arguments[u];var c=null,h=i.hash,f=o.equal_to;if(1===l.length&&l[0]instanceof s){var d=l[0];h=d.hash_function(),f=d.key_eq(),c=function(){var t=d.begin(),n=d.end();e.assign(t,n)}}else{var p=r.IAssociativeContainer.construct.apply(r.IAssociativeContainer,n([e],t(l),!1));c=p.ramda,p.tail.length>=1&&(h=p.tail[0]),p.tail.length>=2&&(f=p.tail[1])}a(h,f),null!==c&&c()}}(Us)),Us}var Ys,Qs={},Js={},Xs={};function ea(){if(Ys)return Xs;Ys=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.ListIterator=void 0;var e=Ts(),t=function(){function t(e,t,n){this.prev_=e,this.next_=t,this.value_=n}return t._Set_prev=function(e,t){e.prev_=t},t._Set_next=function(e,t){e.next_=t},t.prototype.prev=function(){return this.prev_},t.prototype.next=function(){return this.next_},Object.defineProperty(t.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),t.prototype._Try_value=function(){if(void 0===this.value_&&!0===this.equals(this.source().end()))throw e.ErrorGenerator.iterator_end_value(this.source())},t.prototype.equals=function(e){return this===e},t}();return Xs.ListIterator=t,Xs}var ta,na={};var ra,ia,oa={};function sa(){if(ra)return oa;ra=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.next=oa.prev=oa.advance=oa.distance=oa.size=oa.empty=void 0;var e=Cs();function t(t,n){if(0===n)return t;if(t.advance instanceof Function)return t.advance(n);var r;if(n<0){if(!(t.prev instanceof Function))throw new e.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");r=function(e){return e.prev()},n=-n}else r=function(e){return e.next()};for(;n-- >0;)t=r(t);return t}return oa.empty=function(e){return e instanceof Array?0!==e.length:e.empty()},oa.size=function(e){return e instanceof Array?e.length:e.size()},oa.distance=function(e,t){if(e.index instanceof Function)return function(e,t){var n=e.index(),r=t.index();return e.base instanceof Function?n-r:r-n}(e,t);for(var n=0;!e.equals(t);e=e.next())++n;return n},oa.advance=t,oa.prev=function(e,n){return void 0===n&&(n=1),1===n?e.prev():t(e,-n)},oa.next=function(e,n){return void 0===n&&(n=1),1===n?e.next():t(e,n)},oa}function aa(){if(ia)return Js;ia=1;var e=s&&s.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(Js,"__esModule",{value:!0}),Js.ListContainer=void 0;var n=ps(),r=ea(),i=function(){if(ta)return na;ta=1,Object.defineProperty(na,"__esModule",{value:!0}),na.Repeater=void 0;var e=function(){function e(e,t){this.index_=e,this.value_=t}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),e.prototype.next=function(){return++this.index_,this},e.prototype.equals=function(e){return this.index_===e.index_},e}();return na.Repeater=e,na}(),o=ws(),a=sa(),l=Ts(),u=function(n){function s(){var e=n.call(this)||this;return e.end_=e._Create_iterator(null,null),e.clear(),e}return e(s,n),s.prototype.assign=function(e,t){this.clear(),this.insert(this.end(),e,t)},s.prototype.clear=function(){r.ListIterator._Set_prev(this.end_,this.end_),r.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},s.prototype.resize=function(e){var t=e-this.size();t>0?this.insert(this.end(),t,void 0):t<0&&this.erase((0,a.advance)(this.end(),-t),this.end())},s.prototype.begin=function(){return this.begin_},s.prototype.end=function(){return this.end_},s.prototype.size=function(){return this.size_},s.prototype.push_front=function(e){this.insert(this.begin_,e)},s.prototype.push_back=function(e){this.insert(this.end_,e)},s.prototype.pop_front=function(){if(!0===this.empty())throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},s.prototype.pop_back=function(){if(!0===this.empty())throw l.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},s.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this.size();var n=new o.NativeArrayIterator(e,0),r=new o.NativeArrayIterator(e,e.length);return this._Insert_by_range(this.end(),n,r),this.size()},s.prototype.insert=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===e.erased_)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return 1===t.length?this._Insert_by_repeating_val(e,1,t[0]):2===t.length&&"number"==typeof t[0]?this._Insert_by_repeating_val(e,t[0],t[1]):this._Insert_by_range(e,t[0],t[1])},s.prototype._Insert_by_repeating_val=function(e,t,n){var r=new i.Repeater(0,n),o=new i.Repeater(t);return this._Insert_by_range(e,r,o)},s.prototype._Insert_by_range=function(e,t,n){for(var i=e.prev(),o=null,s=0,a=t;!1===a.equals(n);a=a.next()){var l=this._Create_iterator(i,null,a.value);0===s&&(o=l),r.ListIterator._Set_next(i,l),i=l,++s}return!0===e.equals(this.begin())&&(this.begin_=o),r.ListIterator._Set_next(i,e),r.ListIterator._Set_prev(e,i),this.size_+=s,o},s.prototype.erase=function(e,t){return void 0===t&&(t=e.next()),this._Erase_by_range(e,t)},s.prototype._Erase_by_range=function(e,t){if(e.source()!==this.end_.source())throw l.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===e.erased_)throw l.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(e.equals(this.end_))return this.end_;var n=e.prev();r.ListIterator._Set_next(n,t),r.ListIterator._Set_prev(t,n);for(var i=e;!i.equals(t);i=i.next())i.erased_=!0,--this.size_;return e.equals(this.begin_)&&(this.begin_=t),t},s.prototype.swap=function(e){var n,r,i;n=t([e.begin_,this.begin_],2),this.begin_=n[0],e.begin_=n[1],r=t([e.end_,this.end_],2),this.end_=r[0],e.end_=r[1],i=t([e.size_,this.size_],2),this.size_=i[0],e.size_=i[1]},s}(n.Container);return Js.ListContainer=u,Js}var la,ua,ca={};function ha(){if(la)return ca;la=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.ReverseIterator=void 0;var e=function(){function e(e){this.base_=e.prev()}return e.prototype.source=function(){return this.base_.source()},e.prototype.base=function(){return this.base_.next()},Object.defineProperty(e.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return this._Create_neighbor(this.base().next())},e.prototype.next=function(){return this._Create_neighbor(this.base_)},e.prototype.equals=function(e){return this.base_.equals(e.base_)},e}();return ca.ReverseIterator=e,ca}var fa,da,pa={},ya={};function ga(){if(fa)return ya;fa=1;var e=s&&s.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ya,"__esModule",{value:!0}),ya.HashBuckets=void 0;var t=function(){function t(e,t){this.fetcher_=e,this.hasher_=t,this.max_load_factor_=r,this.data_=[],this.size_=0,this.initialize()}return t.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},t.prototype.rehash=function(t){var r,i,o,s;t=Math.max(t,n);for(var a=[],l=0;l<t;++l)a.push([]);try{for(var u=e(this.data_),c=u.next();!c.done;c=u.next()){var h=c.value;try{for(var f=(o=void 0,e(h)),d=f.next();!d.done;d=f.next()){var p=d.value;a[this.hasher_(this.fetcher_(p))%a.length].push(p)}}catch(y){o={error:y}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}}catch(y){r={error:y}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}this.data_=a},t.prototype.reserve=function(e){e>this.capacity()&&(e=Math.floor(e/this.max_load_factor_),this.rehash(e))},t.prototype.initialize=function(){for(var e=0;e<n;++e)this.data_.push([])},t.prototype.length=function(){return this.data_.length},t.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},t.prototype.at=function(e){return this.data_[e]},t.prototype.load_factor=function(){return this.size_/this.length()},t.prototype.max_load_factor=function(e){if(void 0===e&&(e=null),null===e)return this.max_load_factor_;this.max_load_factor_=e},t.prototype.hash_function=function(){return this.hasher_},t.prototype.index=function(e){return this.hasher_(this.fetcher_(e))%this.length()},t.prototype.insert=function(e){var t=this.capacity();++this.size_>t&&this.reserve(2*t);var n=this.index(e);this.data_[n].push(e)},t.prototype.erase=function(e){for(var t=this.index(e),n=this.data_[t],r=0;r<n.length;++r)if(n[r]===e){n.splice(r,1),--this.size_;break}},t}();ya.HashBuckets=t;var n=10,r=1;return ya}var ba,wa,ma={};function va(){if(ba)return ma;ba=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.make_pair=ma.Pair=void 0;var e=qs(),t=Zs(),n=function(){function n(e,t){this.first=e,this.second=t}return n.prototype.equals=function(e){return(0,t.equal_to)(this.first,e.first)&&(0,t.equal_to)(this.second,e.second)},n.prototype.less=function(e){return!1===(0,t.equal_to)(this.first,e.first)?(0,t.less)(this.first,e.first):(0,t.less)(this.second,e.second)},n.prototype.hashCode=function(){return(0,e.hash)(this.first,this.second)},n}();return ma.Pair=n,ma.make_pair=function(e,t){return new n(e,t)},ma}function _a(){return wa||(wa=1,function(e){var t=s&&s.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},r=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.HashSet=void 0;var i,o=Ls(),a=Gs(),l=(ua||(ua=1,function(e){var t=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.SetElementList=void 0;var r=aa(),i=ea(),o=ha(),a=function(e){function r(t){var n=e.call(this)||this;return n.associative_=t,n}return t(r,e),r.prototype._Create_iterator=function(e,t,n){return r.Iterator.create(this,e,t,n)},r._Swap_associative=function(e,t){var r;r=n([t.associative_,e.associative_],2),e.associative_=r[0],t.associative_=r[1]},r.prototype.associative=function(){return this.associative_},r}(r.ListContainer);e.SetElementList=a,function(e){var n=function(e){function n(t,n,r,i){var o=e.call(this,n,r,i)||this;return o.source_=t,o}return t(n,e),n.create=function(e,t,r,i){return new n(e,t,r,i)},n.prototype.reverse=function(){return new r(this)},n.prototype.source=function(){return this.source_.associative()},n}(i.ListIterator);e.Iterator=n;var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype._Create_neighbor=function(e){return new n(e)},n}(o.ReverseIterator);e.ReverseIterator=r}(a=e.SetElementList||(e.SetElementList={})),e.SetElementList=a}(Qs)),Qs),u=function(){if(da)return pa;da=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(Ww){i={error:Ww}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n=s&&s.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(pa,"__esModule",{value:!0}),pa.SetHashBuckets=void 0;var r=function(r){function o(e,t,n){var o=r.call(this,i,t)||this;return o.source_=e,o.key_eq_=n,o}return e(o,r),o._Swap_source=function(e,n){var r;r=t([n.source_,e.source_],2),e.source_=r[0],n.source_=r[1]},o.prototype.key_eq=function(){return this.key_eq_},o.prototype.find=function(e){var t,r,i=this.hash_function()(e)%this.length(),o=this.at(i);try{for(var s=n(o),a=s.next();!a.done;a=s.next()){var l=a.value;if(this.key_eq_(l.value,e))return l}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return this.source_.end()},o}(ga().HashBuckets);function i(e){return e.value}return pa.SetHashBuckets=r,pa}(),c=va(),h=function(e){function i(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var s=e.call(this,(function(e){return new l.SetElementList(e)}))||this;return a.IHashContainer.construct.apply(a.IHashContainer,r([s,i,function(e,t){s.buckets_=new u.SetHashBuckets(s,e,t)}],n(t),!1)),s}return t(i,e),i.prototype.clear=function(){this.buckets_.clear(),e.prototype.clear.call(this)},i.prototype.swap=function(e){var t,r;t=n([e.data_,this.data_],2),this.data_=t[0],e.data_=t[1],l.SetElementList._Swap_associative(this.data_,e.data_),u.SetHashBuckets._Swap_source(this.buckets_,e.buckets_),r=n([e.buckets_,this.buckets_],2),this.buckets_=r[0],e.buckets_=r[1]},i.prototype.find=function(e){return this.buckets_.find(e)},i.prototype.begin=function(t){return void 0===t&&(t=null),null===t?e.prototype.begin.call(this):this.buckets_.at(t)[0]},i.prototype.end=function(t){if(void 0===t&&(t=null),null===t)return e.prototype.end.call(this);var n=this.buckets_.at(t);return n[n.length-1].next()},i.prototype.rbegin=function(e){return void 0===e&&(e=null),this.end(e).reverse()},i.prototype.rend=function(e){return void 0===e&&(e=null),this.begin(e).reverse()},i.prototype.bucket_count=function(){return this.buckets_.length()},i.prototype.bucket_size=function(e){return this.buckets_.at(e).length},i.prototype.load_factor=function(){return this.buckets_.load_factor()},i.prototype.hash_function=function(){return this.buckets_.hash_function()},i.prototype.key_eq=function(){return this.buckets_.key_eq()},i.prototype.bucket=function(e){return this.hash_function()(e)%this.buckets_.length()},i.prototype.max_load_factor=function(e){return void 0===e&&(e=null),this.buckets_.max_load_factor(e)},i.prototype.reserve=function(e){this.buckets_.reserve(e)},i.prototype.rehash=function(e){this.buckets_.rehash(e)},i.prototype._Insert_by_key=function(e){var t=this.find(e);return!1===t.equals(this.end())?new c.Pair(t,!1):(this.data_.push(e),t=t.prev(),this._Handle_insert(t,t.next()),new c.Pair(t,!0))},i.prototype._Insert_by_hint=function(e,t){var n=this.find(t);return!0===n.equals(this.end())&&(n=this.data_.insert(e,t),this._Handle_insert(n,n.next())),n},i.prototype._Handle_insert=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.insert(e)},i.prototype._Handle_erase=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.erase(e)},i}(o.UniqueSet);e.HashSet=h,(i=h=e.HashSet||(e.HashSet={})).Iterator=l.SetElementList.Iterator,i.ReverseIterator=l.SetElementList.ReverseIterator,e.HashSet=h}(us)),us}var ka,Ea,xa={},Sa={},Aa={};function Ca(){if(Ea)return Sa;Ea=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(Ww){i={error:Ww}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.UniqueMap=void 0;var r=function(){if(ka)return Aa;ka=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.MapContainer=void 0;var t=ps(),n=ws(),r=function(t){function r(e){var n=t.call(this)||this;return n.data_=e(n),n}return e(r,t),r.prototype.assign=function(e,t){this.clear(),this.insert(e,t)},r.prototype.clear=function(){this.data_.clear()},r.prototype.begin=function(){return this.data_.begin()},r.prototype.end=function(){return this.data_.end()},r.prototype.has=function(e){return!this.find(e).equals(this.end())},r.prototype.size=function(){return this.data_.size()},r.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new n.NativeArrayIterator(e,0),i=new n.NativeArrayIterator(e,e.length);return this.insert(r,i),this.size()},r.prototype.insert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?this.emplace(e[0].first,e[0].second):e[0].next instanceof Function&&e[1].next instanceof Function?this._Insert_by_range(e[0],e[1]):this.emplace_hint(e[0],e[1].first,e[1].second)},r.prototype.erase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1!==e.length||e[0]instanceof this.end().constructor&&e[0].source()===this?1===e.length?this._Erase_by_range(e[0]):this._Erase_by_range(e[0],e[1]):this._Erase_by_key(e[0])},r.prototype._Erase_by_range=function(e,t){void 0===t&&(t=e.next());var n=this.data_.erase(e,t);return this._Handle_erase(e,t),n},r}(t.Container);return Aa.MapContainer=r,Aa}(),i=Ts(),o=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return e(o,r),o.prototype.count=function(e){return this.find(e).equals(this.end())?0:1},o.prototype.get=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw i.ErrorGenerator.key_nout_found(this,"get",e);return t.second},o.prototype.take=function(e,t){var n=this.find(e);return n.equals(this.end())?this.emplace(e,t()).first.second:n.second},o.prototype.set=function(e,t){this.insert_or_assign(e,t)},o.prototype.insert=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return r.prototype.insert.apply(this,n([],t(e),!1))},o.prototype._Insert_by_range=function(e,t){for(var n=e;!n.equals(t);n=n.next())this.emplace(n.value.first,n.value.second)},o.prototype.insert_or_assign=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 2===e.length?this._Insert_or_assign_with_key_value(e[0],e[1]):3===e.length?this._Insert_or_assign_with_hint(e[0],e[1],e[2]):void 0},o.prototype._Insert_or_assign_with_key_value=function(e,t){var n=this.emplace(e,t);return!1===n.second&&(n.first.second=t),n},o.prototype._Insert_or_assign_with_hint=function(e,t,n){var r=this.emplace_hint(e,t,n);return r.second!==n&&(r.second=n),r},o.prototype.extract=function(e){return e instanceof this.end().constructor?this._Extract_by_iterator(e):this._Extract_by_key(e)},o.prototype._Extract_by_key=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw i.ErrorGenerator.key_nout_found(this,"extract",e);var n=t.value;return this._Erase_by_range(t),n},o.prototype._Extract_by_iterator=function(e){return!0===e.equals(this.end())?this.end():(this._Erase_by_range(e),e)},o.prototype._Erase_by_key=function(e){var t=this.find(e);return!0===t.equals(this.end())?0:(this._Erase_by_range(t),1)},o.prototype.merge=function(e){for(var t=e.begin();!t.equals(e.end());)!1===this.has(t.first)?(this.insert(t.value),t=e.erase(t)):t=t.next()},o}(r.MapContainer);return Sa.UniqueMap=o,Sa}var Oa,Ra={};var Ia,Na={};var Ta,La,Pa,Ua={};function Ba(){return La||(La=1,function(e){var t=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},r=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.HashMap=void 0;var i,o=Ca(),a=Gs(),l=(Oa||(Oa=1,function(e){var t=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.MapElementList=void 0;var r=aa(),i=ea(),o=ha(),a=function(e){function r(t){var n=e.call(this)||this;return n.associative_=t,n}return t(r,e),r.prototype._Create_iterator=function(e,t,n){return r.Iterator.create(this,e,t,n)},r._Swap_associative=function(e,t){var r;r=n([t.associative_,e.associative_],2),e.associative_=r[0],t.associative_=r[1]},r.prototype.associative=function(){return this.associative_},r}(r.ListContainer);e.MapElementList=a,function(e){var n=function(e){function n(t,n,r,i){var o=e.call(this,n,r,i)||this;return o.list_=t,o}return t(n,e),n.create=function(e,t,r,i){return new n(e,t,r,i)},n.prototype.reverse=function(){return new r(this)},n.prototype.source=function(){return this.list_.associative()},Object.defineProperty(n.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"second",{get:function(){return this.value.second},set:function(e){this.value.second=e},enumerable:!1,configurable:!0}),n}(i.ListIterator);e.Iterator=n;var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype._Create_neighbor=function(e){return new n(e)},Object.defineProperty(n.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"second",{get:function(){return this.base_.second},set:function(e){this.base_.second=e},enumerable:!1,configurable:!0}),n}(o.ReverseIterator);e.ReverseIterator=r}(a=e.MapElementList||(e.MapElementList={})),e.MapElementList=a}(Ra)),Ra),u=function(){if(Ia)return Na;Ia=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=s&&s.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(Ww){i={error:Ww}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},n=s&&s.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Na,"__esModule",{value:!0}),Na.MapHashBuckets=void 0;var r=function(r){function o(e,t,n){var o=r.call(this,i,t)||this;return o.source_=e,o.key_eq_=n,o}return e(o,r),o._Swap_source=function(e,n){var r;r=t([n.source_,e.source_],2),e.source_=r[0],n.source_=r[1]},o.prototype.key_eq=function(){return this.key_eq_},o.prototype.find=function(e){var t,r,i=this.hash_function()(e)%this.length(),o=this.at(i);try{for(var s=n(o),a=s.next();!a.done;a=s.next()){var l=a.value;if(this.key_eq_(l.first,e))return l}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return this.source_.end()},o}(ga().HashBuckets);function i(e){return e.first}return Na.MapHashBuckets=r,Na}(),c=function(){if(Ta)return Ua;Ta=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.Entry=void 0;var e=qs(),t=Zs(),n=function(){function n(e,t){this.first=e,this.second=t}return n.prototype.equals=function(e){return(0,t.equal_to)(this.first,e.first)},n.prototype.less=function(e){return(0,t.less)(this.first,e.first)},n.prototype.hashCode=function(){return(0,e.hash)(this.first)},n}();return Ua.Entry=n,Ua}(),h=va(),f=function(e){function i(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var s=e.call(this,(function(e){return new l.MapElementList(e)}))||this;return a.IHashContainer.construct.apply(a.IHashContainer,r([s,i,function(e,t){s.buckets_=new u.MapHashBuckets(s,e,t)}],n(t),!1)),s}return t(i,e),i.prototype.clear=function(){this.buckets_.clear(),e.prototype.clear.call(this)},i.prototype.swap=function(e){var t,r;t=n([e.data_,this.data_],2),this.data_=t[0],e.data_=t[1],l.MapElementList._Swap_associative(this.data_,e.data_),u.MapHashBuckets._Swap_source(this.buckets_,e.buckets_),r=n([e.buckets_,this.buckets_],2),this.buckets_=r[0],e.buckets_=r[1]},i.prototype.find=function(e){return this.buckets_.find(e)},i.prototype.begin=function(t){return void 0===t&&(t=null),null===t?e.prototype.begin.call(this):this.buckets_.at(t)[0]},i.prototype.end=function(t){if(void 0===t&&(t=null),null===t)return e.prototype.end.call(this);var n=this.buckets_.at(t);return n[n.length-1].next()},i.prototype.rbegin=function(e){return void 0===e&&(e=null),this.end(e).reverse()},i.prototype.rend=function(e){return void 0===e&&(e=null),this.begin(e).reverse()},i.prototype.bucket_count=function(){return this.buckets_.length()},i.prototype.bucket_size=function(e){return this.buckets_.at(e).length},i.prototype.load_factor=function(){return this.buckets_.load_factor()},i.prototype.hash_function=function(){return this.buckets_.hash_function()},i.prototype.key_eq=function(){return this.buckets_.key_eq()},i.prototype.bucket=function(e){return this.hash_function()(e)%this.buckets_.length()},i.prototype.max_load_factor=function(e){return void 0===e&&(e=null),this.buckets_.max_load_factor(e)},i.prototype.reserve=function(e){this.buckets_.reserve(e)},i.prototype.rehash=function(e){this.buckets_.rehash(e)},i.prototype.emplace=function(e,t){var n=this.find(e);return!1===n.equals(this.end())?new h.Pair(n,!1):(this.data_.push(new c.Entry(e,t)),n=n.prev(),this._Handle_insert(n,n.next()),new h.Pair(n,!0))},i.prototype.emplace_hint=function(e,t,n){var r=this.find(t);return!0===r.equals(this.end())&&(r=this.data_.insert(e,new c.Entry(t,n)),this._Handle_insert(r,r.next())),r},i.prototype._Handle_insert=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.insert(e)},i.prototype._Handle_erase=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.erase(e)},i}(o.UniqueMap);e.HashMap=f,(i=f=e.HashMap||(e.HashMap={})).Iterator=l.MapElementList.Iterator,i.ReverseIterator=l.MapElementList.ReverseIterator,e.HashMap=f}(xa)),xa}var Fa,za={};function Ma(){if(Fa)return za;Fa=1,Object.defineProperty(za,"__esModule",{value:!0});var e=function(e,t){this.type=e,t&&Object.assign(this,t)};return za.Event=e,za}var ja,$a={};var Da,Ha={};var qa,Ka,Va={};Go.is_node()&&(s.WebSocket=(Ka||(Ka=1,function(e){var t=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=s&&s.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r,i=os(),o=function(){if(Pa)return ls;Pa=1;var e=s&&s.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(ls,"__esModule",{value:!0});var t=_a(),n=Ba(),r=function(){function r(){this.listeners_=new n.HashMap,this.created_at_=new Date}return r.prototype.dispatchEvent=function(t){var n,r,i=this.listeners_.find(t.type);if(!i.equals(this.listeners_.end())){t.target=this,t.timeStamp=(new Date).getTime()-this.created_at_.getTime();try{for(var o=e(i.second),s=o.next();!s.done;s=o.next())(0,s.value)(t)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}},r.prototype.addEventListener=function(e,n){var r=this.listeners_.find(e);r.equals(this.listeners_.end())&&(r=this.listeners_.emplace(e,new t.HashSet).first),r.second.insert(n)},r.prototype.removeEventListener=function(e,t){var n=this.listeners_.find(e);n.equals(this.listeners_.end())||(n.second.erase(t),n.second.empty()&&this.listeners_.erase(n))},r}();return ls.EventTarget=r,ls}(),a=Ma(),l=function(){if(ja)return $a;ja=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty($a,"__esModule",{value:!0});var t=function(t){function n(e,n){return t.call(this,e,n)||this}return e(n,t),n}(Ma().Event);return $a.CloseEvent=t,$a}(),u=function(){if(Da)return Ha;Da=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ha,"__esModule",{value:!0});var t=function(t){function n(e,n){return t.call(this,e,n)||this}return e(n,t),n}(Ma().Event);return Ha.MessageEvent=t,Ha}(),c=function(){if(qa)return Va;qa=1;var e=s&&s.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Va,"__esModule",{value:!0});var t=function(t){function n(e,n){return t.call(this,e,n)||this}return e(n,t),n}(Ma().Event);return Va.ErrorEvent=t,Va}(),h=function(e){function r(t,n){var o=e.call(this)||this;return o.on_={},o.state_=r.CONNECTING,o.client_=new i.client,o.client_.on("connect",o._Handle_connect.bind(o)),o.client_.on("connectFailed",o._Handle_error.bind(o)),"string"==typeof n&&(n=[n]),o.client_.connect(t,n),o}return t(r,e),r.prototype.close=function(e,t){this.state_=r.CLOSING,void 0===e?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(e,t,!0)},r.prototype.send=function(e){if("string"==typeof e.valueOf())this.connection_.sendUTF(e);else{var t=void 0;t=e instanceof Buffer?e:e instanceof Blob?new Buffer(e,"blob"):e.buffer?new Buffer(e.buffer):new Buffer(e),this.connection_.sendBytes(t)}},Object.defineProperty(r.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onopen",{get:function(){return this.on_.open},set:function(e){this._Set_on("open",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onclose",{get:function(){return this.on_.close},set:function(e){this._Set_on("close",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onmessage",{get:function(){return this.on_.message},set:function(e){this._Set_on("message",e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onerror",{get:function(){return this.on_.error},set:function(e){this._Set_on("error",e)},enumerable:!0,configurable:!0}),r.prototype._Set_on=function(e,t){this.on_[e]&&this.removeEventListener(e,this.on_[e]),this.addEventListener(e,t),this.on_[e]=t},r.prototype._Handle_connect=function(e){this.connection_=e,this.state_=r.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var t=new a.Event("open",f);this.dispatchEvent(t)},r.prototype._Handle_close=function(e,t){var i=new l.CloseEvent("close",n({},f,{code:e,reason:t}));this.state_=r.CLOSED,this.dispatchEvent(i)},r.prototype._Handle_message=function(e){var t=new u.MessageEvent("message",n({},f,{data:e.binaryData?e.binaryData:e.utf8Data}));this.dispatchEvent(t)},r.prototype._Handle_error=function(e){var t=new c.ErrorEvent("error",n({},f,{error:e,message:e.message}));this.state_===r.CONNECTING&&(this.state_=r.CLOSED),this.dispatchEvent(t)},r}(o.EventTarget);e.WebSocket=h,(r=h=e.WebSocket||(e.WebSocket={})).CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,e.WebSocket=h;var f={bubbles:!1,cancelable:!1}}(Xo)),Xo).WebSocket),BigInt(1e3),BigInt(1e6),BigInt(1e9),BigInt(1e12),BigInt("2100000000000000000"),BigInt(1e11);const Wa={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27};for(let Cv=0,Ov=Object.keys(Wa);Cv<Ov.length;Cv++)Ov[Cv],Wa[Ov[Cv]].toString();var Za=["wss://nos.lol","wss://relay.nostr.band","wss://relay.f7z.io","wss://relay.damus.io","wss://nostr.mom","wss://no.str.cr"],Ga=class extends y{constructor(e){super(),o(this,"ndk"),o(this,"zappedEvent"),o(this,"zappedUser"),this.ndk=e.ndk,this.zappedEvent=e.zappedEvent,this.zappedUser=e.zappedUser||this.ndk.getUser({hexpubkey:this.zappedEvent.pubkey})}async getZapEndpoint(){let e,t,n,r;if(this.zappedEvent){const n=(await this.zappedEvent.getMatchingTags("zap"))[0];if(n)switch(n[2]){case"lud06":e=n[1];break;case"lud16":t=n[1];break;default:throw new Error(`Unknown zap tag ${n}`)}}if(this.zappedUser&&!e&&!t&&(this.zappedUser.profile||await this.zappedUser.fetchProfile(),e=(this.zappedUser.profile||{}).lud06,t=(this.zappedUser.profile||{}).lud16),t){const[e,r]=t.split("@");n=`https://${r}/.well-known/lnurlp/${e}`}else if(e){const{words:t}=sn.decode(e,1e3),r=sn.fromWords(t);n=new TextDecoder("utf-8").decode(r)}if(!n)throw new Error("No zap endpoint found");const i=await(await fetch(n)).json();return(null==i?void 0:i.allowsNostr)&&((null==i?void 0:i.nostrPubkey)||(null==i?void 0:i.nostrPubKey))&&(r=i.callback),r}async createZapRequest(e,t,n,r){const i=await this.getZapEndpoint();if(!i)throw new Error("No zap endpoint found");if(!this.zappedEvent)throw new Error("No zapped event found");const o=Ho.makeZapRequest({profile:this.zappedUser.hexpubkey(),event:null,amount:e,comment:t||"",relays:null!=r?r:this.relays()});if(this.zappedEvent){const e=this.zappedEvent.tagReference();e&&o.tags.push(e)}o.tags.push(["lnurl",i]);const s=new ol(this.ndk,o);n&&(s.tags=s.tags.concat(n)),await s.sign();const a=await s.toNostrEvent();return(await(await fetch(`${i}?`+new URLSearchParams({amount:e.toString(),nostr:JSON.stringify(a)}))).json()).pr}relays(){var e,t;let n=[];return null!=(t=null==(e=this.ndk)?void 0:e.pool)&&t.relays&&(n=this.ndk.pool.urls()),n.length||(n=Za),n}};function Ya(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=1e4&&this.kind<2e4}function Qa(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}async function Ja(){if(!this.ndk)throw new Error("NDK not set");const e=await this.ndk.fetchEvents({kinds:[3],authors:[this.hexpubkey()]});if(e){const t=new Set;return e.forEach((e=>{e.tags.forEach((e=>{if("p"===e[0])try{const n=Zi.npubEncode(e[1]);t.add(n)}catch{}}))})),[...t].reduce(((e,t)=>{const n=new Xa({npub:t});return n.ndk=this.ndk,e.add(n),e}),new Set)}return new Set}var Xa=class{constructor(e){o(this,"ndk"),o(this,"profile"),o(this,"npub",""),o(this,"relayUrls",[]),o(this,"follows",Ja.bind(this)),e.npub&&(this.npub=e.npub),e.hexpubkey&&(this.npub=Zi.npubEncode(e.hexpubkey)),e.relayUrls&&(this.relayUrls=e.relayUrls)}static async fromNip05(e){const t=await fo.queryProfile(e);if(t)return new Xa({hexpubkey:t.pubkey,relayUrls:t.relays})}hexpubkey(){return Zi.decode(this.npub).data}async fetchProfile(e){if(!this.ndk)throw new Error("NDK not set");this.profile||(this.profile={});const t=await this.ndk.fetchEvents({kinds:[0],authors:[this.hexpubkey()]},e);return t&&Array.from(t).sort(((e,t)=>e.created_at-t.created_at)).forEach((e=>{try{this.profile=function(e,t){const n=JSON.parse(e.content);return Object.keys(n).forEach((e=>{switch(e){case"name":t.name=n.name;break;case"display_name":case"displayName":t.displayName=n.displayName||n.display_name;break;case"image":case"picture":t.image=n.image||n.picture;break;case"banner":t.banner=n.banner;break;case"bio":t.bio=n.bio;break;case"nip05":t.nip05=n.nip05;break;case"lud06":t.lud06=n.lud06;break;case"lud16":t.lud16=n.lud16;break;case"about":t.about=n.about;break;case"zapService":t.zapService=n.zapService;break;case"website":t.website=n.website;break;default:t[e]=n[e]}})),t}(e,this.profile)}catch{}})),t}async relayList(){if(!this.ndk)throw new Error("NDK not set");return await this.ndk.fetchEvents({kinds:[10002],authors:[this.hexpubkey()]})||new Set}tagReference(){return["p",this.hexpubkey()]}async publish(){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),await new ol(this.ndk,{kind:0,content:JSON.stringify(this.profile)}).publish()}async follow(e,t){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),t||(t=await this.follows()),t.has(e))return!1;t.add(e);const n=new ol(this.ndk,{kind:3});for(const r of t)n.tag(r);return await n.publish(),!0}};async function el(e,t){if(!t){if(!this.ndk)throw new Error("No signer available");await this.ndk.assertSigner(),t=this.ndk.signer}if(!e){const t=this.getMatchingTags("p");if(1!==t.length)throw new Error("No recipient could be determined and no explicit recipient was provided");(e=new Xa({hexpubkey:t[0][1]})).ndk=this.ndk}this.content=await t.encrypt(e,this.content)}async function tl(e,t){if(!t){if(!this.ndk)throw new Error("No signer available");await this.ndk.assertSigner(),t=this.ndk.signer}e||(e=this.author),this.content=await t.decrypt(e,this.content)}function nl(){return this.isParamReplaceable()?Zi.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag()}):Zi.noteEncode(this.tagId())}async function rl(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!t){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t=this.ndk.signer}if(!t)throw new Error("No signer available");const n=await t.user(),r=new ol(this.ndk,{kind:il(this),content:"",pubkey:n.hexpubkey()});return r.tag(this),16===r.kind&&r.tags.push(["k",`${this.kind}`]),await r.sign(t),e&&await r.publish(),r}function il(e){return 1===e.kind?6:16}var ol=class extends y{constructor(e,t){super(),o(this,"ndk"),o(this,"created_at"),o(this,"content",""),o(this,"tags",[]),o(this,"kind"),o(this,"id",""),o(this,"sig"),o(this,"pubkey",""),o(this,"relay"),o(this,"isReplaceable",Ya.bind(this)),o(this,"isParamReplaceable",Qa.bind(this)),o(this,"encode",nl.bind(this)),o(this,"encrypt",el.bind(this)),o(this,"decrypt",tl.bind(this)),o(this,"repost",rl.bind(this)),this.ndk=e,this.created_at=null==t?void 0:t.created_at,this.content=(null==t?void 0:t.content)||"",this.tags=(null==t?void 0:t.tags)||[],this.id=(null==t?void 0:t.id)||"",this.sig=null==t?void 0:t.sig,this.pubkey=(null==t?void 0:t.pubkey)||"",this.kind=null==t?void 0:t.kind}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.hexpubkey()}get author(){const e=new Xa({hexpubkey:this.pubkey});return e.ndk=this.ndk,e}tag(e,t){const n=e.tagReference();if(t&&n.push(t),this.tags.push(n),e instanceof ol){const t=e.author;t&&this.pubkey!==t.hexpubkey()&&this.tag(t);for(const n of e.getMatchingTags("p"))n[1]!==this.pubkey&&(this.tags.find((e=>"p"===e[0]&&e[1]===n[1]))||this.tags.push(["p",n[1]]))}}async toNostrEvent(e){var t,n;if(!e&&""===this.pubkey){const e=await(null==(n=null==(t=this.ndk)?void 0:t.signer)?void 0:n.user());this.pubkey=(null==e?void 0:e.hexpubkey())||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const r=this.rawEvent(),{content:i,tags:o}=this.generateTags();r.content=i||"",r.tags=o;try{this.id=Ui(r)}catch{}return this.id&&(r.id=this.id),this.sig&&(r.sig=this.sig),r}getMatchingTags(e){return this.tags.filter((t=>t[0]===e))}tagValue(e){const t=this.getMatchingTags(e);if(0!==t.length)return t[0][1]}removeTag(e){this.tags=this.tags.filter((t=>t[0]!==e))}async sign(e){var t;e||(null==(t=this.ndk)||t.assertSigner(),e=this.ndk.signer),await this.generateTags(),this.isReplaceable()&&(this.created_at=Math.floor(Date.now()/1e3));const n=await this.toNostrEvent();return this.sig=await e.sign(n),this.sig}async publish(e,t){if(this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");return this.ndk.publish(this,e,t)}generateTags(){let e=[];const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=e.replace(/(@|nostr:)(npub|nprofile|note|nevent)[a-zA-Z0-9]+/g,(e=>{try{const n=e.split(/(@|nostr:)/)[2],{type:r,data:i}=Zi.decode(n);let o;switch(r){case"npub":o=["p",i];break;case"nprofile":o=["p",i.pubkey];break;case"nevent":o=["e",i.id];break;case"note":o=["e",i];break;default:return e}return t.find((e=>e[0]===o[0]&&e[1]===o[1]))||t.push(o),`nostr:${n}`}catch{return e}})),{content:e,tags:t}}(this.content,this.tags),n=t.content;if(e=t.tags,this.kind&&this.kind>=3e4&&this.kind<=4e4&&!this.getMatchingTags("d")[0]){const t=[...Array(16)].map((()=>Math.random().toString(36)[2])).join("");e.push(["d",t])}return{content:n||"",tags:e}}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}tagId(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${e}`}return this.id}tagReference(){return this.isParamReplaceable()?["a",this.tagId()]:["e",this.tagId()]}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}async zap(e,t,n){if(!this.ndk)throw new Error("No NDK instance found");return this.ndk.assertSigner(),await new Ga({ndk:this.ndk,zappedEvent:this}).createZapRequest(e,t,n)}async delete(e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const t=new ol(this.ndk,{kind:5,content:e||""});return t.tag(this),await t.publish(),t}},sl=class extends y{constructor(e){super(),o(this,"url"),o(this,"scores"),o(this,"relay"),o(this,"_status"),o(this,"connectedAt"),o(this,"_connectionStats",{attempts:0,success:0,durations:[]}),o(this,"complaining",!1),o(this,"debug"),o(this,"activeSubscriptions",new Set),o(this,"updateConnectionStats",{connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++}}),this.url=e,this.relay=Wi(e),this.scores=new Map,this._status=3,this.debug=d(`ndk:relay:${e}`),this.relay.on("connect",(()=>{this.updateConnectionStats.connected(),this._status=1,this.emit("connect")})),this.relay.on("disconnect",(()=>{this.updateConnectionStats.disconnected(),1===this._status&&(this._status=3,this.handleReconnection()),this.emit("disconnect")})),this.relay.on("notice",(e=>this.handleNotice(e)))}isFlapping(){const e=this._connectionStats.durations;if(e.length<10)return!1;const t=e.reduce(((e,t)=>e+t),0)/e.length,n=e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t),0)/e.length;return Math.sqrt(n)<1e3}handleReconnection(){this.isFlapping()&&(this.emit("flapping",this,this._connectionStats),this._status=5),this.connectedAt&&Date.now()-this.connectedAt<5e3?setTimeout((()=>this.connect()),6e4):this.connect()}get status(){return this._status}async connect(){try{this.updateConnectionStats.attempt(),this._status=0,await this.relay.connect()}catch(e){throw this.debug("Failed to connect",e),this._status=3,e}}disconnect(){this._status=2,this.relay.close()}async handleNotice(e){(e.includes("oo many")||e.includes("aximum"))&&(this.disconnect(),setTimeout((()=>this.connect()),2e3),this.debug(this.relay.url,"Relay complaining?",e)),this.emit("notice",this,e)}subscribe(e){const{filter:t}=e,n=this.relay.sub([t],{id:e.subId});this.debug(`Subscribed to ${JSON.stringify(t)}`),n.on("event",(t=>{const n=new ol(void 0,t);n.relay=this,e.eventReceived(n,this)})),n.on("eose",(()=>{e.eoseReceived(this)}));const r=n.unsub;return n.unsub=()=>{this.debug(`Unsubscribing from ${JSON.stringify(t)}`),this.activeSubscriptions.delete(e),r()},this.activeSubscriptions.add(e),e.on("close",(()=>{this.activeSubscriptions.delete(e)})),n}async publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;return 1===this.status?this.publishEvent(e,t):(this.once("connect",(()=>{this.publishEvent(e,t)})),!0)}async publishEvent(e,t){const n=await e.toNostrEvent(),r=this.relay.publish(n);let i;const o=new Promise(((t,n)=>{r.on("failed",(t=>{clearTimeout(i),this.debug("Publish failed",t,e.id),this.emit("publish:failed",e,t),n(t)})),r.on("ok",(()=>{clearTimeout(i),this.emit("published",e),t(!0)}))}));if(!t)return o;const s=new Promise(((n,r)=>{i=setTimeout((()=>{this.debug("Publish timed out",e.rawEvent()),this.emit("publish:failed",e,"Timeout"),r(new Error("Publish operation timed out"))}),t)}));return Promise.race([o,s])}scoreSlowerEvent(e){}get connectionStats(){return this._connectionStats}tagReference(e){const t=["r",this.relay.url];return e&&t.push(e),t}},al=class extends y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;super(),o(this,"relays",new Map),o(this,"debug"),this.debug=t.debug.extend("pool");for(const n of e){const e=new sl(n);e.on("notice",((e,t)=>this.emit("notice",e,t))),e.on("connect",(()=>this.handleRelayConnect(n))),e.on("disconnect",(()=>this.emit("relay:disconnect",e))),e.on("flapping",(()=>this.handleFlapping(e))),this.relays.set(n,e)}}handleRelayConnect(e){this.debug(`Relay ${e} connected`),this.emit("relay:connect",this.relays.get(e)),this.stats().connected===this.relays.size&&this.emit("connect")}async connect(e){const t=[];this.debug(`Connecting to ${this.relays.size} relays${e?`, timeout ${e}...`:""}`);for(const n of this.relays.values())if(e){const r=new Promise(((t,n)=>{setTimeout((()=>n(`Timed out after ${e}ms`)),e)}));t.push(Promise.race([n.connect(),r]).catch((e=>{this.debug(`Failed to connect to relay ${n.url}: ${e}`)})))}else t.push(n.connect());e&&setTimeout((()=>{const e=this.stats().connected===this.relays.size,t=this.stats().connected>0;!e&&t&&this.emit("connect")}),e),await Promise.all(t)}handleFlapping(e){this.debug(`Relay ${e.url} is flapping`),this.relays.delete(e.url),this.emit("flapping",e)}size(){return this.relays.size}stats(){const e={total:0,connected:0,disconnected:0,connecting:0};for(const t of this.relays.values())e.total++,1===t.status?e.connected++:3===t.status?e.disconnected++:0===t.status&&e.connecting++;return e}urls(){return Array.from(this.relays.keys())}};var ll={closeOnEose:!0,cacheUsage:"CACHE_FIRST",groupable:!0,groupableDelay:100},ul=class extends y{constructor(e,t,n,r,i){if(super(),o(this,"subId"),o(this,"filter"),o(this,"opts"),o(this,"relaySet"),o(this,"ndk"),o(this,"relaySubscriptions"),o(this,"debug"),o(this,"eventFirstSeen",new Map),o(this,"eosesSeen",new Set),o(this,"eventsPerRelay",new Map),o(this,"eoseTimeout"),this.ndk=e,this.opts={...ll,...n||{}},this.subId=i||(null==n?void 0:n.subId)||function(e){const t=Object.keys(e)||[],n=[];for(const r of t)if("kinds"===r){const t=[r,e.kinds.join(",")];n.push(t.join(":"))}else n.push(r);return n.push(Math.floor(999999999*Math.random()).toString()),n.join("-")}(t),this.filter=t,this.relaySet=r,this.relaySubscriptions=new Map,this.debug=e.debug.extend(`subscription:${this.subId}`),"ONLY_CACHE"===this.opts.cacheUsage&&!this.opts.closeOnEose)throw new Error("Cannot use cache-only options with a persistent subscription")}groupableId(){var e,t;if(null==(e=this.opts)||!e.groupable)return null;const n=((null==(t=this.filter.kinds)?void 0:t.length)||0)>0,r=!this.filter.since&&!this.filter.until,i=!this.filter.limit;if(n&&r&&i){let e=this.filter.kinds.join(",");return e+=`-${Object.keys(this.filter||{}).sort().join("-")}`,e}return null}shouldQueryCache(){var e;return"ONLY_RELAY"!==(null==(e=this.opts)?void 0:e.cacheUsage)}shouldQueryRelays(){var e;return"ONLY_CACHE"!==(null==(e=this.opts)?void 0:e.cacheUsage)}shouldWaitForCache(){var e;return this.opts.closeOnEose&&!(null==(e=this.ndk.cacheAdapter)||!e.locking)&&this.shouldQueryRelays()&&"PARALLEL"!==this.opts.cacheUsage}async start(){let e;if(this.shouldQueryCache()&&(e=this.startWithCache(),this.shouldWaitForCache()&&(await e,function(e){return!!e.ids}((t=this).filter)&&function(e){const t=e.filter.ids;return!!t&&t.length===e.eventFirstSeen.size}(t))))return this.debug("cache hit, fully filled: skipping relay query"),void this.emit("eose",this);var t;this.shouldQueryRelays()&&this.startWithRelaySet()}stop(){this.relaySubscriptions.forEach((e=>e.unsub())),this.relaySubscriptions.clear(),this.emit("close",this)}async startWithCache(){var e;if(null!=(e=this.ndk.cacheAdapter)&&e.query){const e=this.ndk.cacheAdapter.query(this);this.ndk.cacheAdapter.locking&&await e}}startWithRelaySet(){this.relaySet||(this.relaySet=function(e){var t;const n=new Set;return null==(t=e.pool)||t.relays.forEach((t=>{t.complaining?e.debug(`Relay ${t.url} is complaining, not adding to set`):n.add(t)})),new hl(n,e)}(this.ndk,this.filter)),this.relaySet&&this.relaySet.subscribe(this)}eventReceived(e,t){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&t){let n=this.eventsPerRelay.get(t);if(n||(n=new Set,this.eventsPerRelay.set(t,n)),n.add(e.id),this.eventFirstSeen.has(e.id)){const n=Date.now()-(this.eventFirstSeen.get(e.id)||0);return t.scoreSlowerEvent(n),void this.emit("event:dup",e,t,n,this)}this.ndk.cacheAdapter&&this.ndk.cacheAdapter.setEvent(e,this.filter),this.eventFirstSeen.set(`${e.id}`,Date.now())}else this.eventFirstSeen.set(`${e.id}`,0);this.emit("event",e,t,this)}eoseReceived(e){var t,n,r;null!=(t=this.opts)&&t.closeOnEose&&(null==(n=this.relaySubscriptions.get(e))||n.unsub(),this.relaySubscriptions.delete(e),0===this.relaySubscriptions.size&&this.emit("close",this)),this.eosesSeen.add(e),this.eosesSeen.size===(null==(r=this.relaySet)?void 0:r.size())?this.emit("eose"):(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.eoseTimeout=setTimeout((()=>{this.emit("eose")}),500))}},cl=class extends ul{constructor(e,t){const n=e.debug.extend("subscription-group"),r=function(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((e=>{let[n,r]=e;Array.isArray(r)?void 0===t[n]?t[n]=[...r]:t[n]=Array.from(new Set([...t[n],...r])):t[n]=r}))})),t}(t.map((e=>e.filter)));super(e,r,t[0].opts,t[0].relaySet),o(this,"subscriptions"),this.subscriptions=t,n("merged filters",{count:t.length,mergedFilters:this.filter}),this.on("event",this.forwardEvent),this.on("event:dup",this.forwardEventDup),this.on("eose",this.forwardEose),this.on("close",this.forwardClose)}isEventForSubscription(e,t){const{filter:n}=t;return!!n&&ji(n,e.rawEvent())}forwardEvent(e,t){for(const n of this.subscriptions)!this.isEventForSubscription(e,n)||n.emit("event",e,t,n)}forwardEventDup(e,t,n){for(const r of this.subscriptions)!this.isEventForSubscription(e,r)||r.emit("event:dup",e,t,n,r)}forwardEose(){for(const e of this.subscriptions)e.emit("eose",e)}forwardClose(){for(const e of this.subscriptions)e.emit("close",e)}};var hl=class{constructor(e,t){o(this,"relays"),o(this,"debug"),o(this,"ndk"),this.relays=e,this.ndk=t,this.debug=t.debug.extend("relayset")}static fromRelayUrls(e,t){const n=new Set;for(const r of e){const e=t.pool.relays.get(r);e&&n.add(e)}return new hl(new Set(n),t)}subscribeOnRelay(e,t){const n=e.subscribe(t);t.relaySubscriptions.set(e,n)}getId(){const e=Array.from(this.relays).map((e=>e.url)).sort().join(",");return Qn(pr(e))}subscribe(e){const t=e.groupableId(),n=`${this.getId()}:${t}`;if(!t)return this.executeSubscription(e),e;const r=this.ndk.delayedSubscriptions.get(n);return r?r.push(e):(setTimeout((()=>{this.executeDelayedSubscription(n)}),e.opts.groupableDelay),this.ndk.delayedSubscriptions.set(n,[e])),e}executeDelayedSubscription(e){const t=this.ndk.delayedSubscriptions.get(e);this.ndk.delayedSubscriptions.delete(e),t&&(t.length>1?this.executeSubscriptions(t):this.executeSubscription(t[0]))}executeSubscriptions(e){const t=e[0].ndk,n=new cl(t,e);this.executeSubscription(n)}executeSubscription(e){this.debug("subscribing",{filter:e.filter});for(const t of this.relays)if(1===t.status)this.subscribeOnRelay(t,e);else{const n=()=>{this.debug("new relay coming online for active subscription",{relay:t.url,filter:e.filter}),this.subscribeOnRelay(t,e)};t.once("connect",n),e.once("close",(()=>{t.removeListener("connect",n)}))}return e}async publish(e,t){const n=new Set,r=Array.from(this.relays).map((r=>new Promise((i=>{r.publish(e,t).then((()=>{n.add(r),i()})).catch((e=>{this.debug("error publishing to relay",{relay:r.url,err:e}),i()}))}))));if(await Promise.all(r),0===n.size)throw new Error("No relay was able to receive the event");return n}size(){return this.relays.size}};var fl=class{constructor(){if(o(this,"_userPromise"),o(this,"nip04Queue",[]),o(this,"nip04Processing",!1),o(this,"debug"),!window.nostr)throw new Error("NIP-07 extension not available");this.debug=d("ndk:nip07")}async blockUntilReady(){var e;const t=await(null==(e=window.nostr)?void 0:e.getPublicKey());if(!t)throw new Error("User rejected access");return new Xa({hexpubkey:t})}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}async sign(e){if(!window.nostr)throw new Error("NIP-07 extension not available");return(await window.nostr.signEvent(e)).sig}async encrypt(e,t){if(!window.nostr)throw new Error("NIP-07 extension not available");const n=e.hexpubkey();return this.queueNip04("encrypt",n,t)}async decrypt(e,t){if(!window.nostr)throw new Error("NIP-07 extension not available");const n=e.hexpubkey();return this.queueNip04("decrypt",n,t)}async queueNip04(e,t,n){return new Promise(((r,i)=>{this.nip04Queue.push({type:e,counterpartyHexpubkey:t,value:n,resolve:r,reject:i}),this.nip04Processing||this.processNip04Queue()}))}async processNip04Queue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e&&0===this.nip04Queue.length)return void(this.nip04Processing=!1);this.nip04Processing=!0;const{type:n,counterpartyHexpubkey:r,value:i,resolve:o,reject:s}=e||this.nip04Queue.shift();this.debug("Processing encryption queue item",{type:n,counterpartyHexpubkey:r,value:i});try{let e;e="encrypt"===n?await window.nostr.nip04.encrypt(r,i):await window.nostr.nip04.decrypt(r,i),o(e)}catch(a){if(a.message&&a.message.includes("call already executing")&&t<5)return this.debug("Retrying encryption queue item",{type:n,counterpartyHexpubkey:r,value:i,retries:t}),void setTimeout((()=>{this.processNip04Queue(e,t+1)}),50*t);s(a)}this.processNip04Queue()}},dl=class extends y{constructor(e,t,n){super(),o(this,"ndk"),o(this,"signer"),o(this,"debug"),this.ndk=e,this.signer=t,this.debug=n.extend("rpc")}async subscribe(e){const t=this.ndk.subscribe(e,{closeOnEose:!1});return t.on("event",(async e=>{try{const t=await this.parseEvent(e);t.method?this.emit("request",t):this.emit(`response-${t.id}`,t)}catch(pd){this.debug("error parsing event",pd,e)}})),new Promise(((e,n)=>{t.on("eose",(()=>e(t)))}))}async parseEvent(e){const t=this.ndk.getUser({hexpubkey:e.pubkey});t.ndk=this.ndk;const n=await this.signer.decrypt(t,e.content),r=JSON.parse(n),{id:i,method:o,params:s,result:a,error:l}=r;return o?{id:i,pubkey:e.pubkey,method:o,params:s,event:e}:{id:i,result:a,error:l,event:e}}async sendResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,i=arguments.length>4?arguments[4]:void 0;const o={id:e,result:n};i&&(o.error=i);const s=await this.signer.user(),a=this.ndk.getUser({hexpubkey:t}),l=new ol(this.ndk,{kind:r,content:JSON.stringify(o),tags:[["p",t]],pubkey:s.hexpubkey()});l.content=await this.signer.encrypt(a,l.content),await l.sign(this.signer),await this.ndk.publish(l)}async sendRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,i=arguments.length>4?arguments[4]:void 0;const o=Math.random().toString(36).substring(7),s=await this.signer.user(),a=this.ndk.getUser({hexpubkey:e}),l={id:o,method:t,params:n},u=new Promise((e=>{i&&this.once(`response-${o}`,i)})),c=new ol(this.ndk,{kind:r,content:JSON.stringify(l),tags:[["p",e]],pubkey:s.hexpubkey()});return c.content=await this.signer.encrypt(a,c.content),await c.sign(this.signer),this.debug("sending request to",e),await this.ndk.publish(c),u}},pl=class{constructor(e,t,n){let r,i;if(o(this,"ndk"),o(this,"remoteUser"),o(this,"remotePubkey"),o(this,"token"),o(this,"localSigner"),o(this,"rpc"),o(this,"debug"),t.includes("#")){const e=t.split("#");r=new Xa({npub:e[0]}).hexpubkey(),i=e[1]}else r=t.startsWith("npub")?new Xa({npub:t}).hexpubkey():t;this.ndk=e,this.remotePubkey=r,this.token=i,this.debug=e.debug.extend("nip46:signer"),this.remoteUser=new Xa({hexpubkey:r}),this.localSigner=n||yl.generate(),this.rpc=new dl(e,this.localSigner,this.debug)}async user(){return this.remoteUser}async blockUntilReady(){const e=await this.localSigner.user(),t=this.ndk.getUser({npub:e.npub});return await this.rpc.subscribe({kinds:[24133],"#p":[e.hexpubkey()]}),new Promise(((n,r)=>{setTimeout((()=>{const i=[e.hexpubkey()];this.token&&i.push(this.token),this.rpc.sendRequest(this.remotePubkey,"connect",i,24133,(e=>{"ack"===e.result?n(t):r(e.error)}))}),100)}))}async encrypt(e,t){return this.debug("asking for encryption"),new Promise(((n,r)=>{this.rpc.sendRequest(this.remotePubkey,"nip04_encrypt",[e.hexpubkey(),t],24133,(e=>{e.error?r(e.error):n(e.result)}))}))}async decrypt(e,t){return this.debug("asking for decryption"),new Promise(((n,r)=>{this.rpc.sendRequest(this.remotePubkey,"nip04_decrypt",[e.hexpubkey(),t],24133,(e=>{if(e.error)r(e.error);else{const t=JSON.parse(e.result);n(t[0])}}))}))}async sign(e){return this.debug("asking for a signature"),new Promise(((t,n)=>{this.rpc.sendRequest(this.remotePubkey,"sign_event",[JSON.stringify(e)],24133,(e=>{if(this.debug("got a response",e),e.error)n(e.error);else{const n=JSON.parse(e.result);t(n.sig)}}))}))}},yl=class{constructor(e){o(this,"_user"),o(this,"privateKey"),e&&(this.privateKey=e,this._user=new Xa({hexpubkey:Ai(this.privateKey)}))}static generate(){const e=ut(nt.utils.randomPrivateKey());return new yl(e)}async blockUntilReady(){if(!this._user)throw new Error("NDKUser not initialized");return this._user}async user(){return await this.blockUntilReady(),this._user}async sign(e){if(!this.privateKey)throw Error("Attempted to sign without a private key");return Mi(e,this.privateKey)}async encrypt(e,t){if(!this.privateKey)throw Error("Attempted to encrypt without a private key");const n=e.hexpubkey();return await lo.encrypt(this.privateKey,n,t)}async decrypt(e,t){if(!this.privateKey)throw Error("Attempted to decrypt without a private key");const n=e.hexpubkey();return await lo.decrypt(this.privateKey,n,t)}},gl=class extends y{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),o(this,"pool"),o(this,"signer"),o(this,"cacheAdapter"),o(this,"debug"),o(this,"devWriteRelaySet"),o(this,"delayedSubscriptions"),this.debug=e.debug||d("ndk"),this.pool=new al(e.explicitRelayUrls||[],this),this.signer=e.signer,this.cacheAdapter=e.cacheAdapter,this.delayedSubscriptions=new Map,e.devWriteRelayUrls&&(this.devWriteRelaySet=hl.fromRelayUrls(e.devWriteRelayUrls,this))}toJSON(){return{relayCount:this.pool.relays.size}.toString()}async connect(e){return this.debug("Connecting to relays",{timeoutMs:e}),this.pool.connect(e)}getUser(e){const t=new Xa(e);return t.ndk=this,t}subscribe(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=new ul(this,e,t,n);return r&&i.start(),i}async publish(e,t,n){return t||(t=this.devWriteRelaySet||function(e){var t;const n=new Set;return null==(t=e.pool)||t.relays.forEach((e=>n.add(e))),new hl(n,e)}(this)),t.publish(e,n)}async fetchEvent(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(t="string"==typeof e?function(e){let t;try{switch(t=Zi.decode(e),t.type){case"nevent":return{ids:[t.data.id]};case"note":return{ids:[t.data]};case"naddr":return{authors:[t.data.pubkey],"#d":[t.data.identifier],kinds:[t.data.kind]}}}catch{}return{ids:[e]}}(e):e,!t)throw new Error(`Invalid filter: ${JSON.stringify(e)}`);return new Promise((e=>{const i=this.subscribe(t,{...n,closeOnEose:!0},r,!1);i.on("event",(t=>{t.ndk=this,e(t)})),i.on("eose",(()=>{e(null)})),i.start()}))}async fetchEvents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise((r=>{const i=new Map,o=this.subscribe(e,{...t,closeOnEose:!0},n,!1);o.on("event",(e=>{const t=i.get(e.tagId());t&&(e=function(e,t){return e.created_at>t.created_at?e:t}(t,e)),e.ndk=this,i.set(e.tagId(),e)})),o.on("eose",(()=>{r(new Set(i.values()))})),o.start()}))}async assertSigner(){if(!this.signer)throw this.emit("signerRequired"),new Error("Signer required")}};var bl,wl={exports:{}},ml={};wl.exports=function(){if(bl)return ml;bl=1;var e=n,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(e,n,r){var a,l={},u=null,c=null;for(a in void 0!==r&&(u=""+r),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(c=n.ref),n)i.call(n,a)&&!s.hasOwnProperty(a)&&(l[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===l[a]&&(l[a]=n[a]);return{$$typeof:t,type:e,key:u,ref:c,props:l,_owner:o.current}}return ml.Fragment=r,ml.jsx=a,ml.jsxs=a,ml}();const vl=wl.exports.jsx,_l=(0,n.createContext)({ndk:void 0,signer:void 0,fetchEvents:e=>Promise.resolve([]),loginWithNip46:(e,t)=>Promise.resolve(void 0),loginWithSecret:e=>Promise.resolve(void 0),loginWithNip07:()=>Promise.resolve(void 0),signPublishEvent:(e,t)=>Promise.resolve(void 0),getUser:e=>Xa.prototype,getProfile:e=>({})}),kl=e=>{let{children:t,relayUrls:r}=e;const{ndk:i,signer:o,setSigner:s,fetchEvents:a,signPublishEvent:l}=function(e){const t=(0,n.useRef)(!1),[r,i]=(0,n.useState)(void 0),[o,s]=(0,n.useState)(void 0);async function a(e,t){const n=new gl({explicitRelayUrls:e,signer:t});t&&s(t);try{await n.connect(),i(n)}catch(Ww){console.error("ERROR loading NDK NDKInstance",Ww)}}return(0,n.useEffect)((()=>{!async function(){void 0===r&&!1===t.current&&(t.current=!0,await a(e))}()}),[]),{ndk:r,signer:o,loadNdk:a,setSigner:async function(t){a(e,t)},fetchEvents:async function(e){return void 0===r?[]:new Promise((t=>{const n=new Map,i=r.subscribe(e,{closeOnEose:!0});i.on("event",(e=>{e.ndk=r,n.set(e.tagId(),e)})),i.on("eose",(()=>{setTimeout((()=>t(Array.from(new Set(n.values())))),3e3)}))}))},signPublishEvent:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{repost:!1,publish:!0};if(void 0!==r)return e.ndk=r,t.repost?await e.repost():await e.sign(),t.publish&&await e.publish(),e}}}(r),{getUser:u,getProfile:c}=(e=>{const[t,r]=(0,n.useState)({}),i=(0,n.useRef)({});async function o(t){if(null==e||i.current[t])return;let n;i.current={...i.current,[t]:Xa.prototype},n=t.startsWith("npub")?e.getUser({npub:t}):e.getUser({hexpubkey:t}),await n.fetchProfile(),n.profile&&(i.current={...i.current,[t]:n},r(i.current))}return{getUser:function(e){return t[e]?t[e]:(o(e),Xa.prototype)},getProfile:function(e){return t[e]?t[e].profile:(o(e),{})}}})(i);return vl(_l.Provider,{value:{ndk:i,signer:o,fetchEvents:a,loginWithNip07:async function(){const e=await async function(){try{const e=new fl;return e.user().then((async t=>{if(t.npub)return{user:t,npub:t.npub,signer:e}}))}catch(t){throw t}}();if(e){const{signer:t}=e;return await s(t),e}},loginWithNip46:async function(e,t){if(void 0===i)return;const n=await async function(e,t,n){try{let r=yl.generate();n&&(r=new yl(n));const i=new pl(e,t,r);return i.user().then((async e=>{if(e.npub)return await i.blockUntilReady(),{user:e,npub:(await i.user()).npub,sk:r.privateKey,token:t,remoteSigner:i,localSigner:r}}))}catch(o){throw o}}(i,e,t);return n?(await s(n.remoteSigner),n):void 0},loginWithSecret:async function(e){const t=await async function(e){try{let t=e;"nsec"===t.substring(0,4)&&(t=Zi.decode(t).data);const n=new yl(t);return n.user().then((async e=>{if(e.npub)return{user:e,npub:e.npub,sk:t,signer:n}}))}catch(r){throw r}}(e);if(t){const{signer:e}=t;return await s(e),t}},signPublishEvent:l,getUser:u,getProfile:c},children:t})},El=()=>{const e=(0,n.useContext)(_l);if(void 0===e)throw new Error("import NDKProvider to use useNDK");return e};function xl(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function Sl(e){return function t(n){return 0===arguments.length||xl(n)?t:e.apply(this,arguments)}}Array.isArray;function Al(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var Cl=Object.prototype.toString;const Ol=function(){return"[object Arguments]"===Cl.call(arguments)?function(e){return"[object Arguments]"===Cl.call(e)}:function(e){return Al("callee",e)}}();var Rl=!{toString:null}.propertyIsEnumerable("toString"),Il=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Nl=function(){return arguments.propertyIsEnumerable("length")}(),Tl=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};Object.keys;Number.isInteger;var Ll=__webpack_require__(139),Pl=__webpack_require__.n(Ll),Ul=__webpack_require__(579);const Bl=["as","disabled"];function Fl(e){let{tagName:t,disabled:n,href:r,target:i,rel:o,role:s,onClick:a,tabIndex:l=0,type:u}=e;t||(t=null!=r||null!=i||null!=o?"a":"button");const c={tagName:t};if("button"===t)return[{type:u||"button",disabled:n},c];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},c]}const zl=n.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Bl);const[o,{tagName:s}]=Fl(Object.assign({tagName:n,disabled:r},i));return(0,Ul.jsx)(s,Object.assign({},i,o,{ref:t}))}));zl.displayName="Button";const Ml=["xxl","xl","lg","md","sm","xs"],jl="xs",$l=n.createContext({prefixes:{},breakpoints:Ml,minBreakpoint:jl}),{Consumer:Dl,Provider:Hl}=$l;function ql(e,t){const{prefixes:r}=(0,n.useContext)($l);return e||r[t]||t}function Kl(){const{breakpoints:e}=(0,n.useContext)($l);return e}function Vl(){const{minBreakpoint:e}=(0,n.useContext)($l);return e}const Wl=n.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:s=!1,disabled:a=!1,className:l,...u}=e;const c=ql(r,"btn"),[h,{tagName:f}]=Fl({tagName:n,disabled:a,...u}),d=f;return(0,Ul.jsx)(d,{...h,...u,ref:t,disabled:a,className:Pl()(l,c,s&&"active",i&&`${c}-${i}`,o&&`${c}-${o}`,u.href&&a&&"disabled")})}));Wl.displayName="Button";const Zl=Wl;function Gl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Yl(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function Ql(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Gl(e.outputLen),Gl(e.blockLen)}function Jl(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Xl(e,t){Yl(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const eu="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,tu=e=>e instanceof Uint8Array,nu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ru=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function iu(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!tu(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class ou{clone(){return this._cloneInto()}}function su(e){const t=t=>e().update(iu(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function au(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(eu&&"function"===typeof eu.getRandomValues)return eu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class lu extends ou{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nu(this.buffer)}update(e){Jl(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=iu(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=nu(e);for(;r<=i-o;o+=r)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Jl(this),Xl(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let c=o;c<r;c++)t[c]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;e.setUint32(t+l,s,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=nu(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)s.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}const uu=(e,t,n)=>e&t^e&n^t&n,cu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fu=new Uint32Array(64);class du extends lu{constructor(){super(64,32,8,!1),this.A=0|hu[0],this.B=0|hu[1],this.C=0|hu[2],this.D=0|hu[3],this.E=0|hu[4],this.F=0|hu[5],this.G=0|hu[6],this.H=0|hu[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let h=0;h<16;h++,t+=4)fu[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=fu[h-15],t=fu[h-2],n=ru(e,7)^ru(e,18)^e>>>3,r=ru(t,17)^ru(t,19)^t>>>10;fu[h]=r+fu[h-7]+n+fu[h-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let h=0;h<64;h++){const e=u+(ru(s,6)^ru(s,11)^ru(s,25))+((c=s)&a^~c&l)+cu[h]+fu[h]|0,t=(ru(n,2)^ru(n,13)^ru(n,22))+uu(n,r,i)|0;u=l,l=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,l,u)}roundClean(){fu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pu=su((()=>new du)),yu=(BigInt(0),BigInt(1)),gu=BigInt(2),bu=e=>e instanceof Uint8Array,wu=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function mu(e){if(!bu(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=wu[e[n]];return t}function vu(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function _u(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,i=e.slice(t,t+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function ku(e){return vu(mu(e))}function Eu(e){if(!bu(e))throw new Error("Uint8Array expected");return vu(mu(Uint8Array.from(e).reverse()))}function xu(e,t){return _u(e.toString(16).padStart(2*t,"0"))}function Su(e,t){return xu(e,t).reverse()}function Au(e,t,n){let r;if("string"===typeof t)try{r=_u(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else{if(!bu(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"===typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Cu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!bu(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}const Ou=e=>(gu<<BigInt(e-1))-yu,Ru=e=>new Uint8Array(e),Iu=e=>Uint8Array.from(e);function Nu(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=Ru(e),i=Ru(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(i,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ru();i=a(Iu([0]),e),r=a(),0!==e.length&&(i=a(Iu([1]),e),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return Cu(...n)};return(e,t)=>{let n;for(s(),l(e);!(n=t(u()));)l();return s(),n}}const Tu={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Lu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const i=Tu[n];if("function"!==typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=e[t];if((!r||void 0!==o)&&!i(o,e))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const Pu=BigInt(0),Uu=BigInt(1),Bu=BigInt(2),Fu=BigInt(3),zu=BigInt(4),Mu=BigInt(5),ju=BigInt(8);BigInt(9),BigInt(16);function $u(e,t){const n=e%t;return n>=Pu?n:t+n}function Du(e,t,n){if(n<=Pu||t<Pu)throw new Error("Expected power/modulo > 0");if(n===Uu)return Pu;let r=Uu;for(;t>Pu;)t&Uu&&(r=r*e%n),e=e*e%n,t>>=Uu;return r}function Hu(e,t,n){let r=e;for(;t-- >Pu;)r*=r,r%=n;return r}function qu(e,t){if(e===Pu||t<=Pu)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=$u(e,t),r=t,i=Pu,o=Uu,s=Uu,a=Pu;for(;n!==Pu;){const e=r/n,t=r%n,l=i-s*e,u=o-a*e;r=n,n=t,i=s,o=a,s=l,a=u}if(r!==Uu)throw new Error("invert: does not exist");return $u(i,t)}function Ku(e){if(e%zu===Fu){const t=(e+Uu)/zu;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%ju===Mu){const t=(e-Mu)/ju;return function(e,n){const r=e.mul(n,Bu),i=e.pow(r,t),o=e.mul(n,i),s=e.mul(e.mul(o,Bu),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Uu)/Bu;let n,r,i;for(n=e-Uu,r=0;n%Bu===Pu;n/=Bu,r++);for(i=Bu;i<e&&Du(i,t,e)!==e-Uu;i++);if(1===r){const t=(e+Uu)/zu;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+Uu)/Bu;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),n),u=e.pow(s,o),c=e.pow(s,n);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,Uu<<BigInt(a-t-1));l=e.sqr(n),u=e.mul(u,n),c=e.mul(c,l),a=t}return u}}(e)}const Vu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wu(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Zu(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Gu(e){const t=Zu(e);return t+Math.ceil(t/2)}class Yu extends ou{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Ql(e);const n=iu(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Jl(this),this.iHash.update(e),this}digestInto(e){Jl(this),Yl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qu=(e,t,n)=>new Yu(e,t).update(n).digest();Qu.create=(e,t)=>new Yu(e,t);const Ju=BigInt(0),Xu=BigInt(1);function ec(e){return Lu(e.Fp,Vu.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Lu(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Wu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{Ph:tc,aT:nc}=e,rc={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=rc;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:tc(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=rc,n="string"===typeof e?nc(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=rc._parseInt(n.subarray(2)),{d:s,l:a}=rc._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:s}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,a=n(o),l=n(s);return`30${n(s+o+4)}02${l}${i}02${a}${r}`}},ic=BigInt(0),oc=BigInt(1),sc=(BigInt(2),BigInt(3));BigInt(4);function ac(e){const t=function(e){const t=ec(e);Lu(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return Cu(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,o=n.sqr(e),s=n.mul(o,e);return n.add(n.add(s,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"===typeof e&&ic<e&&e<t.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=mu(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let s;try{s="bigint"===typeof e?e:ku(Au("private key",e,r))}catch(l){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=$u(s,o)),a(s),s}const u=new Map;function c(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(i(Au("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),s=o(e);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:r,pz:i}=this,{px:o,py:s,pz:a}=e,l=n.eql(n.mul(t,a),n.mul(o,i)),u=n.eql(n.mul(r,a),n.mul(s,i));return l&&u}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,sc),{px:o,py:s,pz:a}=this;let l=n.ZERO,u=n.ZERO,c=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),c=n.mul(o,a),c=n.add(c,c),l=n.mul(e,c),u=n.mul(i,p),u=n.add(l,u),l=n.sub(d,u),u=n.add(d,u),u=n.mul(l,u),l=n.mul(y,l),c=n.mul(i,c),p=n.mul(e,p),y=n.sub(f,p),y=n.mul(e,y),y=n.add(y,c),c=n.add(f,f),f=n.add(c,f),f=n.add(f,p),f=n.mul(f,y),u=n.add(u,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,y),l=n.sub(l,f),c=n.mul(p,d),c=n.add(c,c),c=n.add(c,c),new h(l,u,c)}add(e){c(e);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:l}=e;let u=n.ZERO,f=n.ZERO,d=n.ZERO;const p=t.a,y=n.mul(t.b,sc);let g=n.mul(r,s),b=n.mul(i,a),w=n.mul(o,l),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,b),m=n.sub(m,v),v=n.add(r,o);let _=n.add(s,l);return v=n.mul(v,_),_=n.add(g,w),v=n.sub(v,_),_=n.add(i,o),u=n.add(a,l),_=n.mul(_,u),u=n.add(b,w),_=n.sub(_,u),d=n.mul(p,v),u=n.mul(y,w),d=n.add(u,d),u=n.sub(b,d),d=n.add(b,d),f=n.mul(u,d),b=n.add(g,g),b=n.add(b,g),w=n.mul(p,w),v=n.mul(y,v),b=n.add(b,w),w=n.sub(g,w),w=n.mul(p,w),v=n.add(v,w),g=n.mul(b,v),f=n.add(f,g),g=n.mul(_,v),u=n.mul(m,u),u=n.sub(u,g),g=n.mul(m,b),d=n.mul(_,d),d=n.add(d,g),new h(u,f,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}))}multiplyUnsafe(e){const r=h.ZERO;if(e===ic)return r;if(a(e),e===oc)return this;const{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:l,k2:u}=i.splitScalar(e),c=r,f=r,p=this;for(;s>ic||u>ic;)s&oc&&(c=c.add(p)),u&oc&&(f=f.add(p)),p=p.double(),s>>=oc,u>>=oc;return o&&(c=c.negate()),l&&(f=f.negate()),f=new h(n.mul(f.px,i.beta),f.py,f.pz),c.add(f)}multiply(e){a(e);let r,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:l}=s.splitScalar(o);let{p:u,f:c}=this.wNAF(t),{p:f,f:p}=this.wNAF(l);u=d.constTimeNegate(e,u),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,s.beta),f.py,f.pz),r=u.add(f),i=c.add(p)}else{const{p:e,f:t}=this.wNAF(o);r=e,i=t}return h.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,i=(e,t)=>t!==ic&&t!==oc&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){const{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));const s=n.mul(t,e),a=n.mul(r,e),l=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===oc)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===oc?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),r(h,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return mu(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,d=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>Ju;)n&Xu&&(r=r.add(i)),i=i.double(),n>>=Xu;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),o=[];let s=e,a=s;for(let r=0;r<n;r++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=r(t);let l=e.ZERO,u=e.BASE;const c=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let r=Number(o&c);o>>=f,r>a&&(r-=h,o+=Xu);const s=t,d=t+Math.abs(r)-1,p=e%2!==0,y=r<0;0===r?u=u.add(n(p,i[s])):l=l.add(n(y,i[d]))}return{p:l,f:u}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}(h,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function lc(e){const t=function(e){const t=ec(e);return Lu(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(e){return $u(e,r)}function a(e){return qu(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:h}=ac({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),s=Cu;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],s=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===o&&4===r){return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=ku(s);if(!function(e){return ic<e&&e<n.ORDER}(e))throw new Error("Point is not on curve");const t=c(e);let i=n.sqrt(t);return 1===(1&r)!==((i&oc)===oc)&&(i=n.neg(i)),{x:e,y:i}}}}),f=e=>mu(xu(e,t.nByteLength));function d(e){return e>r>>oc}const p=(e,t,n)=>ku(e.slice(t,n));class y{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=Au("compactSignature",e,2*n),new y(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=rc.toSig(Au("DER",e));return new y(t,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:o}=this,u=m(Au("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const c=2===o||3===o?r+t.n:r;if(c>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&o)?"02":"03",d=l.fromHex(h+f(c)),p=a(c),y=s(-u*p),g=s(i*p),b=l.BASE.multiplyAndAddUnsafe(d,y,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return _u(this.toDERHex())}toDERHex(){return rc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return _u(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const g={isValidPrivateKey(e){try{return u(e),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Gu(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.length,i=Zu(t),o=Gu(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=$u(n?ku(e):Eu(e),t-Uu)+Uu;return n?Su(s,i):xu(s,i)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function b(e){const t=e instanceof Uint8Array,n="string"===typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof l}const w=t.bits2int||function(e){const n=ku(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},m=t.bits2int_modN||function(e){return s(w(e))},v=Ou(t.nBitLength);function _(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(ic<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return xu(e,t.nByteLength)}function k(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:c}=t;let{lowS:f,prehash:p,extraEntropy:g}=i;null==f&&(f=!0),e=Au("msgHash",e),p&&(e=Au("prehashed msgHash",o(e)));const b=m(e),v=u(r),k=[_(v),_(b)];if(null!=g){const e=!0===g?c(n.BYTES):g;k.push(Au("extraEntropy",e))}const x=Cu(...k),S=b;return{seed:x,k2sig:function(e){const t=w(e);if(!h(t))return;const n=a(t),r=l.BASE.multiply(t).toAffine(),i=s(r.x);if(i===ic)return;const o=s(n*s(S+i*v));if(o===ic)return;let u=(r.x===i?0:2)|Number(r.y&oc),c=o;return f&&d(o)&&(c=function(e){return d(e)?s(-e):e}(o),u^=1),new y(i,c,u)}}}const E={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:i,k2sig:o}=k(e,n,r),s=t;return Nu(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;const o=e;if(n=Au("msgHash",n),r=Au("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:c}=i;let h,f;try{if("string"===typeof o||o instanceof Uint8Array)try{h=y.fromDER(o)}catch(k){if(!(k instanceof rc.Err))throw k;h=y.fromCompact(o)}else{if("object"!==typeof o||"bigint"!==typeof o.r||"bigint"!==typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;h=new y(e,t)}}f=l.fromHex(r)}catch(E){if("PARSE"===E.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&h.hasHighS())return!1;c&&(n=t.hash(n));const{r:d,s:p}=h,g=m(n),b=a(p),w=s(g*b),v=s(d*b),_=l.BASE.multiplyAndAddUnsafe(f,w,v)?.toAffine();return!!_&&s(_.x)===d},ProjectivePoint:l,Signature:y,utils:g}}function uc(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Qu(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!tu(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}(...r))},randomBytes:au}}const cc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),hc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fc=BigInt(1),dc=BigInt(2),pc=(e,t)=>(e+t/dc)/t;function yc(e){const t=cc,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,c=u*u*e%t,h=Hu(c,n,t)*c%t,f=Hu(h,n,t)*c%t,d=Hu(f,dc,t)*u%t,p=Hu(d,i,t)*d%t,y=Hu(p,o,t)*p%t,g=Hu(y,a,t)*y%t,b=Hu(g,l,t)*g%t,w=Hu(b,a,t)*y%t,m=Hu(w,n,t)*c%t,v=Hu(m,s,t)*p%t,_=Hu(v,r,t)*u%t,k=Hu(_,dc,t);if(!gc.eql(gc.sqr(k),e))throw new Error("Cannot find square root");return k}const gc=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=Pu)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Wu(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Ku(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Ou(i),ZERO:Pu,ONE:Uu,create:t=>$u(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Pu<=t&&t<e},is0:e=>e===Pu,isOdd:e=>(e&Uu)===Uu,neg:t=>$u(-t,e),eql:(e,t)=>e===t,sqr:t=>$u(t*t,e),add:(t,n)=>$u(t+n,e),sub:(t,n)=>$u(t-n,e),mul:(t,n)=>$u(t*n,e),pow:(e,t)=>function(e,t,n){if(n<Pu)throw new Error("Expected power > 0");if(n===Pu)return e.ONE;if(n===Uu)return t;let r=e.ONE,i=t;for(;n>Pu;)n&Uu&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Uu;return r}(a,e,t),div:(t,n)=>$u(t*qu(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>qu(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?Su(e,o):xu(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return n?Eu(e):ku(e)}});return Object.freeze(a)}(cc,void 0,void 0,{sqrt:yc}),bc=function(e,t){const n=t=>lc({...e,...uc(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:gc,n:hc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=hc,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-fc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=pc(o*e,t),l=pc(-r*e,t);let u=$u(e-a*n-l*i,t),c=$u(-a*r-l*o,t);const h=u>s,f=c>s;if(h&&(u=t-u),f&&(c=t-c),u>s||c>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:f,k2:c}}}},pu),wc=BigInt(0),mc=e=>"bigint"===typeof e&&wc<e&&e<cc,vc={};function _c(e){let t=vc[e];if(void 0===t){const n=pu(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=Cu(n,n),vc[e]=t}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return pu(Cu(t,...r))}const kc=e=>e.toRawBytes(!0).slice(1),Ec=e=>xu(e,32),xc=e=>$u(e,cc),Sc=e=>$u(e,hc),Ac=bc.ProjectivePoint;function Cc(e){let t=bc.utils.normPrivateKeyToScalar(e),n=Ac.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Sc(-t),bytes:kc(n)}}function Oc(e){if(!mc(e))throw new Error("bad x: need 0 < x < p");const t=xc(e*e);let n=yc(xc(t*e+BigInt(7)));n%dc!==wc&&(n=xc(-n));const r=new Ac(e,n,fc);return r.assertValidity(),r}function Rc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sc(ku(_c("BIP0340/challenge",...t)))}function Ic(e){return Cc(e).bytes}function Nc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:au(32);const r=Au("message",e),{bytes:i,scalar:o}=Cc(t),s=Au("auxRand",n,32),a=Ec(o^ku(_c("BIP0340/aux",s))),l=_c("BIP0340/nonce",a,i,r),u=Sc(ku(l));if(u===wc)throw new Error("sign failed: k is zero");const{bytes:c,scalar:h}=Cc(u),f=Rc(c,i,r),d=new Uint8Array(64);if(d.set(c,0),d.set(Ec(Sc(h+f*o)),32),!Tc(d,r,i))throw new Error("sign: Invalid signature produced");return d}function Tc(e,t,n){const r=Au("signature",e,64),i=Au("message",t),o=Au("publicKey",n,32);try{const e=Oc(ku(o)),t=ku(r.subarray(0,32));if(!mc(t))return!1;const n=ku(r.subarray(32,64));if(!("bigint"===typeof(s=n)&&wc<s&&s<hc))return!1;const a=Rc(Ec(t),kc(e),i),l=((e,t,n)=>Ac.BASE.multiplyAndAddUnsafe(e,t,n))(e,n,Sc(-a));return!(!l||!l.hasEvenY()||l.toAffine().x!==t)}catch(a){return!1}var s}const Lc=(()=>({getPublicKey:Ic,sign:Nc,verify:Tc,utils:{randomPrivateKey:bc.utils.randomPrivateKey,lift_x:Oc,pointToBytes:kc,numberToBytesBE:xu,bytesToNumberBE:ku,taggedHash:_c,mod:$u}}))(),Pc="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Uc=e=>e instanceof Uint8Array,Bc=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Fc=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const zc=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Mc(e){if(!Uc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=zc[e[n]];return t}function jc(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,i=e.slice(t,t+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function $c(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Uc(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function Dc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!Uc(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}class Hc{clone(){return this._cloneInto()}}function qc(e){const t=t=>e().update($c(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Kc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Pc&&"function"===typeof Pc.getRandomValues)return Pc.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Vc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Wc(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const Zc={number:Vc,bool:function(e){if("boolean"!==typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Wc,hash:function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Vc(e.outputLen),Vc(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){Wc(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},Gc=Zc;class Yc extends Hc{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Bc(this.buffer)}update(e){Gc.exists(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=$c(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Bc(e);for(;r<=i-o;o+=r)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Gc.exists(this),Gc.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let c=o;c<r;c++)t[c]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;e.setUint32(t+l,s,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=Bc(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)s.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}const Qc=(e,t,n)=>e&t^e&n^t&n,Jc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),eh=new Uint32Array(64);class th extends Yc{constructor(){super(64,32,8,!1),this.A=0|Xc[0],this.B=0|Xc[1],this.C=0|Xc[2],this.D=0|Xc[3],this.E=0|Xc[4],this.F=0|Xc[5],this.G=0|Xc[6],this.H=0|Xc[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let h=0;h<16;h++,t+=4)eh[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=eh[h-15],t=eh[h-2],n=Fc(e,7)^Fc(e,18)^e>>>3,r=Fc(t,17)^Fc(t,19)^t>>>10;eh[h]=r+eh[h-7]+n+eh[h-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let h=0;h<64;h++){const e=u+(Fc(s,6)^Fc(s,11)^Fc(s,25))+((c=s)&a^~c&l)+Jc[h]+eh[h]|0,t=(Fc(n,2)^Fc(n,13)^Fc(n,22))+Qc(n,r,i)|0;u=l,l=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,l,u)}roundClean(){eh.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class nh extends th{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const rh=qc((()=>new th));qc((()=>new nh));function ih(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function oh(){const e=(e,t)=>n=>e(t(n));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=Array.from(n).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),o=n.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0);return{encode:i,decode:o}}function sh(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(ih(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function ah(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function lh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(ih(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function uh(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function ch(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],o=Array.from(e);for(o.forEach((e=>{if(ih(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let i=r;i<o.length;i++){const a=o[i],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%n,o[i]=Math.floor(l/n),!Number.isSafeInteger(o[i])||o[i]*n+e!==l)throw new Error("convertRadix: carry overflow");s&&(o[i]?s=!1:r=i)}if(i.push(e),s)break}for(let s=0;s<e.length-1&&0===e[s];s++)i.push(0);return i.reverse()}const hh=(e,t)=>t?hh(t,e%t):e,fh=(e,t)=>e+(t-hh(e,t));function dh(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(fh(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${fh(t,n)}`);let i=0,o=0;const s=2**n-1,a=[];for(const l of e){if(ih(l),l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(i=i<<t|l,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)a.push((i>>o-n&s)>>>0);i&=2**o-1}if(i=i<<n-o&s,!r&&o>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function ph(e){return ih(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return ch(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(ch(t,e,256))}}}function yh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ih(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(fh(8,e)>32||fh(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return dh(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(dh(n,e,8,t))}}}function gh(e){if("function"!==typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch(i){}}}const bh=oh(yh(4),sh("0123456789ABCDEF"),ah("")),wh=oh(yh(5),sh("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),lh(5),ah("")),mh=(oh(yh(5),sh("0123456789ABCDEFGHIJKLMNOPQRSTUV"),lh(5),ah("")),oh(yh(5),sh("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ah(""),uh((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),oh(yh(6),sh("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),lh(6),ah(""))),vh=oh(yh(6),sh("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),lh(6),ah("")),_h=e=>oh(ph(58),sh(e),ah("")),kh=_h("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Eh=(_h("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),_h("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),[0,2,3,5,6,7,9,10,11]),xh={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=kh.encode(r).padStart(Eh[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=Eh.indexOf(r.length),o=kh.decode(r);for(let e=0;e<o.length-i;e++)if(0!==o[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(t)}},Sh=oh(sh("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ah("")),Ah=[996825010,642813549,513874426,1027748829,705979059];function Ch(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<Ah.length;r++)1===(t>>r&1)&&(n^=Ah[r]);return n}function Oh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let i=1;for(let o=0;o<r;o++){const t=e.charCodeAt(o);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);i=Ch(i)^t>>5}i=Ch(i);for(let o=0;o<r;o++)i=Ch(i)^31&e.charCodeAt(o);for(let o of t)i=Ch(i)^o;for(let o=0;o<6;o++)i=Ch(i);return i^=n,Sh.encode(dh([i%2**30],30,5,!1))}function Rh(e){const t="bech32"===e?1:734539939,n=yh(5),r=n.decode,i=n.encode,o=gh(r);function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!==typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=Sh.decode(s).slice(0,-6),l=Oh(o,a,t);if(!s.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:o,words:a}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!==typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${Sh.encode(n)}${Oh(e,n,t)}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:gh(s),fromWords:r,fromWordsUnsafe:o,toWords:i}}const Ih=Rh("bech32"),Nh=(Rh("bech32m"),{encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)});oh(yh(4),sh("0123456789abcdef"),ah(""),uh((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));function Th(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Lh(e){if("boolean"!==typeof e)throw new Error(`boolean expected, not ${e}`)}function Ph(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function Uh(e){if(!Ph(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Uint8Array expected of length ${n}, not of length=${e.length}`)}function Bh(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Fh(e,t){Uh(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const zh=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Mh=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),jh=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function $h(e){if("string"===typeof e)e=function(e){if("string"!==typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Ph(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e}function Dh(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}const Hh=(e,t)=>(Object.assign(t,e),t);function qh(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;e.setUint32(t+l,s,r),e.setUint32(t+u,a,r)}const Kh=16,Vh=new Uint8Array(16),Wh=Mh(Vh),Zh=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;class Gh{constructor(e,t){this.blockLen=Kh,this.outputLen=Kh,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,Uh(e=$h(e),16);const n=jh(e);let r=n.getUint32(0,!1),i=n.getUint32(4,!1),o=n.getUint32(8,!1),s=n.getUint32(12,!1);const a=[];for(let g=0;g<128;g++)a.push({s0:Zh(r),s1:Zh(i),s2:Zh(o),s3:Zh(s)}),({s0:r,s1:i,s2:o,s3:s}={s3:(c=o)<<31|(h=s)>>>1,s2:(u=i)<<31|c>>>1,s1:(l=r)<<31|u>>>1,s0:l>>>1^225<<24&-(1&h)});var l,u,c,h;const f=(e=>e>65536?8:e>1024?4:2)(t||1024);if(![1,2,4,8].includes(f))throw new Error(`ghash: wrong window size=${f}, should be 2, 4 or 8`);this.W=f;const d=128/f,p=this.windowSize=2**f,y=[];for(let g=0;g<d;g++)for(let e=0;e<p;e++){let t=0,n=0,r=0,i=0;for(let o=0;o<f;o++){if(!(e>>>f-o-1&1))continue;const{s0:s,s1:l,s2:u,s3:c}=a[f*g+o];t^=s,n^=l,r^=u,i^=c}y.push({s0:t,s1:n,s2:r,s3:i})}this.t=y}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;const{W:i,t:o,windowSize:s}=this;let a=0,l=0,u=0,c=0;const h=(1<<i)-1;let f=0;for(const d of[e,t,n,r])for(let e=0;e<4;e++){const t=d>>>8*e&255;for(let e=8/i-1;e>=0;e--){const n=t>>>i*e&h,{s0:r,s1:d,s2:p,s3:y}=o[f*s+n];a^=r,l^=d,u^=p,c^=y,f+=1}}this.s0=a,this.s1=l,this.s2=u,this.s3=c}update(e){e=$h(e),Bh(this);const t=Mh(e),n=Math.floor(e.length/Kh),r=e.length%Kh;for(let i=0;i<n;i++)this._updateBlock(t[4*i+0],t[4*i+1],t[4*i+2],t[4*i+3]);return r&&(Vh.set(e.subarray(n*Kh)),this._updateBlock(Wh[0],Wh[1],Wh[2],Wh[3]),Wh.fill(0)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){Bh(this),Fh(e,this),this.finished=!0;const{s0:t,s1:n,s2:r,s3:i}=this,o=Mh(e);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,e}digest(){const e=new Uint8Array(Kh);return this.digestInto(e),this.destroy(),e}}class Yh extends Gh{constructor(e,t){const n=function(e){e.reverse();const t=1&e[15];let n=0;for(let r=0;r<e.length;r++){const t=e[r];e[r]=t>>>1|n,n=(1&t)<<7}return e[0]^=225&-t,e}((e=$h(e)).slice());super(n,t),n.fill(0)}update(e){e=$h(e),Bh(this);const t=Mh(e),n=e.length%Kh,r=Math.floor(e.length/Kh);for(let i=0;i<r;i++)this._updateBlock(Zh(t[4*i+3]),Zh(t[4*i+2]),Zh(t[4*i+1]),Zh(t[4*i+0]));return n&&(Vh.set(e.subarray(r*Kh)),this._updateBlock(Zh(Wh[3]),Zh(Wh[2]),Zh(Wh[1]),Zh(Wh[0])),Wh.fill(0)),this}digestInto(e){Bh(this),Fh(e,this),this.finished=!0;const{s0:t,s1:n,s2:r,s3:i}=this,o=Mh(e);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,e.reverse()}}function Qh(e){const t=(t,n)=>e(n,t.length).update($h(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}const Jh=Qh(((e,t)=>new Gh(e,t))),Xh=Qh(((e,t)=>new Yh(e,t))),ef=16,tf=new Uint8Array(ef);function nf(e){return e<<1^283&-(e>>7)}function rf(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=nf(e);return n}const of=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=nf(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return t})(),sf=of.map(((e,t)=>of.indexOf(t))),af=e=>e<<8|e>>>24;function lf(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((n,r)=>t(e[r]))),r=n.map(af),i=r.map(af),o=i.map(af),s=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let u=0;u<256;u++)for(let t=0;t<256;t++){const c=256*u+t;s[c]=n[u]^r[t],a[c]=i[u]^o[t],l[c]=e[u]<<8|e[t]}return{sbox:e,sbox2:l,T0:n,T1:r,T2:i,T3:o,T01:s,T23:a}}const uf=lf(of,(e=>rf(e,3)<<24|e<<16|e<<8|rf(e,2))),cf=lf(sf,(e=>rf(e,11)<<24|rf(e,13)<<16|rf(e,9)<<8|rf(e,14))),hf=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=nf(n))e[t]=n;return e})();function ff(e){Uh(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=uf,r=Mh(e),i=r.length,o=e=>yf(n,e,e,e,e),s=new Uint32Array(t+28);s.set(r);for(let l=i;l<s.length;l++){let e=s[l-1];l%i===0?e=o((a=e)<<24|a>>>8)^hf[l/i-1]:i>6&&l%i===4&&(e=o(e)),s[l]=s[l-i]^e}var a;return s}function df(e){const t=ff(e),n=t.slice(),r=t.length,{sbox2:i}=uf,{T0:o,T1:s,T2:a,T3:l}=cf;for(let u=0;u<r;u+=4)for(let e=0;e<4;e++)n[u+e]=t[r-u-4+e];t.fill(0);for(let u=4;u<r-4;u++){const e=n[u],t=yf(i,e,e,e,e);n[u]=o[255&t]^s[t>>>8&255]^a[t>>>16&255]^l[t>>>24]}return n}function pf(e,t,n,r,i,o){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|o>>>24&255]}function yf(e,t,n,r,i){return e[255&t|65280&n]|e[r>>>16&255|i>>>16&65280]<<16}function gf(e,t,n,r,i){const{sbox2:o,T01:s,T23:a}=uf;let l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];const u=e.length/4-2;for(let c=0;c<u;c++){const o=e[l++]^pf(s,a,t,n,r,i),u=e[l++]^pf(s,a,n,r,i,t),c=e[l++]^pf(s,a,r,i,t,n),h=e[l++]^pf(s,a,i,t,n,r);t=o,n=u,r=c,i=h}return{s0:e[l++]^yf(o,t,n,r,i),s1:e[l++]^yf(o,n,r,i,t),s2:e[l++]^yf(o,r,i,t,n),s3:e[l++]^yf(o,i,t,n,r)}}function bf(e,t,n,r,i){const{sbox2:o,T01:s,T23:a}=cf;let l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];const u=e.length/4-2;for(let c=0;c<u;c++){const o=e[l++]^pf(s,a,t,i,r,n),u=e[l++]^pf(s,a,n,t,i,r),c=e[l++]^pf(s,a,r,n,t,i),h=e[l++]^pf(s,a,i,r,n,t);t=o,n=u,r=c,i=h}return{s0:e[l++]^yf(o,t,i,r,n),s1:e[l++]^yf(o,n,t,i,r),s2:e[l++]^yf(o,r,n,t,i),s3:e[l++]^yf(o,i,r,n,t)}}function wf(e,t){if(!t)return new Uint8Array(e);if(Uh(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function mf(e,t,n,r){Uh(t,ef),Uh(n);const i=n.length;r=wf(i,r);const o=t,s=Mh(o);let{s0:a,s1:l,s2:u,s3:c}=gf(e,s[0],s[1],s[2],s[3]);const h=Mh(n),f=Mh(r);for(let p=0;p+4<=h.length;p+=4){f[p+0]=h[p+0]^a,f[p+1]=h[p+1]^l,f[p+2]=h[p+2]^u,f[p+3]=h[p+3]^c;let t=1;for(let e=o.length-1;e>=0;e--)t=t+(255&o[e])|0,o[e]=255&t,t>>>=8;({s0:a,s1:l,s2:u,s3:c}=gf(e,s[0],s[1],s[2],s[3]))}const d=ef*Math.floor(h.length/4);if(d<i){const e=new Uint32Array([a,l,u,c]),t=zh(e);for(let o=d,s=0;o<i;o++,s++)r[o]=n[o]^t[s]}return r}function vf(e,t,n,r,i){Uh(n,ef),Uh(r),i=wf(r.length,i);const o=n,s=Mh(o),a=jh(o),l=Mh(r),u=Mh(i),c=t?0:12,h=r.length;let f=a.getUint32(c,t),{s0:d,s1:p,s2:y,s3:g}=gf(e,s[0],s[1],s[2],s[3]);for(let w=0;w+4<=l.length;w+=4)u[w+0]=l[w+0]^d,u[w+1]=l[w+1]^p,u[w+2]=l[w+2]^y,u[w+3]=l[w+3]^g,f=f+1>>>0,a.setUint32(c,f,t),({s0:d,s1:p,s2:y,s3:g}=gf(e,s[0],s[1],s[2],s[3]));const b=ef*Math.floor(l.length/4);if(b<h){const e=new Uint32Array([d,p,y,g]),t=zh(e);for(let n=b,o=0;n<h;n++,o++)i[n]=r[n]^t[o]}return i}Hh({blockSize:16,nonceLength:16},(function(e,t){function n(n,r){const i=ff(e),o=t.slice(),s=mf(i,o,n,r);return i.fill(0),o.fill(0),s}return Uh(e),Uh(t,ef),{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}}));function _f(e){if(Uh(e),e.length%ef!==0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function kf(e,t,n){let r=e.length;const i=r%ef;if(!t&&0!==i)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const o=Mh(e);if(t){let e=ef-i;e||(e=ef),r+=e}const s=wf(r,n);return{b:o,o:Mh(s),out:s}}function Ef(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=e.subarray(0,-r);for(let o=0;o<r;o++)if(e[n-o-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function xf(e){const t=new Uint8Array(16),n=Mh(t);t.set(e);const r=ef-e.length;for(let i=ef-r;i<ef;i++)t[i]=r;return n}Hh({blockSize:16},(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Uh(e);const n=!t.disablePadding;return{encrypt:(t,r)=>{Uh(t);const{b:i,o:o,out:s}=kf(t,n,r),a=ff(e);let l=0;for(;l+4<=i.length;){const{s0:e,s1:t,s2:n,s3:r}=gf(a,i[l+0],i[l+1],i[l+2],i[l+3]);o[l++]=e,o[l++]=t,o[l++]=n,o[l++]=r}if(n){const e=xf(t.subarray(4*l)),{s0:n,s1:r,s2:i,s3:s}=gf(a,e[0],e[1],e[2],e[3]);o[l++]=n,o[l++]=r,o[l++]=i,o[l++]=s}return a.fill(0),s},decrypt:(t,r)=>{_f(t);const i=df(e),o=wf(t.length,r),s=Mh(t),a=Mh(o);for(let e=0;e+4<=s.length;){const{s0:t,s1:n,s2:r,s3:o}=bf(i,s[e+0],s[e+1],s[e+2],s[e+3]);a[e++]=t,a[e++]=n,a[e++]=r,a[e++]=o}return i.fill(0),Ef(o,n)}}}));const Sf=Hh({blockSize:16,nonceLength:16},(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Uh(e),Uh(t,16);const r=!n.disablePadding;return{encrypt:(n,i)=>{const o=ff(e),{b:s,o:a,out:l}=kf(n,r,i),u=Mh(t);let c=u[0],h=u[1],f=u[2],d=u[3],p=0;for(;p+4<=s.length;)c^=s[p+0],h^=s[p+1],f^=s[p+2],d^=s[p+3],({s0:c,s1:h,s2:f,s3:d}=gf(o,c,h,f,d)),a[p++]=c,a[p++]=h,a[p++]=f,a[p++]=d;if(r){const e=xf(n.subarray(4*p));c^=e[0],h^=e[1],f^=e[2],d^=e[3],({s0:c,s1:h,s2:f,s3:d}=gf(o,c,h,f,d)),a[p++]=c,a[p++]=h,a[p++]=f,a[p++]=d}return o.fill(0),l},decrypt:(n,i)=>{_f(n);const o=df(e),s=Mh(t),a=wf(n.length,i),l=Mh(n),u=Mh(a);let c=s[0],h=s[1],f=s[2],d=s[3];for(let e=0;e+4<=l.length;){const t=c,n=h,r=f,i=d;c=l[e+0],h=l[e+1],f=l[e+2],d=l[e+3];const{s0:s,s1:a,s2:p,s3:y}=bf(o,c,h,f,d);u[e++]=s^t,u[e++]=a^n,u[e++]=p^r,u[e++]=y^i}return o.fill(0),Ef(a,r)}}}));Hh({blockSize:16,nonceLength:16},(function(e,t){function n(n,r,i){const o=ff(e),s=n.length;i=wf(s,i);const a=Mh(n),l=Mh(i),u=r?l:a,c=Mh(t);let h=c[0],f=c[1],d=c[2],p=c[3];for(let e=0;e+4<=a.length;){const{s0:t,s1:n,s2:r,s3:i}=gf(o,h,f,d,p);l[e+0]=a[e+0]^t,l[e+1]=a[e+1]^n,l[e+2]=a[e+2]^r,l[e+3]=a[e+3]^i,h=u[e++],f=u[e++],d=u[e++],p=u[e++]}const y=ef*Math.floor(a.length/4);if(y<s){({s0:h,s1:f,s2:d,s3:p}=gf(o,h,f,d,p));const e=zh(new Uint32Array([h,f,d,p]));for(let t=y,r=0;t<s;t++,r++)i[t]=n[t]^e[r];e.fill(0)}return o.fill(0),i}return Uh(e),Uh(t,16),{encrypt:(e,t)=>n(e,!0,t),decrypt:(e,t)=>n(e,!1,t)}}));function Af(e,t,n,r,i){const o=e.create(n,r.length+(i?.length||0));i&&o.update(i),o.update(r);const s=new Uint8Array(16),a=jh(s);return i&&qh(a,0,BigInt(8*i.length),t),qh(a,8,BigInt(8*r.length),t),o.update(s),o.digest()}Hh({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,n){if(Uh(t),0===t.length)throw new Error("aes/gcm: empty nonce");const r=16;function i(e,t,r){const i=Af(Jh,!1,e,r,n);for(let n=0;n<t.length;n++)i[n]^=t[n];return i}function o(){const n=ff(e),r=tf.slice(),i=tf.slice();if(vf(n,!1,i,i,r),12===t.length)i.set(t);else{const e=tf.slice();qh(jh(e),8,BigInt(8*t.length),!1),Jh.create(r).update(t).update(e).digestInto(i)}return{xk:n,authKey:r,counter:i,tagMask:vf(n,!1,i,tf)}}return{encrypt:e=>{Uh(e);const{xk:t,authKey:n,counter:s,tagMask:a}=o(),l=new Uint8Array(e.length+r);vf(t,!1,s,e,l);const u=i(n,a,l.subarray(0,l.length-r));return l.set(u,e.length),t.fill(0),l},decrypt:e=>{if(Uh(e),e.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:t,authKey:n,counter:s,tagMask:a}=o(),l=e.subarray(0,-16),u=e.subarray(-16);if(!Dh(i(n,a,l),u))throw new Error("aes/gcm: invalid ghash tag");const c=vf(t,!1,s,l);return n.fill(0),a.fill(0),t.fill(0),c}}}));const Cf=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n)throw new Error(`${e}: invalid value=${r}, must be [${t}..${n}]`)};Hh({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,n){const r=Cf("AAD",0,2**36),i=Cf("plaintext",0,2**36),o=Cf("nonce",12,12),s=Cf("ciphertext",16,2**36+16);function a(){const n=e.length;if(16!==n&&24!==n&&32!==n)throw new Error(`key length must be 16, 24 or 32 bytes, got: ${n} bytes`);const r=ff(e),i=new Uint8Array(n),o=new Uint8Array(16),s=Mh(t);let a=0,l=s[0],u=s[1],c=s[2],h=0;for(const e of[o,i].map(Mh)){const t=Mh(e);for(let e=0;e<t.length;e+=2){const{s0:n,s1:i}=gf(r,a,l,u,c);t[e+0]=n,t[e+1]=i,a=++h}}return r.fill(0),{authKey:o,encKey:ff(i)}}function l(e,r,i){const o=Af(Xh,!0,r,i,n);for(let n=0;n<12;n++)o[n]^=t[n];o[15]&=127;const s=Mh(o);let a=s[0],l=s[1],u=s[2],c=s[3];return({s0:a,s1:l,s2:u,s3:c}=gf(e,a,l,u,c)),s[0]=a,s[1]=l,s[2]=u,s[3]=c,o}function u(e,t,n){let r=t.slice();return r[15]|=128,vf(e,!0,r,n)}return Uh(t),o(t.length),n&&(Uh(n),r(n.length)),{encrypt:e=>{Uh(e),i(e.length);const{encKey:t,authKey:n}=a(),r=l(t,n,e),o=new Uint8Array(e.length+16);return o.set(r,e.length),o.set(u(t,r,e)),t.fill(0),n.fill(0),o},decrypt:e=>{Uh(e),s(e.length);const t=e.subarray(-16),{encKey:n,authKey:r}=a(),i=u(n,t,e.subarray(0,-16)),o=l(n,r,i);if(n.fill(0),r.fill(0),!Dh(t,o))throw new Error("invalid polyval tag");return i}}}));const Of=(e,t)=>255&e[t++]|(255&e[t++])<<8;class Rf{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Uh(e=$h(e),32);const t=Of(e,0),n=Of(e,2),r=Of(e,4),i=Of(e,6),o=Of(e,8),s=Of(e,10),a=Of(e,12),l=Of(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|s<<2),this.r[7]=8065&(s>>>11|a<<5),this.r[8]=8191&(a>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Of(e,16+2*u)}process(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?0:2048,{h:r,r:i}=this,o=i[0],s=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],d=i[8],p=i[9],y=Of(e,t+0),g=Of(e,t+2),b=Of(e,t+4),w=Of(e,t+6),m=Of(e,t+8),v=Of(e,t+10),_=Of(e,t+12),k=Of(e,t+14);let E=r[0]+(8191&y),x=r[1]+(8191&(y>>>13|g<<3)),S=r[2]+(8191&(g>>>10|b<<6)),A=r[3]+(8191&(b>>>7|w<<9)),C=r[4]+(8191&(w>>>4|m<<12)),O=r[5]+(m>>>1&8191),R=r[6]+(8191&(m>>>14|v<<2)),I=r[7]+(8191&(v>>>11|_<<5)),N=r[8]+(8191&(_>>>8|k<<8)),T=r[9]+(k>>>5|n),L=0,P=L+E*o+x*(5*p)+S*(5*d)+A*(5*f)+C*(5*h);L=P>>>13,P&=8191,P+=O*(5*c)+R*(5*u)+I*(5*l)+N*(5*a)+T*(5*s),L+=P>>>13,P&=8191;let U=L+E*s+x*o+S*(5*p)+A*(5*d)+C*(5*f);L=U>>>13,U&=8191,U+=O*(5*h)+R*(5*c)+I*(5*u)+N*(5*l)+T*(5*a),L+=U>>>13,U&=8191;let B=L+E*a+x*s+S*o+A*(5*p)+C*(5*d);L=B>>>13,B&=8191,B+=O*(5*f)+R*(5*h)+I*(5*c)+N*(5*u)+T*(5*l),L+=B>>>13,B&=8191;let F=L+E*l+x*a+S*s+A*o+C*(5*p);L=F>>>13,F&=8191,F+=O*(5*d)+R*(5*f)+I*(5*h)+N*(5*c)+T*(5*u),L+=F>>>13,F&=8191;let z=L+E*u+x*l+S*a+A*s+C*o;L=z>>>13,z&=8191,z+=O*(5*p)+R*(5*d)+I*(5*f)+N*(5*h)+T*(5*c),L+=z>>>13,z&=8191;let M=L+E*c+x*u+S*l+A*a+C*s;L=M>>>13,M&=8191,M+=O*o+R*(5*p)+I*(5*d)+N*(5*f)+T*(5*h),L+=M>>>13,M&=8191;let j=L+E*h+x*c+S*u+A*l+C*a;L=j>>>13,j&=8191,j+=O*s+R*o+I*(5*p)+N*(5*d)+T*(5*f),L+=j>>>13,j&=8191;let $=L+E*f+x*h+S*c+A*u+C*l;L=$>>>13,$&=8191,$+=O*a+R*s+I*o+N*(5*p)+T*(5*d),L+=$>>>13,$&=8191;let D=L+E*d+x*f+S*h+A*c+C*u;L=D>>>13,D&=8191,D+=O*l+R*a+I*s+N*o+T*(5*p),L+=D>>>13,D&=8191;let H=L+E*p+x*d+S*f+A*h+C*c;L=H>>>13,H&=8191,H+=O*u+R*l+I*a+N*s+T*o,L+=H>>>13,H&=8191,L=(L<<2)+L|0,L=L+P|0,P=8191&L,L>>>=13,U+=L,r[0]=P,r[1]=U,r[2]=B,r[3]=F,r[4]=z,r[5]=M,r[6]=j,r[7]=$,r[8]=D,r[9]=H}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let s=2;s<10;s++)e[s]+=r,r=e[s]>>>13,e[s]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let s=1;s<10;s++)n[s]=e[s]+r,r=n[s]>>>13,n[s]&=8191;n[9]-=8192;let i=(1^r)-1;for(let s=0;s<10;s++)n[s]&=i;i=~i;for(let s=0;s<10;s++)e[s]=e[s]&i|n[s];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+t[0];e[0]=65535&o;for(let s=1;s<8;s++)o=(e[s]+t[s]|0)+(o>>>16)|0,e[s]=65535&o}update(e){Bh(this);const{buffer:t,blockLen:n}=this,r=(e=$h(e)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Bh(this),Fh(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}const If=function(e){const t=(t,n)=>e(n).update($h(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}((e=>new Rf(e))),Nf=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Tf=Nf("expand 16-byte k"),Lf=Nf("expand 32-byte k"),Pf=Mh(Tf),Uf=Mh(Lf);Uf.slice();function Bf(e,t){return e<<t|e>>>32-t}function Ff(e){return e.byteOffset%4===0}const zf=2**32-1,Mf=new Uint32Array;function jf(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=function(e,t){if(null==t||"object"!==typeof t)throw new Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!==typeof e)throw new Error("core must be a function");return Th(i),Th(s),Lh(o),Lh(n),function(t,a,l,u){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Uh(t),Uh(a),Uh(l);const h=l.length;if(u||(u=new Uint8Array(h)),Uh(u),Th(c),c<0||c>=zf)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let d,p,y=t.length;if(32===y)d=t.slice(),f.push(d),p=Uf;else{if(16!==y||!n)throw new Error(`arx: invalid 32-byte key, got length=${y}`);d=new Uint8Array(32),d.set(t),d.set(t,16),p=Pf,f.push(d)}Ff(a)||(a=a.slice(),f.push(a));const g=Mh(d);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,g,Mh(a.subarray(0,16)),g),a=a.subarray(16)}const b=16-i;if(b!==a.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(12!==b){const e=new Uint8Array(12);e.set(a,o?0:12-a.length),a=e,f.push(a)}const w=Mh(a);for(!function(e,t,n,r,i,o,s,a){const l=i.length,u=new Uint8Array(64),c=Mh(u),h=Ff(i)&&Ff(o),f=h?Mh(i):Mf,d=h?Mh(o):Mf;for(let p=0;p<l;s++){if(e(t,n,r,c,s,a),s>=zf)throw new Error("arx: counter overflow");const y=Math.min(64,l-p);if(h&&64===y){const e=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let t,n=0;n<16;n++)t=e+n,d[t]=f[t]^c[n];p+=64}else{for(let e,t=0;t<y;t++)e=p+t,o[e]=i[e]^u[t];p+=y}}}(e,p,g,w,l,u,c,s);f.length>0;)f.pop().fill(0);return u}}function $f(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,s=e[0],a=e[1],l=e[2],u=e[3],c=t[0],h=t[1],f=t[2],d=t[3],p=t[4],y=t[5],g=t[6],b=t[7],w=i,m=n[0],v=n[1],_=n[2],k=s,E=a,x=l,S=u,A=c,C=h,O=f,R=d,I=p,N=y,T=g,L=b,P=w,U=m,B=v,F=_;for(let M=0;M<o;M+=2)k=k+A|0,P=Bf(P^k,16),I=I+P|0,A=Bf(A^I,12),k=k+A|0,P=Bf(P^k,8),I=I+P|0,A=Bf(A^I,7),E=E+C|0,U=Bf(U^E,16),N=N+U|0,C=Bf(C^N,12),E=E+C|0,U=Bf(U^E,8),N=N+U|0,C=Bf(C^N,7),x=x+O|0,B=Bf(B^x,16),T=T+B|0,O=Bf(O^T,12),x=x+O|0,B=Bf(B^x,8),T=T+B|0,O=Bf(O^T,7),S=S+R|0,F=Bf(F^S,16),L=L+F|0,R=Bf(R^L,12),S=S+R|0,F=Bf(F^S,8),L=L+F|0,R=Bf(R^L,7),k=k+C|0,F=Bf(F^k,16),T=T+F|0,C=Bf(C^T,12),k=k+C|0,F=Bf(F^k,8),T=T+F|0,C=Bf(C^T,7),E=E+O|0,P=Bf(P^E,16),L=L+P|0,O=Bf(O^L,12),E=E+O|0,P=Bf(P^E,8),L=L+P|0,O=Bf(O^L,7),x=x+R|0,U=Bf(U^x,16),I=I+U|0,R=Bf(R^I,12),x=x+R|0,U=Bf(U^x,8),I=I+U|0,R=Bf(R^I,7),S=S+A|0,B=Bf(B^S,16),N=N+B|0,A=Bf(A^N,12),S=S+A|0,B=Bf(B^S,8),N=N+B|0,A=Bf(A^N,7);let z=0;r[z++]=s+k|0,r[z++]=a+E|0,r[z++]=l+x|0,r[z++]=u+S|0,r[z++]=c+A|0,r[z++]=h+C|0,r[z++]=f+O|0,r[z++]=d+R|0,r[z++]=p+I|0,r[z++]=y+N|0,r[z++]=g+T|0,r[z++]=b+L|0,r[z++]=w+P|0,r[z++]=m+U|0,r[z++]=v+B|0,r[z++]=_+F|0}const Df=jf($f,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Hf=jf($f,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,n,r){let i=e[0],o=e[1],s=e[2],a=e[3],l=t[0],u=t[1],c=t[2],h=t[3],f=t[4],d=t[5],p=t[6],y=t[7],g=n[0],b=n[1],w=n[2],m=n[3];for(let _=0;_<20;_+=2)i=i+l|0,g=Bf(g^i,16),f=f+g|0,l=Bf(l^f,12),i=i+l|0,g=Bf(g^i,8),f=f+g|0,l=Bf(l^f,7),o=o+u|0,b=Bf(b^o,16),d=d+b|0,u=Bf(u^d,12),o=o+u|0,b=Bf(b^o,8),d=d+b|0,u=Bf(u^d,7),s=s+c|0,w=Bf(w^s,16),p=p+w|0,c=Bf(c^p,12),s=s+c|0,w=Bf(w^s,8),p=p+w|0,c=Bf(c^p,7),a=a+h|0,m=Bf(m^a,16),y=y+m|0,h=Bf(h^y,12),a=a+h|0,m=Bf(m^a,8),y=y+m|0,h=Bf(h^y,7),i=i+u|0,m=Bf(m^i,16),p=p+m|0,u=Bf(u^p,12),i=i+u|0,m=Bf(m^i,8),p=p+m|0,u=Bf(u^p,7),o=o+c|0,g=Bf(g^o,16),y=y+g|0,c=Bf(c^y,12),o=o+c|0,g=Bf(g^o,8),y=y+g|0,c=Bf(c^y,7),s=s+h|0,b=Bf(b^s,16),f=f+b|0,h=Bf(h^f,12),s=s+h|0,b=Bf(b^s,8),f=f+b|0,h=Bf(h^f,7),a=a+l|0,w=Bf(w^a,16),d=d+w|0,l=Bf(l^d,12),a=a+l|0,w=Bf(w^a,8),d=d+w|0,l=Bf(l^d,7);let v=0;r[v++]=i,r[v++]=o,r[v++]=s,r[v++]=a,r[v++]=g,r[v++]=b,r[v++]=w,r[v++]=m},allowShortKeys:!1}),qf=new Uint8Array(16),Kf=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(qf.subarray(n))},Vf=new Uint8Array(32);function Wf(e,t,n,r,i){const o=e(t,n,Vf),s=If.create(o);i&&Kf(s,i),Kf(s,r);const a=new Uint8Array(16),l=jh(a);qh(l,0,BigInt(i?i.length:0),!0),qh(l,8,BigInt(r.length),!0),s.update(a);const u=s.digest();return o.fill(0),u}const Zf=e=>(t,n,r)=>{const i=16;return Uh(t,32),Uh(n),{encrypt:(o,s)=>{const a=o.length,l=a+i;s?Uh(s,l):s=new Uint8Array(l),e(t,n,o,s,1);const u=Wf(e,t,n,s.subarray(0,-16),r);return s.set(u,a),s},decrypt:(o,s)=>{const a=o.length,l=a-i;if(a<i)throw new Error("encrypted data must be at least 16 bytes");s?Uh(s,l):s=new Uint8Array(l);const u=o.subarray(0,-16);if(!Dh(o.subarray(-16),Wf(e,t,n,u,r)))throw new Error("invalid tag");return e(t,n,u,s,1),s}}};Zf(Df),Zf(Hf);class Gf extends Hc{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Gc.hash(e);const n=$c(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Gc.exists(this),this.iHash.update(e),this}digestInto(e){Gc.exists(this),Gc.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yf=(e,t,n)=>new Gf(e,t).update(n).digest();function Qf(e,t,n){return Gc.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),Yf(e,$c(n),$c(t))}Yf.create=(e,t)=>new Gf(e,t);const Jf=new Uint8Array([0]),Xf=new Uint8Array;function ed(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;if(Gc.hash(e),Gc.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/e.outputLen);void 0===n&&(n=Xf);const o=new Uint8Array(i*e.outputLen),s=Yf.create(e,t),a=s._cloneInto(),l=new Uint8Array(s.outputLen);for(let u=0;u<i;u++)Jf[0]=u+1,a.update(0===u?Xf:l).update(n).update(Jf).digestInto(l),o.set(l,e.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),l.fill(0),Jf.fill(0),o.slice(0,r)}var td=Object.defineProperty,nd=(e,t)=>{for(var n in t)td(e,n,{get:t[n],enumerable:!0})},rd=Symbol("verified");function id(e){if(!(e instanceof Object))return!1;if("number"!==typeof e.kind)return!1;if("string"!==typeof e.content)return!1;if("number"!==typeof e.created_at)return!1;if("string"!==typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"===typeof n[e])return!1}return!0}nd({},{Queue:()=>fd,QueueNode:()=>hd,binarySearch:()=>cd,insertEventIntoAscendingList:()=>ud,insertEventIntoDescendingList:()=>ld,normalizeURL:()=>ad,utf8Decoder:()=>od,utf8Encoder:()=>sd});var od=new TextDecoder("utf-8"),sd=new TextEncoder;function ad(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function ld(e,t){const[n,r]=cd(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:e.created_at-t.created_at));return r||e.splice(n,0,t),e}function ud(e,t){const[n,r]=cd(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:t.created_at-e.created_at));return r||e.splice(n,0,t),e}function cd(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),o=t(e[i]);if(0===o)return[i,!0];o<0?r=i-1:n=i+1}return[n,!1]}var hd=class{value;next=null;prev=null;constructor(e){this.value=e}},fd=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){const t=new hd(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const e=this.first;return this.first=e.next,e.value}};function dd(e){return Mc(rh(sd.encode(function(e){if(!id(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e))))}var pd=new class{generateSecretKey(){return Lc.utils.randomPrivateKey()}getPublicKey(e){return Mc(Lc.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=Mc(Lc.getPublicKey(t)),n.id=dd(n),n.sig=Mc(Lc.sign(dd(n),t)),n[rd]=!0,n}verifyEvent(e){if("boolean"===typeof e[rd])return e[rd];const t=dd(e);if(t!==e.id)return e[rd]=!1,!1;try{const n=Lc.verify(e.sig,t,e.pubkey);return e[rd]=n,n}catch(n){return e[rd]=!1,!1}}},yd=pd.generateSecretKey,gd=pd.getPublicKey,bd=pd.finalizeEvent,wd=pd.verifyEvent;function md(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function vd(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function _d(e){return 2e4<=e&&e<3e4}function kd(e){return 3e4<=e&&e<4e4}function Ed(e){return md(e)?"regular":vd(e)?"replaceable":_d(e)?"ephemeral":kd(e)?"parameterized":"unknown"}nd({},{Application:()=>Tp,BadgeAward:()=>Ld,BadgeDefinition:()=>Sp,BlockedRelaysList:()=>ap,BookmarkList:()=>ip,Bookmarksets:()=>kp,Calendar:()=>Mp,CalendarEventRSVP:()=>jp,ChannelCreation:()=>Ud,ChannelHideMessage:()=>zd,ChannelMessage:()=>Fd,ChannelMetadata:()=>Bd,ChannelMuteUser:()=>Md,ClassifiedListing:()=>Up,ClientAuth:()=>pp,CommunitiesList:()=>op,CommunityDefinition:()=>Hp,CommunityPostApproval:()=>Wd,Contacts:()=>Cd,CreateOrUpdateProduct:()=>Op,CreateOrUpdateStall:()=>Cp,Curationsets:()=>Ep,Date:()=>Fp,DraftClassifiedListing:()=>Bp,DraftLong:()=>Ip,Emojisets:()=>Np,EncryptedDirectMessage:()=>Od,EncryptedDirectMessages:()=>Rd,EventDeletion:()=>Id,FileMetadata:()=>$d,FileServerPreference:()=>hp,Followsets:()=>mp,GenericRepost:()=>Pd,Genericlists:()=>vp,HTTPAuth:()=>wp,Handlerinformation:()=>Dp,Handlerrecommendation:()=>$p,Highlights:()=>ep,InterestsList:()=>up,Interestsets:()=>Ap,JobFeedback:()=>Yd,JobRequest:()=>Zd,JobResult:()=>Gd,Label:()=>Vd,LightningPubRPC:()=>dp,LiveChatMessage:()=>Dd,LiveEvent:()=>Lp,LongFormArticle:()=>Rp,Metadata:()=>xd,Mutelist:()=>tp,NWCWalletInfo:()=>fp,NWCWalletRequest:()=>yp,NWCWalletResponse:()=>gp,NostrConnect:()=>bp,OpenTimestamps:()=>jd,Pinlist:()=>np,ProblemTracker:()=>Hd,ProfileBadges:()=>xp,PublicChatsList:()=>sp,Reaction:()=>Td,RecommendRelay:()=>Ad,RelayList:()=>rp,Relaysets:()=>_p,Report:()=>qd,Reporting:()=>Kd,Repost:()=>Nd,SearchRelaysList:()=>lp,ShortTextNote:()=>Sd,Time:()=>zp,UserEmojiList:()=>cp,UserStatuses:()=>Pp,Zap:()=>Xd,ZapGoal:()=>Qd,ZapRequest:()=>Jd,classifyKind:()=>Ed,isEphemeralKind:()=>_d,isParameterizedReplaceableKind:()=>kd,isRegularKind:()=>md,isReplaceableKind:()=>vd});var xd=0,Sd=1,Ad=2,Cd=3,Od=4,Rd=4,Id=5,Nd=6,Td=7,Ld=8,Pd=16,Ud=40,Bd=41,Fd=42,zd=43,Md=44,jd=1040,$d=1063,Dd=1311,Hd=1971,qd=1984,Kd=1984,Vd=1985,Wd=4550,Zd=5999,Gd=6999,Yd=7e3,Qd=9041,Jd=9734,Xd=9735,ep=9802,tp=1e4,np=10001,rp=10002,ip=10003,op=10004,sp=10005,ap=10006,lp=10007,up=10015,cp=10030,hp=10096,fp=13194,dp=21e3,pp=22242,yp=23194,gp=23195,bp=24133,wp=27235,mp=3e4,vp=30001,_p=30002,kp=30003,Ep=30004,xp=30008,Sp=30009,Ap=30015,Cp=30017,Op=30018,Rp=30023,Ip=30024,Np=30030,Tp=30078,Lp=30311,Pp=30315,Up=30402,Bp=30403,Fp=31922,zp=31923,Mp=31924,jp=31925,$p=31989,Dp=31990,Hp=34550;function qp(e,t){if(e.ids&&-1===e.ids.indexOf(t.id))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((e=>{let[t,i]=e;return t===n.slice(1)&&-1!==r.indexOf(i)})))return!1}return!(e.since&&t.created_at<e.since)&&!(e.until&&t.created_at>e.until)}function Kp(e,t){for(let n=0;n<e.length;n++)if(qp(e[n],t))return!0;return!1}function Vp(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function Wp(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function Zp(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(-1===i)return null;let o=r+1+i;return e.slice(r+1,o)}function Gp(e,t){return t===Vp(e,"id")}function Yp(e,t){return t===Vp(e,"pubkey")}function Qp(e,t){return t===Wp(e,"kind")}nd({},{getHex64:()=>Vp,getInt:()=>Wp,getSubscriptionId:()=>Zp,matchEventId:()=>Gp,matchEventKind:()=>Qp,matchEventPubkey:()=>Yp});function Jp(e,t){return{kind:pp,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}nd({},{makeAuthEvent:()=>Jp});try{WebSocket}catch{}try{WebSocket}catch{}var Xp={};nd(Xp,{BECH32_REGEX:()=>ty,Bech32MaxSize:()=>ey,decode:()=>ny,encodeBytes:()=>ly,naddrEncode:()=>hy,neventEncode:()=>cy,noteEncode:()=>sy,nprofileEncode:()=>uy,npubEncode:()=>oy,nrelayEncode:()=>fy,nsecEncode:()=>iy});var ey=5e3,ty=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function ny(e){let{prefix:t,words:n}=Ih.decode(e,ey),r=new Uint8Array(Ih.fromWords(n));switch(t){case"nprofile":{let e=ry(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Mc(e[0][0]),relays:e[1]?e[1].map((e=>od.decode(e))):[]}}}case"nevent":{let e=ry(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Mc(e[0][0]),relays:e[1]?e[1].map((e=>od.decode(e))):[],author:e[2]?.[0]?Mc(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(Mc(e[3][0]),16):void 0}}}case"naddr":{let e=ry(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:od.decode(e[0][0]),pubkey:Mc(e[2][0]),kind:parseInt(Mc(e[3][0]),16),relays:e[1]?e[1].map((e=>od.decode(e))):[]}}}case"nrelay":{let e=ry(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:od.decode(e[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Mc(r)};default:throw new Error(`unknown prefix ${t}`)}}function ry(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1],i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function iy(e){return ly("nsec",e)}function oy(e){return ly("npub",jc(e))}function sy(e){return ly("note",jc(e))}function ay(e,t){let n=Ih.toWords(t);return Ih.encode(e,n,ey)}function ly(e,t){return ay(e,t)}function uy(e){return ay("nprofile",dy({0:[jc(e.pubkey)],1:(e.relays||[]).map((e=>sd.encode(e)))}))}function cy(e){let t;return void 0!==e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),ay("nevent",dy({0:[jc(e.id)],1:(e.relays||[]).map((e=>sd.encode(e))),2:e.author?[jc(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function hy(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),ay("naddr",dy({0:[sd.encode(e.identifier)],1:(e.relays||[]).map((e=>sd.encode(e))),2:[jc(e.pubkey)],3:[new Uint8Array(t)]}))}function fy(e){return ay("nrelay",dy({0:[sd.encode(e)]}))}function dy(e){let t=[];return Object.entries(e).reverse().forEach((e=>{let[n,r]=e;r.forEach((e=>{let r=new Uint8Array(e.length+2);r.set([parseInt(n)],0),r.set([e.length],1),r.set(e,2),t.push(r)}))})),Dc(...t)}var py={};async function yy(e,t,n){const r=e instanceof Uint8Array?Mc(e):e,i=by(bc.getSharedSecret(r,"02"+t));let o=Uint8Array.from(Kc(16)),s=sd.encode(n),a=Sf(i,o).encrypt(s);return`${mh.encode(new Uint8Array(a))}?iv=${mh.encode(new Uint8Array(o.buffer))}`}async function gy(e,t,n){const r=e instanceof Uint8Array?Mc(e):e;let[i,o]=n.split("?iv="),s=by(bc.getSharedSecret(r,"02"+t)),a=mh.decode(o),l=mh.decode(i),u=Sf(s,a).decrypt(l);return od.decode(u)}function by(e){return e.slice(1,33)}nd(py,{decrypt:()=>gy,encrypt:()=>yy});nd({},{NIP05_REGEX:()=>my,isValid:()=>Ey,queryProfile:()=>ky,searchDomain:()=>_y,useFetchImplementation:()=>vy});var wy,my=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/;try{wy=fetch}catch{}function vy(e){wy=e}async function _y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const n=`https://${e}/.well-known/nostr.json?name=${t}`,r=await wy(n,{redirect:"error"});return(await r.json()).names}catch(n){return{}}}async function ky(e){const t=e.match(my);if(!t)return null;const[n,r="_",i]=t;try{const e=`https://${i}/.well-known/nostr.json?name=${r}`,t=await(await wy(e,{redirect:"error"})).json();let n=t.names[r];return n?{pubkey:n,relays:t.relays?.[n]}:null}catch(o){return null}}async function Ey(e,t){let n=await ky(t);return!!n&&n.pubkey===e}function xy(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const e=n[r],[i,o,s,a]=e,l={id:o,relays:s?[s]:[]},u=0===r,c=r===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?u?t.root=l:c?t.reply=l:t.mentions.push(l):t.mentions.push(l):t.reply=l:t.root=l}return t}nd({},{parse:()=>xy});nd({},{fetchRelayInformation:()=>Ay,useFetchImplementation:()=>Sy});try{fetch}catch{}function Sy(e){0}async function Ay(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}function Cy(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function Oy(e,t){let n=0;const r=e,i=["nonce",n.toString(),t.toString()];for(r.tags.push(i);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),i[1]=(++n).toString(),r.id=dd(r),Cy(r.id)>=t)break}return r}nd({},{getPow:()=>Cy,minePow:()=>Oy});function Ry(e,t,n,r){return bd({kind:Nd,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function Iy(e){if(e.kind!==Nd)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"===typeof e)),author:n?.[1]}:void 0}function Ny(e){let{skipVerification:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Iy(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(i){return}return r.id===n.id&&(t||wd(r))?r:void 0}nd({},{finishRepostEvent:()=>Ry,getRepostedEvent:()=>Ny,getRepostedEventPointer:()=>Iy});nd({},{NOSTR_URI_REGEX:()=>Ty,parse:()=>Py,test:()=>Ly});var Ty=new RegExp(`nostr:(${ty.source})`);function Ly(e){return"string"===typeof e&&new RegExp(`^${Ty.source}$`).test(e)}function Py(e){const t=e.match(new RegExp(`^${Ty.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:ny(t[1])}}function Uy(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return bd({...e,kind:Td,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function By(e){if(e.kind!==Td)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}nd({},{finishReactionEvent:()=>Uy,getReactedEventPointer:()=>By});nd({},{matchAll:()=>zy,regex:()=>Fy,replaceAll:()=>My});var Fy=()=>new RegExp(`\\b${Ty.source}\\b`,"g");function*zy(e){const t=e.matchAll(Fy());for(const r of t)try{const[e,t]=r;yield{uri:e,value:t,decoded:ny(t),start:r.index,end:r.index+e.length}}catch(n){}}function My(e,t){return e.replaceAll(Fy(),((e,n)=>t({uri:e,value:n,decoded:ny(n)})))}nd({},{channelCreateEvent:()=>jy,channelHideMessageEvent:()=>Hy,channelMessageEvent:()=>Dy,channelMetadataEvent:()=>$y,channelMuteUserEvent:()=>qy});var jy=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return bd({kind:Ud,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},$y=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return bd({kind:Bd,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Dy=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),bd({kind:Fd,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},Hy=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return bd({kind:zd,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},qy=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return bd({kind:Md,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};nd({},{EMOJI_SHORTCODE_REGEX:()=>Ky,matchAll:()=>Wy,regex:()=>Vy,replaceAll:()=>Zy});var Ky=/:(\w+):/,Vy=()=>new RegExp(`\\B${Ky.source}\\B`,"g");function*Wy(e){const t=e.matchAll(Vy());for(const r of t)try{const[e,t]=r;yield{shortcode:e,name:t,start:r.index,end:r.index+e.length}}catch(n){}}function Zy(e,t){return e.replaceAll(Vy(),((e,n)=>t({shortcode:e,name:n})))}var Gy;nd({},{useFetchImplementation:()=>Yy,validateGithub:()=>Qy});try{Gy=fetch}catch{}function Yy(e){Gy=e}async function Qy(e,t,n){try{return await(await Gy(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(r){return!1}}nd({},{decrypt:()=>sg,encrypt:()=>og,getConversationKey:()=>eg,v2:()=>ag});var Jy=1,Xy=65535;function eg(e,t){const n=bc.getSharedSecret(e,"02"+t).subarray(1,33);return Qf(rh,n,"nip44-v2")}function tg(e,t){const n=ed(rh,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function ng(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function rg(e){const t=sd.encode(e),n=t.length,r=function(e){if(!Number.isSafeInteger(e)||e<Jy||e>Xy)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}(n);return Dc(r,t,new Uint8Array(ng(n)-n))}function ig(e,t,n){if(32!==n.length)throw new Error("AAD associated data must be 32 bytes");const r=Dc(n,t);return Yf(rh,e,r)}function og(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kc(32);const{chacha_key:r,chacha_nonce:i,hmac_key:o}=tg(t,n),s=rg(e),a=Df(r,i,s),l=ig(o,a,n);return mh.encode(Dc(new Uint8Array([2]),n,a,l))}function sg(e,t){const{nonce:n,ciphertext:r,mac:i}=function(e){if("string"!==typeof e)throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if("#"===e[0])throw new Error("unknown encryption version");let n;try{n=mh.decode(e)}catch(o){throw new Error("invalid base64: "+o.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(2!==i)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}(e),{chacha_key:o,chacha_nonce:s,hmac_key:a}=tg(t,n);if(!Dh(ig(a,r,n),i))throw new Error("invalid MAC");return function(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<Jy||t>Xy||n.length!==t||e.length!==2+ng(t))throw new Error("invalid padding");return od.decode(n)}(Df(o,s,r))}var ag={utils:{getConversationKey:eg,calcPaddedLen:ng},encrypt:og,decrypt:sg};function lg(e){const{pathname:t,searchParams:n}=new URL(e),r=t,i=n.get("relay"),o=n.get("secret");if(!r||!i||!o)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:o}}async function ug(e,t,n){const r={method:"pay_invoice",params:{invoice:n}},i=await yy(t,e,JSON.stringify(r)),o={kind:yp,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]};return bd(o,t)}nd({},{makeNwcRequestEvent:()=>ug,parseConnectionString:()=>lg});var cg,hg={};nd(hg,{getZapEndpoint:()=>dg,makeZapReceipt:()=>gg,makeZapRequest:()=>pg,useFetchImplementation:()=>fg,validateZapRequest:()=>yg});try{cg=fetch}catch{}function fg(e){cg=e}async function dg(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=Ih.decode(n,1e3),r=Ih.fromWords(e);t=od.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=new URL(`/.well-known/lnurlp/${e}`,`https://${n}`).toString()}}let i=await cg(t),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(t){}return null}function pg(e){let{profile:t,event:n,amount:r,relays:i,comment:o=""}=e;if(!r)throw new Error("amount not given");if(!t)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",t],["amount",r.toString()],["relays",...i]]};return n&&s.tags.push(["e",n]),s}function yg(e){let t;try{t=JSON.parse(e)}catch(o){return"Invalid zap request JSON."}if(!id(t))return"Zap request is not a valid Nostr event.";if(!wd(t))return"Invalid signature on zap request.";let n=t.tags.find((e=>{let[t,n]=e;return"p"===t&&n}));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((e=>{let[t,n]=e;return"e"===t&&n}));if(r&&!r[1].match(/^[a-f0-9]{64}$/))return"Zap request 'e' tag is not valid hex.";let i=t.tags.find((e=>{let[t,n]=e;return"relays"===t&&n}));return i?null:"Zap request doesn't have a 'relays' tag."}function gg(e){let{zapRequest:t,preimage:n,bolt11:r,paidAt:i}=e,o=JSON.parse(t),s=o.tags.filter((e=>{let[t]=e;return"e"===t||"p"===t||"a"===t})),a={kind:9735,created_at:Math.round(i.getTime()/1e3),content:"",tags:[...s,["P",o.pubkey],["bolt11",r],["description",t]]};return n&&a.tags.push(["preimage",n]),a}nd({},{getToken:()=>wg,hashPayload:()=>Sg,unpackEventFromToken:()=>vg,validateEvent:()=>Cg,validateEventKind:()=>kg,validateEventMethodTag:()=>xg,validateEventPayloadTag:()=>Ag,validateEventTimestamp:()=>_g,validateEventUrlTag:()=>Eg,validateToken:()=>mg});var bg="Nostr ";async function wg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;const o={kind:wp,tags:[["u",e],["method",t]],created_at:Math.round((new Date).getTime()/1e3),content:""};i&&o.tags.push(["payload",Sg(i)]);const s=await n(o);return(r?bg:"")+mh.encode(sd.encode(JSON.stringify(s)))}async function mg(e,t,n){const r=await vg(e).catch((e=>{throw e}));return await Cg(r,t,n).catch((e=>{throw e}))}async function vg(e){if(!e)throw new Error("Missing token");e=e.replace(bg,"");const t=od.decode(mh.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function _g(e){return!!e.created_at&&Math.round((new Date).getTime()/1e3)-e.created_at<60}function kg(e){return e.kind===wp}function Eg(e,t){const n=e.tags.find((e=>"u"===e[0]));return!!n&&(n.length>0&&n[1]===t)}function xg(e,t){const n=e.tags.find((e=>"method"===e[0]));return!!n&&(n.length>0&&n[1].toLowerCase()===t.toLowerCase())}function Sg(e){return Mc(rh(sd.encode(JSON.stringify(e))))}function Ag(e,t){const n=e.tags.find((e=>"payload"===e[0]));if(!n)return!1;const r=Sg(t);return n.length>0&&n[1]===r}async function Cg(e,t,n,r){if(!wd(e))throw new Error("Invalid nostr event, signature invalid");if(!kg(e))throw new Error("Invalid nostr event, kind invalid");if(!_g(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Eg(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!xg(e,n))throw new Error("Invalid nostr event, method tag invalid");if(Boolean(r)&&"object"===typeof r&&Object.keys(r).length>0&&!Ag(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var Og=__webpack_require__(821),Rg=__webpack_require__(522);function Ig(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Ng(e){if(!((t=e)instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(r.length>0&&!r.includes(e.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${e.length}`)}function Tg(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Ig(e.outputLen),Ig(e.blockLen)}function Lg(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Pg(e,t){Ng(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ug="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const Bg=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Fg=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function zg(e){return"string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Ng(e),e}class Mg{clone(){return this._cloneInto()}}function jg(e){const t=t=>e().update(zg(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function $g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Ug&&"function"===typeof Ug.getRandomValues)return Ug.getRandomValues(new Uint8Array(e));if(Ug&&"function"===typeof Ug.randomBytes)return Ug.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const Dg=(e,t,n)=>e&t^e&n^t&n;class Hg extends Mg{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Bg(this.buffer)}update(e){Lg(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=zg(e)).length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s!==r)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Bg(e);for(;r<=i-o;o+=r)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lg(this),Pg(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let c=o;c<r;c++)t[c]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),l=r?4:0,u=r?0:4;e.setUint32(t+l,s,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=Bg(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)s.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}const qg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kg=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vg=new Uint32Array(64);class Wg extends Hg{constructor(){super(64,32,8,!1),this.A=0|Kg[0],this.B=0|Kg[1],this.C=0|Kg[2],this.D=0|Kg[3],this.E=0|Kg[4],this.F=0|Kg[5],this.G=0|Kg[6],this.H=0|Kg[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let h=0;h<16;h++,t+=4)Vg[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=Vg[h-15],t=Vg[h-2],n=Fg(e,7)^Fg(e,18)^e>>>3,r=Fg(t,17)^Fg(t,19)^t>>>10;Vg[h]=r+Vg[h-7]+n+Vg[h-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let h=0;h<64;h++){const e=u+(Fg(s,6)^Fg(s,11)^Fg(s,25))+((c=s)&a^~c&l)+qg[h]+Vg[h]|0,t=(Fg(n,2)^Fg(n,13)^Fg(n,22))+Dg(n,r,i)|0;u=l,l=a,a=s,s=o+e|0,o=i,i=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,l,u)}roundClean(){Vg.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Zg=jg((()=>new Wg));class Gg extends Mg{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Tg(e);const n=zg(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Lg(this),this.iHash.update(e),this}digestInto(e){Lg(this),Ng(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yg=(e,t,n)=>new Gg(e,t).update(n).digest();Yg.create=(e,t)=>new Gg(e,t);const Qg=BigInt(0),Jg=BigInt(1),Xg=BigInt(2);function eb(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function tb(e){if(!eb(e))throw new Error("Uint8Array expected")}function nb(e,t){if("boolean"!==typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const rb=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ib(e){tb(e);let t="";for(let n=0;n<e.length;n++)t+=rb[e[n]];return t}function ob(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function sb(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const ab={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function lb(e){return e>=ab._0&&e<=ab._9?e-ab._0:e>=ab._A&&e<=ab._F?e-(ab._A-10):e>=ab._a&&e<=ab._f?e-(ab._a-10):void 0}function ub(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const t=lb(e.charCodeAt(o)),n=lb(e.charCodeAt(o+1));if(void 0===t||void 0===n){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[i]=16*t+n}return r}function cb(e){return sb(ib(e))}function hb(e){return tb(e),sb(ib(Uint8Array.from(e).reverse()))}function fb(e,t){return ub(e.toString(16).padStart(2*t,"0"))}function db(e,t){return fb(e,t).reverse()}function pb(e,t,n){let r;if("string"===typeof t)try{r=ub(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else{if(!eb(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"===typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function yb(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];tb(t),e+=t.length}const t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}const gb=e=>"bigint"===typeof e&&Qg<=e;function bb(e,t,n){return gb(e)&&gb(t)&&gb(n)&&t<=e&&e<n}function wb(e,t,n,r){if(!bb(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function mb(e){let t;for(t=0;e>Qg;e>>=Jg,t+=1);return t}const vb=e=>(Xg<<BigInt(e-1))-Jg,_b=e=>new Uint8Array(e),kb=e=>Uint8Array.from(e);function Eb(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=_b(e),i=_b(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},a=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(i,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_b();i=a(kb([0]),e),r=a(),0!==e.length&&(i=a(kb([1]),e),r=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return yb(...n)};return(e,t)=>{let n;for(s(),l(e);!(n=t(u()));)l();return s(),n}}const xb={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||eb(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Sb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const i=xb[n];if("function"!==typeof i)throw new Error(`Invalid validator "${n}", expected function`);const o=e[t];if((!r||void 0!==o)&&!i(o,e))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}function Ab(e){const t=new WeakMap;return function(n){const r=t.get(n);if(void 0!==r)return r;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];const a=e(n,...o);return t.set(n,a),a}}const Cb=BigInt(0),Ob=BigInt(1),Rb=BigInt(2),Ib=BigInt(3),Nb=BigInt(4),Tb=BigInt(5),Lb=BigInt(8);BigInt(9),BigInt(16);function Pb(e,t){const n=e%t;return n>=Cb?n:t+n}function Ub(e,t,n){if(n<=Cb||t<Cb)throw new Error("Expected power/modulo > 0");if(n===Ob)return Cb;let r=Ob;for(;t>Cb;)t&Ob&&(r=r*e%n),e=e*e%n,t>>=Ob;return r}function Bb(e,t,n){let r=e;for(;t-- >Cb;)r*=r,r%=n;return r}function Fb(e,t){if(e===Cb||t<=Cb)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Pb(e,t),r=t,i=Cb,o=Ob,s=Ob,a=Cb;for(;n!==Cb;){const e=r/n,t=r%n,l=i-s*e,u=o-a*e;r=n,n=t,i=s,o=a,s=l,a=u}if(r!==Ob)throw new Error("invert: does not exist");return Pb(i,t)}function zb(e){if(e%Nb===Ib){const t=(e+Ob)/Nb;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Lb===Tb){const t=(e-Tb)/Lb;return function(e,n){const r=e.mul(n,Rb),i=e.pow(r,t),o=e.mul(n,i),s=e.mul(e.mul(o,Rb),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Ob)/Rb;let n,r,i;for(n=e-Ob,r=0;n%Rb===Cb;n/=Rb,r++);for(i=Rb;i<e&&Ub(i,t,e)!==e-Ob;i++);if(1===r){const t=(e+Ob)/Nb;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const o=(n+Ob)/Rb;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),n),u=e.pow(s,o),c=e.pow(s,n);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,Ob<<BigInt(a-t-1));l=e.sqr(n),u=e.mul(u,n),c=e.mul(c,l),a=t}return u}}(e)}const Mb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jb(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function $b(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=Cb)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=jb(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=zb(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:vb(i),ZERO:Cb,ONE:Ob,create:t=>Pb(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Cb<=t&&t<e},is0:e=>e===Cb,isOdd:e=>(e&Ob)===Ob,neg:t=>Pb(-t,e),eql:(e,t)=>e===t,sqr:t=>Pb(t*t,e),add:(t,n)=>Pb(t+n,e),sub:(t,n)=>Pb(t-n,e),mul:(t,n)=>Pb(t*n,e),pow:(e,t)=>function(e,t,n){if(n<Cb)throw new Error("Expected power > 0");if(n===Cb)return e.ONE;if(n===Ob)return t;let r=e.ONE,i=t;for(;n>Cb;)n&Ob&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Ob;return r}(a,e,t),div:(t,n)=>Pb(t*Fb(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Fb(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?db(e,o):fb(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return n?hb(e):cb(e)}});return Object.freeze(a)}function Db(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Hb(e){const t=Db(e);return t+Math.ceil(t/2)}const qb=BigInt(0),Kb=BigInt(1),Vb=new WeakMap,Wb=new WeakMap;function Zb(e){return Sb(e.Fp,Mb.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Sb(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jb(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Gb(e){void 0!==e.lowS&&nb("lowS",e.lowS),void 0!==e.prehash&&nb("prehash",e.prehash)}const{Ph:Yb,aT:Qb}=t,Jb={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_tlv:{encode:(e,t)=>{const{Err:n}=Jb;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=ob(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?ob(i.length/2|128):"";return`${ob(e)}${o}${i}${t}`},decode(e,t){const{Err:n}=Jb;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++];let o=0;if(!!(128&i)){const e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const s=t.subarray(r,r+e);if(s.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of s)o=o<<8|t;if(r+=e,o<128)throw new n("tlv.decode(long): not minimal encoding")}else o=i;const s=t.subarray(r,r+o);if(s.length!==o)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=Jb;if(e<Xb)throw new t("integer: negative integers are not allowed");let n=ob(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=Jb;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return Yb(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Jb,i="string"===typeof e?Qb(e):e;tb(i);const{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("Invalid signature: left bytes after parsing");const{v:a,l:l}=r.decode(2,o),{v:u,l:c}=r.decode(2,l);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Jb,r=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,r)}},Xb=BigInt(0),ew=BigInt(1),tw=(BigInt(2),BigInt(3));BigInt(4);function nw(e){const t=function(e){const t=Zb(e);Sb(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=$b(t.n,t.nBitLength),i=t.toBytes||((e,t,r)=>{const i=t.toAffine();return yb(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),o=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function s(e){const{a:r,b:i}=t,o=n.sqr(e),s=n.mul(o,e);return n.add(n.add(s,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:o}=t;if(n&&"bigint"!==typeof e){if(eb(e)&&(e=ib(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let s;try{s="bigint"===typeof e?e:cb(pb("private key",e,r))}catch(a){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=Pb(s,o)),wb("private key",s,ew,o),s}function l(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}const u=Ab(((e,t)=>{const{px:r,py:i,pz:o}=e;if(n.eql(o,n.ONE))return{x:r,y:i};const s=e.is0();null==t&&(t=s?n.ONE:n.inv(o));const a=n.mul(r,t),l=n.mul(i,t),u=n.mul(o,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:l}})),c=Ab((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const o=n.sqr(i),a=s(r);if(!n.eql(o,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(o(pb("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(a(e))}static msm(e,t){return function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const i=mb(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,s=(1<<o)-1,a=new Array(s+1).fill(e.ZERO),l=Math.floor((t.BITS-1)/o)*o;let u=e.ZERO;for(let c=l;c>=0;c-=o){a.fill(e.ZERO);for(let e=0;e<r.length;e++){const t=r[e],i=Number(t>>BigInt(c)&BigInt(s));a[i]=a[i].add(n[e])}let t=e.ZERO;for(let n=a.length-1,r=e.ZERO;n>0;n--)r=r.add(a[n]),t=t.add(r);if(u=u.add(t),0!==c)for(let e=0;e<o;e++)u=u.double()}return u}(h,r,e,t)}_setWindowSize(e){d.setWindowSize(this,e)}assertValidity(){c(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:t,py:r,pz:i}=this,{px:o,py:s,pz:a}=e,u=n.eql(n.mul(t,a),n.mul(o,i)),c=n.eql(n.mul(r,a),n.mul(s,i));return u&&c}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,tw),{px:o,py:s,pz:a}=this;let l=n.ZERO,u=n.ZERO,c=n.ZERO,f=n.mul(o,o),d=n.mul(s,s),p=n.mul(a,a),y=n.mul(o,s);return y=n.add(y,y),c=n.mul(o,a),c=n.add(c,c),l=n.mul(e,c),u=n.mul(i,p),u=n.add(l,u),l=n.sub(d,u),u=n.add(d,u),u=n.mul(l,u),l=n.mul(y,l),c=n.mul(i,c),p=n.mul(e,p),y=n.sub(f,p),y=n.mul(e,y),y=n.add(y,c),c=n.add(f,f),f=n.add(c,f),f=n.add(f,p),f=n.mul(f,y),u=n.add(u,f),p=n.mul(s,a),p=n.add(p,p),f=n.mul(p,y),l=n.sub(l,f),c=n.mul(p,d),c=n.add(c,c),c=n.add(c,c),new h(l,u,c)}add(e){l(e);const{px:r,py:i,pz:o}=this,{px:s,py:a,pz:u}=e;let c=n.ZERO,f=n.ZERO,d=n.ZERO;const p=t.a,y=n.mul(t.b,tw);let g=n.mul(r,s),b=n.mul(i,a),w=n.mul(o,u),m=n.add(r,i),v=n.add(s,a);m=n.mul(m,v),v=n.add(g,b),m=n.sub(m,v),v=n.add(r,o);let _=n.add(s,u);return v=n.mul(v,_),_=n.add(g,w),v=n.sub(v,_),_=n.add(i,o),c=n.add(a,u),_=n.mul(_,c),c=n.add(b,w),_=n.sub(_,c),d=n.mul(p,v),c=n.mul(y,w),d=n.add(c,d),c=n.sub(b,d),d=n.add(b,d),f=n.mul(c,d),b=n.add(g,g),b=n.add(b,g),w=n.mul(p,w),v=n.mul(y,v),b=n.add(b,w),w=n.sub(g,w),w=n.mul(p,w),v=n.add(v,w),g=n.mul(b,v),f=n.add(f,g),g=n.mul(_,v),c=n.mul(m,c),c=n.sub(c,g),g=n.mul(m,b),d=n.mul(_,d),d=n.add(d,g),new h(c,f,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return d.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){wb("scalar",e,Xb,t.n);const r=h.ZERO;if(e===Xb)return r;if(e===ew)return this;const{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:a,k2:l}=i.splitScalar(e),u=r,c=r,f=this;for(;s>Xb||l>Xb;)s&ew&&(u=u.add(f)),l&ew&&(c=c.add(f)),f=f.double(),s>>=ew,l>>=ew;return o&&(u=u.negate()),a&&(c=c.negate()),c=new h(n.mul(c.px,i.beta),c.py,c.pz),u.add(c)}multiply(e){const{endo:r,n:i}=t;let o,s;if(wb("scalar",e,ew,i),r){const{k1neg:t,k1:i,k2neg:a,k2:l}=r.splitScalar(e);let{p:u,f:c}=this.wNAF(i),{p:f,f:p}=this.wNAF(l);u=d.constTimeNegate(t,u),f=d.constTimeNegate(a,f),f=new h(n.mul(f.px,r.beta),f.py,f.pz),o=u.add(f),s=c.add(p)}else{const{p:t,f:n}=this.wNAF(e);o=t,s=n}return h.normalizeZ([o,s])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,i=(e,t)=>t!==Xb&&t!==ew&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===ew)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===ew?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return nb("isCompressed",e),this.assertValidity(),i(h,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return nb("isCompressed",e),ib(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,d=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},i=e=>(r(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>qb;)n&Kb&&(r=r.add(i)),i=i.double(),n>>=Kb;return r},precomputeWindow(e,t){const{windows:n,windowSize:r}=i(t),o=[];let s=e,a=s;for(let i=0;i<n;i++){a=s,o.push(a);for(let e=1;e<r;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,r,o){const{windows:s,windowSize:a}=i(t);let l=e.ZERO,u=e.BASE;const c=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let i=Number(o&c);o>>=f,i>a&&(i-=h,o+=Kb);const s=t,d=t+Math.abs(i)-1,p=e%2!==0,y=i<0;0===i?u=u.add(n(p,r[s])):l=l.add(n(y,r[d]))}return{p:l,f:u}},wNAFCached(e,t,n){const r=Wb.get(e)||1;let i=Vb.get(e);return i||(i=this.precomputeWindow(e,r),1!==r&&Vb.set(e,n(i))),this.wNAF(r,i,t)},setWindowSize(e,t){r(t),Wb.set(e,t),Vb.delete(e)}}}(h,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(e){return bb(e,ew,t.n)}}}function rw(e){const t=function(e){const t=Zb(e);return Sb(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(e){return Pb(e,r)}function a(e){return Fb(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:h}=nw({...t,toBytes(e,t,r){const i=t.toAffine(),o=n.toBytes(i.x),s=yb;return nb("isCompressed",r),r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],s=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===o&&4===r){return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=cb(s);if(!bb(e,ew,n.ORDER))throw new Error("Point is not on curve");const t=c(e);let i;try{i=n.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("Point is not on curve"+e)}return 1===(1&r)!==((i&ew)===ew)&&(i=n.neg(i)),{x:e,y:i}}}}),f=e=>ib(fb(e,t.nByteLength));function d(e){return e>r>>ew}const p=(e,t,n)=>cb(e.slice(t,n));class y{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=pb("compactSignature",e,2*n),new y(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Jb.toSig(pb("DER",e));return new y(t,n)}assertValidity(){wb("r",this.r,ew,r),wb("s",this.s,ew,r)}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:o}=this,u=m(pb("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const c=2===o||3===o?r+t.n:r;if(c>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&o)?"02":"03",d=l.fromHex(h+f(c)),p=a(c),y=s(-u*p),g=s(i*p),b=l.BASE.multiplyAndAddUnsafe(d,y,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return ub(this.toDERHex())}toDERHex(){return Jb.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ub(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const g={isValidPrivateKey(e){try{return u(e),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Hb(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.length,i=Db(t),o=Hb(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const s=Pb(n?cb(e):hb(e),t-Ob)+Ob;return n?db(s,i):fb(s,i)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function b(e){const t=eb(e),n="string"===typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof l}const w=t.bits2int||function(e){const n=cb(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},m=t.bits2int_modN||function(e){return s(w(e))},v=vb(t.nBitLength);function _(e){return wb(`num < 2^${t.nBitLength}`,e,Xb,v),fb(e,t.nByteLength)}function k(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:c}=t;let{lowS:f,prehash:p,extraEntropy:g}=i;null==f&&(f=!0),e=pb("msgHash",e),Gb(i),p&&(e=pb("prehashed msgHash",o(e)));const b=m(e),v=u(r),k=[_(v),_(b)];if(null!=g&&!1!==g){const e=!0===g?c(n.BYTES):g;k.push(pb("extraEntropy",e))}const x=yb(...k),S=b;return{seed:x,k2sig:function(e){const t=w(e);if(!h(t))return;const n=a(t),r=l.BASE.multiply(t).toAffine(),i=s(r.x);if(i===Xb)return;const o=s(n*s(S+i*v));if(o===Xb)return;let u=(r.x===i?0:2)|Number(r.y&ew),c=o;return f&&d(o)&&(c=function(e){return d(e)?s(-e):e}(o),u^=1),new y(i,c,u)}}}const E={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:i,k2sig:o}=k(e,n,r),s=t;return Eb(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;const o=e;if(n=pb("msgHash",n),r=pb("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");Gb(i);const{lowS:u,prehash:c}=i;let h,f;try{if("string"===typeof o||eb(o))try{h=y.fromDER(o)}catch(k){if(!(k instanceof Jb.Err))throw k;h=y.fromCompact(o)}else{if("object"!==typeof o||"bigint"!==typeof o.r||"bigint"!==typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;h=new y(e,t)}}f=l.fromHex(r)}catch(E){if("PARSE"===E.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&h.hasHighS())return!1;c&&(n=t.hash(n));const{r:d,s:p}=h,g=m(n),b=a(p),w=s(g*b),v=s(d*b),_=l.BASE.multiplyAndAddUnsafe(f,w,v)?.toAffine();return!!_&&s(_.x)===d},ProjectivePoint:l,Signature:y,utils:g}}function iw(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Yg(e,t,function(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];Ng(t),e+=t.length}const t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}(...r))},randomBytes:$g}}const ow=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aw=BigInt(1),lw=BigInt(2),uw=(e,t)=>(e+t/lw)/t;function cw(e){const t=ow,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,c=u*u*e%t,h=Bb(c,n,t)*c%t,f=Bb(h,n,t)*c%t,d=Bb(f,lw,t)*u%t,p=Bb(d,i,t)*d%t,y=Bb(p,o,t)*p%t,g=Bb(y,a,t)*y%t,b=Bb(g,l,t)*g%t,w=Bb(b,a,t)*y%t,m=Bb(w,n,t)*c%t,v=Bb(m,s,t)*p%t,_=Bb(v,r,t)*u%t,k=Bb(_,lw,t);if(!hw.eql(hw.sqr(k),e))throw new Error("Cannot find square root");return k}const hw=$b(ow,void 0,void 0,{sqrt:cw}),fw=function(e,t){const n=t=>rw({...e,...iw(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:hw,n:sw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=sw,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-aw*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),a=uw(o*e,t),l=uw(-r*e,t);let u=Pb(e-a*n-l*i,t),c=Pb(-a*r-l*o,t);const h=u>s,f=c>s;if(h&&(u=t-u),f&&(c=t-c),u>s||c>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:f,k2:c}}}},Zg),dw=BigInt(0),pw={};function yw(e){let t=pw[e];if(void 0===t){const n=Zg(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=yb(n,n),pw[e]=t}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Zg(yb(t,...r))}const gw=e=>e.toRawBytes(!0).slice(1),bw=e=>fb(e,32),ww=e=>Pb(e,ow),mw=e=>Pb(e,sw),vw=fw.ProjectivePoint;function _w(e){let t=fw.utils.normPrivateKeyToScalar(e),n=vw.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:mw(-t),bytes:gw(n)}}function kw(e){wb("x",e,aw,ow);const t=ww(e*e);let n=cw(ww(t*e+BigInt(7)));n%lw!==dw&&(n=ww(-n));const r=new vw(e,n,aw);return r.assertValidity(),r}const Ew=cb;function xw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mw(Ew(yw("BIP0340/challenge",...t)))}function Sw(e){return _w(e).bytes}function Aw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$g(32);const r=pb("message",e),{bytes:i,scalar:o}=_w(t),s=pb("auxRand",n,32),a=bw(o^Ew(yw("BIP0340/aux",s))),l=yw("BIP0340/nonce",a,i,r),u=mw(Ew(l));if(u===dw)throw new Error("sign failed: k is zero");const{bytes:c,scalar:h}=_w(u),f=xw(c,i,r),d=new Uint8Array(64);if(d.set(c,0),d.set(bw(mw(h+f*o)),32),!Cw(d,r,i))throw new Error("sign: Invalid signature produced");return d}function Cw(e,t,n){const r=pb("signature",e,64),i=pb("message",t),o=pb("publicKey",n,32);try{const e=kw(Ew(o)),t=Ew(r.subarray(0,32));if(!bb(t,aw,ow))return!1;const n=Ew(r.subarray(32,64));if(!bb(n,aw,sw))return!1;const s=xw(bw(t),gw(e),i),a=((e,t,n)=>vw.BASE.multiplyAndAddUnsafe(e,t,n))(e,n,mw(-s));return!(!a||!a.hasEvenY()||a.toAffine().x!==t)}catch(s){return!1}}const Ow=(()=>({getPublicKey:Sw,sign:Aw,verify:Cw,utils:{randomPrivateKey:fw.utils.randomPrivateKey,lift_x:kw,pointToBytes:gw,numberToBytesBE:fb,bytesToNumberBE:cb,taggedHash:yw,mod:Pb}}))();var Rw=__webpack_require__(245);__webpack_require__(558);function Iw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"write";if(!e.outboxTracker)return;const r=e.outboxTracker.data.get(t);return r?"write"===n?r.writeRelays:r.readRelays:void 0}function Nw(e,t,n){let{count:r,preferredRelays:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r??=2,i??=new Set;const o=e.pool,s=o.connectedRelays();s.forEach((e=>{i.add(e.url)}));const a=new Map,{pubkeysToRelays:l,authorsMissingRelays:u}=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"read";const r=new Map,i=new Set;return t.forEach((t=>{const o=Iw(e,t,n);o&&o.size>0?(o.forEach((e=>{(r.get(e)||new Set).add(t)})),r.set(t,o)):i.add(t)})),{pubkeysToRelays:r,authorsMissingRelays:i}}(e,t,n),c=function(e,t){const n=new Map;return t.forEach((t=>{const r=Iw(e,t);r&&r.forEach((e=>{const t=n.get(e)||0;n.set(e,t+1)}))})),Array.from(n.entries()).sort(((e,t)=>t[1]-e[1])).map((e=>e[0]))}(e,t),h=(e,t)=>{const n=a.get(t)||[];n.push(e),a.set(t,n)};for(const[f,d]of l.entries()){let e=r;for(const t of s)d.has(t.url)&&(h(f,t.url),e--);for(const t of d)a.has(t)&&(h(f,t),e--);if(!(e<=0))for(const t of c){if(e<=0)break;d.has(t)&&(h(f,t),e--)}}for(const f of u)o.permanentAndConnectedRelays().forEach((e=>{const t=a.get(e.url)||[];t.push(f),a.set(e.url,t)}));return a}function Tw(e){try{return Lw(e)}catch{return}}function Lw(e){let t=function(e,t){"string"!==typeof(t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t}).defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`);if(e=e.trim(),/^data:/i.test(e))return zw(e,t);if(Fw(e))return e;const n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");t.forceHttp&&"https:"===r.protocol&&(r.protocol="http:");t.forceHttps&&"http:"===r.protocol&&(r.protocol="https:");t.stripAuthentication&&(r.username="",r.password="");t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,""));if(r.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,n="";for(;;){const i=e.exec(r.pathname);if(!i)break;const o=i[0],s=i.index;n+=r.pathname.slice(t,s).replace(/\/{2,}/g,"/"),n+=o,t=s+o.length}n+=r.pathname.slice(t,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=n}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]);if(Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=r.pathname.split("/");const n=e[e.length-1];Uw(n,t.removeDirectoryIndex)&&(e=e.slice(0,-1),r.pathname=e.slice(1).join("/")+"/")}r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,"")));if(Array.isArray(t.removeQueryParameters))for(const o of[...r.searchParams.keys()])Uw(o,t.removeQueryParameters)&&r.searchParams.delete(o);Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(r.search="");if(Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const o of[...r.searchParams.keys()])Uw(o,t.keepQueryParameters)||r.searchParams.delete(o);if(t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));t.removeExplicitPort&&r.port&&(r.port="");const i=e;e=r.toString(),t.removeSingleSlash||"/"!==r.pathname||i.endsWith("/")||""!==r.hash||(e=e.replace(/\/$/,""));(t.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,""));n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//"));t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,""));return e}(e.toLowerCase(),{stripAuthentication:!1,stripWWW:!1,stripHash:!0});return t.endsWith("/")||(t+="/"),t}function Pw(e){const t=new Set;for(const n of e)try{t.add(Lw(n))}catch{}return Array.from(t)}var Uw=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),Bw=new Set(["https:","http:","file:"]),Fw=e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!Bw.has(t)}catch{return!1}},zw=(e,t)=>{let{stripHash:n}=t;const r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let i=r.groups?.type??"",o=r.groups?.data??"",s=r.groups?.hash??"";const a=i.split(";");s=n?"":s;let l=!1;"base64"===a[a.length-1]&&(a.pop(),l=!0);const u=a.shift()?.toLowerCase()??"",c=[...a.map((e=>{let[t,n=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(n=n.toLowerCase(),"us-ascii"===n)?"":`${t}${n?`=${n}`:""}`})).filter(Boolean)];return l&&c.push("base64"),(c.length>0||u&&"text/plain"!==u)&&c.unshift(u),`data:${c.join(";")},${l?o.trim():o}${s?`#${s}`:""}`};var Mw=class{ndkRelay;ws;_status;timeoutMs;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;connectTimeout;reconnectTimeout;ndk;openSubs=(()=>new Map)();openCountRequests=(()=>new Map)();openEventPublishes=(()=>new Map)();serial=0;baseEoseTimeout=4400;constructor(e,t){this.ndkRelay=e,this._status=1;const n=Math.floor(1e3*Math.random());this.debug=this.ndkRelay.debug.extend("connectivity"+n),this.ndk=t}async connect(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(1!==this._status||this.reconnectTimeout)this.debug("Relay requested to be connected but was in state %s or it had a reconnect timeout",this._status);else{this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),e??=this.timeoutMs,!this.timeoutMs&&e&&(this.timeoutMs=e),this.timeoutMs&&(this.connectTimeout=setTimeout((()=>this.onConnectionError(t)),this.timeoutMs));try{this.updateConnectionStats.attempt(),1===this._status?this._status=4:this._status=2,this.ws=new WebSocket(this.ndkRelay.url),this.ws.onopen=this.onConnect.bind(this),this.ws.onclose=this.onDisconnect.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this)}catch(n){throw this.debug(`Failed to connect to ${this.ndkRelay.url}`,n),this._status=1,t?this.handleReconnection():this.ndkRelay.emit("delayed-connect",1728e5),n}}}disconnect(){this._status=0;try{this.ws?.close()}catch(e){this.debug("Failed to disconnect",e),this._status=1}}onConnectionError(e){this.debug(`Error connecting to ${this.ndkRelay.url}`,this.timeoutMs),e&&!this.reconnectTimeout&&this.handleReconnection()}onConnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.updateConnectionStats.connected(),this._status=5,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")}onDisconnect(){this.updateConnectionStats.disconnected(),this._status=1}onMessage(e){try{const t=JSON.parse(e.data),[n,r,...i]=t;switch(n){case"EVENT":{const e=this.openSubs.get(r),n=t[2];return e?void e.onevent(n):void this.debug(`Received event for unknown subscription ${r}`)}case"COUNT":{const e=t[2],n=this.openCountRequests.get(r);return void(n&&(n.resolve(e.count),this.openCountRequests.delete(r)))}case"EOSE":{const e=this.openSubs.get(r);if(!e)return;return void e.oneose()}case"OK":{const e=t[2],n=t[3],i=this.openEventPublishes.get(r),o=i?.pop();return i&&o?(e?o.resolve(n):o.reject(new Error(n)),void(0===i.length?this.openEventPublishes.delete(r):this.openEventPublishes.set(r,i))):void this.debug("Received OK for unknown event publish",r)}case"CLOSED":{const e=this.openSubs.get(r);if(!e)return;return void e.onclosed(t[2])}case"NOTICE":return void this.onNotice(t[1]);case"AUTH":return void this.onAuthRequested(t[1])}}catch(t){return void this.debug(`Error parsing message from ${this.ndkRelay.url}: ${t.message}`,t?.stack)}}async onAuthRequested(e){const t=this.ndkRelay.authPolicy??this.ndk?.relayAuthDefaultPolicy;if(this.debug("Relay requested authentication",{havePolicy:!!t}),7!==this._status)if(this._status=6,t){if(this._status>=5){let r;this._status=7;try{r=await t(this.ndkRelay,e)}catch(n){this.debug("Authentication policy threw an error",n),r=!1}if(this.debug("Authentication policy returned",!!r),r instanceof _m||!0===r){r instanceof _m&&await this.auth(r);const t=async()=>{if(this._status>=5&&this._status<8){const t=new _m(this.ndk);t.kind=22242,t.tags=[["relay",this.ndkRelay.url],["challenge",e]],await t.sign(),this.auth(t).then((()=>{this._status=8,this.ndkRelay.emit("authed"),this.debug("Authentication successful")})).catch((e=>{this._status=6,this.ndkRelay.emit("auth:failed",e),this.debug("Authentication failed",e)}))}else this.debug("Authentication failed, it changed status, status is %d",this._status)};!0===r&&(this.ndk?.signer?t().catch((e=>{console.error("Error authenticating",e)})):(this.debug("No signer available for authentication localhost"),this.ndk?.once("signer:ready",t))),this._status=5,this.ndkRelay.emit("authed")}}}else this.ndkRelay.emit("auth",e);else this.debug("Already authenticating, ignoring")}onError(e){this.debug(`WebSocket error on ${this.ndkRelay.url}:`,e)}get status(){return this._status}isAvailable(){return 5===this._status}isFlapping(){const e=this._connectionStats.durations;if(e.length%3!==0)return!1;const t=e.reduce(((e,t)=>e+t),0)/e.length,n=e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t),0)/e.length;return Math.sqrt(n)<1e3}async onNotice(e){this.ndkRelay.emit("notice",e)}handleReconnection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.reconnectTimeout)return;if(this.isFlapping())return this.ndkRelay.emit("flapping",this._connectionStats),void(this._status=3);const t=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):5e3*(this._connectionStats.attempts+1);this.reconnectTimeout=setTimeout((()=>{this.reconnectTimeout=void 0,this._status=2,this.connect().catch((t=>{e<5?setTimeout((()=>{this.handleReconnection(e+1)}),1e3*(e+1)^4):this.debug("Reconnect failed")}))}),t),this.ndkRelay.emit("delayed-connect",t),this.debug("Reconnecting in",t),this._connectionStats.nextReconnectAt=Date.now()+t}async send(e){this._status>=5&&this.ws?.readyState===WebSocket.OPEN?this.ws?.send(e):this.debug(`Not connected to ${this.ndkRelay.url} (%d), not sending message ${e}`,this._status)}async auth(e){const t=new Promise(((t,n)=>{const r=this.openEventPublishes.get(e.id)??[];r.push({resolve:t,reject:n}),this.openEventPublishes.set(e.id,r)}));return this.send('["AUTH",'+JSON.stringify(e.rawEvent())+"]"),t}async publish(e){const t=new Promise(((t,n)=>{const r=this.openEventPublishes.get(e.id)??[];r.length>0&&console.warn("Duplicate event publishing detected, you are publishing event "+e.id+" twice"),r.push({resolve:t,reject:n}),this.openEventPublishes.set(e.id,r)}));return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=t?.id||"count:"+this.serial,r=new Promise(((e,t)=>{this.openCountRequests.set(n,{resolve:e,reject:t})}));return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}close(e,t){this.send('["CLOSE","'+e+'"]');const n=this.openSubs.get(e);this.openSubs.delete(e),n&&n.onclose(t)}req(e){this.send('["REQ","'+e.subId+'",'+JSON.stringify(e.executeFilters).substring(1)),this.openSubs.set(e.subId,e)}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++,this._connectionStats.connectedAt=Date.now()}};get connectionStats(){return this._connectionStats}get url(){return this.ndkRelay.url}get connected(){return this._status>=5&&this.ws?.readyState===WebSocket.OPEN}},jw=class{ndkRelay;debug;constructor(e){this.ndkRelay=e,this.debug=e.debug.extend("publisher")}async publish(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;const r=()=>new Promise(((t,n)=>{try{this.publishEvent(e).then((n=>{this.ndkRelay.emit("published",e),e.emit("relay:published",this.ndkRelay),t(!0)})).catch(n)}catch(r){n(r)}})),i=new Promise(((e,r)=>{t=setTimeout((()=>{t=void 0,r(new Error("Timeout: "+n+"ms"))}),n)})),o=()=>{r().then((e=>s(e))).catch((e=>a(e)))};let s,a;const l=t=>{throw this.ndkRelay.debug("Publish failed",t,e.id),this.ndkRelay.emit("publish:failed",e,t),e.emit("relay:publish:failed",this.ndkRelay,t),t},u=()=>{t&&clearTimeout(t),this.ndkRelay.removeListener("connect",o)};return this.ndkRelay.status>=5?Promise.race([r(),i]).catch(l).finally(u):Promise.race([new Promise(((e,t)=>{s=e,a=t,this.ndkRelay.once("connect",o)})),i]).catch(l).finally(u)}async publishEvent(e){return this.ndkRelay.connectivity.publish(e.rawEvent())}};function $w(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((e=>{let[n,r]=e;Array.isArray(r)?void 0===t[n]?t[n]=[...r]:t[n]=Array.from(new Set([...t[n],...r])):t[n]=r}))})),t}var Dw=class{fingerprint;items=(()=>new Map)();topSubscriptionManager;debug;status=0;onClose;relay;eosed=!1;itemsToRemoveAfterEose=[];executionTimer;fireTime;delayType;executeFilters;eventIds=(()=>new Set)();constructor(e,t){this.relay=e;const n=Math.random().toString(36).substring(7);this.debug=e.debug.extend("subscription-"+n),this.fingerprint=t||Math.random().toString(36).substring(7)}_subId;get subId(){return this._subId||(this._subId=this.fingerprint.slice(0,15)),this._subId}subIdParts=(()=>new Set)();addSubIdPart(e){this.subIdParts.add(e)}addItem(e,t){if(!this.items.has(e.internalId))switch(e.on("close",this.removeItem.bind(this,e)),this.items.set(e.internalId,{subscription:e,filters:t}),3!==this.status&&e.subId&&(!this._subId||this._subId.length<48)&&(0!==this.status&&1!==this.status||this.addSubIdPart(e.subId)),this.status){case 0:case 1:this.evaluateExecutionPlan(e);break;case 3:break;case 4:throw this.debug("Subscription is closed, cannot add new items"),new Error("Cannot add new items to a closed subscription")}}removeItem(e){this.eosed?(this.items.delete(e.internalId),0===this.items.size&&this.close()):this.itemsToRemoveAfterEose.push(e.internalId)}close(){if(4===this.status)return;const e=this.status;if(this.status=4,3===e)try{this.relay.close(this.subId)}catch(t){this.debug("Error closing subscription",t,this)}else this.debug("Subscription wanted to close but it wasn't running, this is probably ok",{subId:this.subId,prevStatus:e,sub:this});this.cleanup()}cleanup(){this.executionTimer&&clearTimeout(this.executionTimer),this.relay.off("ready",this.executeOnRelayReady),this.relay.off("authed",this.reExecuteAfterAuth),this.onClose&&this.onClose(this)}catchUpSubscription(e,t){this.debug("TODO: catch up subscription",e,t)}evaluateExecutionPlan(e){if(!e.isGroupable())return this.status=1,void this.execute();const t=e.groupableDelay,n=e.groupableDelayType;if(!t)throw new Error("Cannot group a subscription without a delay");if(0===this.status)this.schedule(t,n);else{const e=this.delayType,r=this.fireTime-Date.now();if("at-least"===e&&"at-least"===n)r<t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n));else if("at-least"===e&&"at-most"===n)r>t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n));else if("at-most"===e&&"at-most"===n)r>t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n));else{if("at-most"!==e||"at-least"!==n)throw new Error("Unknown delay type combination "+e+" "+n);r>t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n))}}}schedule(e,t){this.status=1;const n=Date.now();this.fireTime=n+e,this.delayType=t;const r=setTimeout(this.execute.bind(this),e);"at-least"===t&&(this.executionTimer=r)}executeOnRelayReady=()=>{2===this.status&&(this.status=1,this.execute())};finalizeSubId(){this.subIdParts.size>0?this._subId=Array.from(this.subIdParts).join("-"):this._subId=this.fingerprint.slice(0,15),this._subId+="-"+Math.random().toString(36).substring(2,7)}reExecuteAfterAuth=(()=>{const e=this.subId;this.debug("Re-executing after auth",this.items.size),this.relay.close(this.subId),this._subId=void 0,this.status=1,this.execute(),this.debug("Re-executed after auth %s \ud83d\udc49 %s",e,this.subId)}).bind(this);execute(){if(1===this.status){if(!this.relay.connected)return this.status=2,void this.relay.once("ready",this.executeOnRelayReady);this.relay.status<8&&this.relay.once("authed",this.reExecuteAfterAuth),this.status=3,this.finalizeSubId(),this.executeFilters=this.compileFilters(),this.relay.req(this)}}onstart(){}onevent(e){this.topSubscriptionManager?.seenEvent(e.id,this.relay);for(const{subscription:t}of this.items.values())Kp(t.filters,e)&&t.eventReceived(e,this.relay,!1)}oneose(){this.eosed=!0;for(const{subscription:e}of this.items.values())e.eoseReceived(this.relay),e.closeOnEose&&this.removeItem(e)}onclose(e){this.status=4}onclosed(e){if(e)for(const{subscription:t}of this.items.values())t.closedReceived(this.relay,e)}compileFilters(){const e=[],t=Array.from(this.items.values()).map((e=>e.filters)),n=t[0].length;for(let r=0;r<n;r++){const n=t.map((e=>e[r]));e.push($w(n))}return e}},Hw=class{relay;subscriptions;topSubscriptionManager;debug;constructor(e,t){this.relay=e,this.subscriptions=new Map,this.debug=e.debug.extend("sub-manager"),this.topSubscriptionManager=t}addSubscription(e,t){let n;if(e.isGroupable()){const r=function(e,t){const n=[];for(const i of e){if(i.since||i.until)return;const e=Object.keys(i||{}).sort().join("-");n.push(e)}let r=t?"+":"";return r+=n.join("|"),r}(t,e.closeOnEose);r&&(n=this.subscriptions.get(r)),n??=this.createSubscription(e,t,r)}else n=this.createSubscription(e,t);n.addItem(e,t)}createSubscription(e,t,n){const r=new Dw(this.relay,n);return r.topSubscriptionManager=this.topSubscriptionManager,r.onClose=this.onRelaySubscriptionClose.bind(this),this.subscriptions.set(r.fingerprint,r),r}onRelaySubscriptionClose(e){this.subscriptions.delete(e.fingerprint)}},qw=class e extends Og.EventEmitter{url;scores;connectivity;subs;publisher;authPolicy;lowestValidationRatio;targetValidationRatio;validationRatioFn;validatedEventCount=0;nonValidatedEventCount=0;trusted=!1;complaining=!1;debug;static defaultValidationRatioUpdateFn=(e,t,n)=>{if(void 0===e.lowestValidationRatio||void 0===e.targetValidationRatio)return 1;let r=e.validationRatio;if(e.validationRatio>e.targetValidationRatio){const n=t/100;r=Math.max(e.lowestValidationRatio,e.validationRatio-n)}return r<e.validationRatio?r:e.validationRatio};constructor(t,n,r){super(),this.url=Lw(t),this.scores=new Map,this.debug=Rg(`ndk:relay:${t}`),this.connectivity=new Mw(this,r),this.req=this.connectivity.req.bind(this.connectivity),this.close=this.connectivity.close.bind(this.connectivity),this.subs=new Hw(this,r?.subManager),this.publisher=new jw(this),this.authPolicy=n,this.targetValidationRatio=r?.initialValidationRatio,this.lowestValidationRatio=r?.lowestValidationRatio,this.validationRatioFn=(r?.validationRatioFn??e.defaultValidationRatioUpdateFn).bind(this),this.updateValidationRatio(),r||console.trace("relay created without ndk")}updateValidationRatio(){setTimeout((()=>{this.updateValidationRatio()}),3e4)}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.connectivity.connect(e,t)}disconnect(){1!==this.status&&this.connectivity.disconnect()}subscribe(e,t){this.subs.addSubscription(e,t)}async publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;return this.publisher.publish(e,t)}referenceTags(){return[["r",this.url]]}addValidatedEvent(){this.validatedEventCount++}addNonValidatedEvent(){this.nonValidatedEventCount++}get validationRatio(){return 0===this.nonValidatedEventCount?1:this.validatedEventCount/(this.validatedEventCount+this.nonValidatedEventCount)}shouldValidateEvent(){return!this.trusted&&(void 0===this.targetValidationRatio||this.validationRatio<this.targetValidationRatio)}get connected(){return this.connectivity.connected}req;close},Kw=class extends Error{errors;publishedToRelays;intendedRelaySet;constructor(e,t,n,r){super(e),this.errors=t,this.publishedToRelays=n,this.intendedRelaySet=r}get relayErrors(){const e=[];for(const[t,n]of this.errors)e.push(`${t.url}: ${n}`);return e.join("\n")}},Vw=class e{relays;debug;ndk;constructor(e,t){this.relays=e,this.ndk=t,this.debug=t.debug.extend("relayset")}addRelay(e){this.relays.add(e)}get relayUrls(){return Array.from(this.relays).map((e=>e.url))}static fromRelayUrls(t,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=new Set;for(const e of t){const o=n.pool.relays.get(Lw(e));if(o)o.status<5&&r&&o.connect(),i.add(o);else{const r=new qw(Lw(e),n?.relayAuthDefaultPolicy,n);n.pool.useTemporaryRelay(r,void 0,"requested from fromRelayUrls "+t),i.add(r)}}return new e(new Set(i),n)}async publish(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=new Set,i=new Map,o=e.isEphemeral();e.publishStatus="pending";const s=Array.from(this.relays).map((n=>new Promise((s=>{n.publish(e,t).then((e=>{r.add(n),s()})).catch((e=>{o||i.set(n,e),s()}))}))));if(await Promise.all(s),r.size<n){if(!o){const t=new Kw("Not enough relays received the event",i,r,this);throw e.publishStatus="error",e.publishError=t,this.ndk.emit("event:publish-failed",e,t,this.relayUrls),t}}else e.emit("published",{relaySet:this,publishedToRelays:r});return r}get size(){return this.relays.size}},Ww=Rg("ndk:outbox:calculate");async function Zw(e,t){const n=new Set,r=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"write";if(e.outboxTracker)return e.outboxTracker.data.has(t)||await e.outboxTracker.trackUsers([t]),Iw(e,t,n)}(e,t.pubkey);r&&r.forEach((t=>{const r=e.pool?.getRelay(t);r&&n.add(r)}));let i=t.tags.filter((e=>["a","e"].includes(e[0]))).map((e=>e[2])).filter((e=>e&&e.startsWith("wss://"))).filter((e=>{try{return new URL(e),!0}catch{return!1}})).map((e=>Lw(e)));i=Array.from(new Set(i)).slice(0,5),i.forEach((t=>{const r=e.pool?.getRelay(t,!0,!0);r&&(Ww("Adding relay hint %s",t),n.add(r))}));const o=t.getMatchingTags("p").map((e=>e[1]));if(o.length<5){Array.from(Nw(e,o,"read",{preferredRelays:new Set(r)}).keys()).forEach((t=>{const r=e.pool?.getRelay(t,!1,!0);r&&(Ww("Adding p-tagged relay %s",t),n.add(r))}))}else Ww("Too many p-tags to consider %d",o.length);return e.pool?.permanentAndConnectedRelays().forEach((e=>n.add(e))),new Vw(n,e)}function Gw(e,t,n){const r=new Map,i=new Set;if(t.forEach((e=>{e.authors&&e.authors.forEach((e=>i.add(e)))})),i.size>0){const n=function(e,t){return Nw(e,t,"write",{count:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2})}(e,Array.from(i));for(const e of n.keys())r.set(e,[]);for(const e of t)if(e.authors)for(const[t,i]of n.entries()){const n=e.authors.filter((e=>i.includes(e)));r.set(t,[...r.get(t),{...e,authors:n}])}else for(const t of n.keys())r.set(t,[...r.get(t),e])}else e.explicitRelayUrls&&e.explicitRelayUrls.forEach((e=>{r.set(e,t)}));return 0===r.size&&n.permanentAndConnectedRelays().slice(0,5).forEach((e=>{r.set(e.url,t)})),0===r.size&&console.warn("No relays found for filter",t),r}function Yw(e,t,n){return Gw(e,t,n)}async function Qw(e){return""}function Jw(){if(void 0===this.kind)throw new Error("Kind not set");return[0,3].includes(this.kind)||this.kind>=1e4&&this.kind<2e4||this.kind>=3e4&&this.kind<4e4}function Xw(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function em(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}async function tm(e,t){if(!this.ndk)throw new Error("No NDK instance found!");if(t||(await this.ndk.assertSigner(),t=this.ndk.signer),!e){const t=this.getMatchingTags("p");if(1!==t.length)throw new Error("No recipient could be determined and no explicit recipient was provided");e=this.ndk.getUser({pubkey:t[0][1]})}this.content=await(t?.encrypt(e,this.content))}async function nm(e,t){if(!this.ndk)throw new Error("No NDK instance found!");t||(await this.ndk.assertSigner(),t=this.ndk.signer),e||(e=this.author),this.content=await(t?.decrypt(e,this.content))}function rm(){let e=[];return this.onRelays.length>0?e=this.onRelays.map((e=>e.url)):this.relay&&(e=[this.relay.url]),this.isParamReplaceable()?Xp.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:e}):e.length>0?Xp.neventEncode({id:this.tagId(),relays:e,author:this.pubkey}):Xp.noteEncode(this.tagId())}async function im(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!t&&e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t=this.ndk.signer}const n=new _m(this.ndk,{kind:om(this),content:""});return n.tag(this),16===n.kind?n.tags.push(["k",`${this.kind}`]):n.content=JSON.stringify(this.rawEvent()),t&&await n.sign(t),e&&await n.publish(),n}function om(e){return 1===e.kind?6:16}var sm;function am(e){return e.getMatchingTags("e").some((e=>e[3]))}function lm(e,t){t??=e.tagType();const n=e.tags.find((e=>"root"===e[3]));if(!n){if(am(e))return;const n=e.getMatchingTags(t);if(n.length<3)return n[0]}return n}function um(e,t){t??=e.tagType();let n=e.tags.find((e=>"reply"===e[3]));if(n)return n;if(n||(n=e.tags.find((e=>"root"===e[3]))),!n){if(am(e))return;const n=e.getMatchingTags(t);if(1===n.length)return n[0];if(2===n.length)return n[1]}}async function cm(e,t){if(!this.ndk)throw new Error("NDK instance not found");const n=this.getMatchingTags(e,t);if(0===n.length)return;const[r,i,o]=n[0];return await this.ndk.fetchEvent(i,{},undefined)}async function hm(e){if(!this.ndk)throw new Error("NDK instance not found");const t=lm(this);if(t)return this.ndk.fetchEventFromTag(t,this,e)}async function fm(e){if(!this.ndk)throw new Error("NDK instance not found");const t=um(this);if(t)return this.ndk.fetchEventFromTag(t,this,e)}function dm(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[0,this.pubkey,this.created_at,this.kind,this.tags,this.content];return e&&n.push(this.sig),t&&n.push(this.id),JSON.stringify(n)}var pm={};var ym=/^[a-f0-9]{64}$/;function gm(){if("number"!==typeof this.kind)return!1;if("string"!==typeof this.content)return!1;if("number"!==typeof this.created_at)return!1;if("string"!==typeof this.pubkey)return!1;if(!this.pubkey.match(ym))return!1;if(!Array.isArray(this.tags))return!1;for(let e=0;e<this.tags.length;e++){const t=this.tags[e];if(!Array.isArray(t))return!1;for(let e=0;e<t.length;e++)if("object"===typeof t[e])return!1}return!0}var bm=new Rw.LRUCache({maxSize:1e3,entryExpirationTimeInMS:6e4});function wm(e){if("boolean"===typeof this.signatureVerified)return this.signatureVerified;const t=bm.get(this.id);if(null!==t)return this.signatureVerified=!!t;try{if(!this.ndk?.asyncSigVerification){const e=rh((new TextEncoder).encode(this.serialize())),t=Ow.verify(this.sig,e,this.pubkey);return t?bm.set(this.id,this.sig):bm.set(this.id,!1),this.signatureVerified=t}(async function(e){return new Promise((t=>{const n=e.serialize();let r=!1;pm[e.id]||(pm[e.id]={event:e,resolves:[]},r=!0),pm[e.id].resolves.push(t),r&&sm.postMessage({serialized:n,id:e.id,sig:e.sig,pubkey:e.pubkey})}))})(this).then((t=>{e&&(this.signatureVerified=t,t&&bm.set(this.id,this.sig)),t||(this.ndk.emit("event:invalid-sig",this),bm.set(this.id,!1))}))}catch(n){return this.signatureVerified=!1}}function mm(){return e=this.serialize(),Mc(rh((new TextEncoder).encode(e)));var e}var vm=[3],_m=class e extends Og.EventEmitter{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";signatureVerified;_author=void 0;relay;get onRelays(){let e=[];return this.ndk?e=this.ndk.subManager.seenEvents.get(this.id)||[]:this.relay&&e.push(this.relay),e}publishStatus="success";publishError;constructor(t,n){super(),this.ndk=t,this.created_at=n?.created_at,this.content=n?.content||"",this.tags=n?.tags||[],this.id=n?.id||"",this.sig=n?.sig,this.pubkey=n?.pubkey||"",this.kind=n?.kind,n instanceof e&&(this.relay&&(this.relay=n.relay,this.ndk?.subManager.seenEvent(n.id,this.relay)),this.publishStatus=n.publishStatus,this.publishError=n.publishError)}static deserialize(t,n){return new e(t,function(e){const t=JSON.parse(e),n={pubkey:t[1],created_at:t[2],kind:t[3],tags:t[4],content:t[5]};return 7===t.length&&(n.sig=t[6]),8===t.length&&(n.id=t[7]),n}(n))}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.pubkey,this._author=e,this._author.ndk??=this.ndk}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const e=this.ndk.getUser({pubkey:this.pubkey});return this._author=e,e}tag(t,n,r,i){let o=[];if(void 0!==t.fetchProfile){i??="p";const e=[i,t.pubkey];n&&e.push("",n),o.push(e)}else if(t instanceof e){const e=t;r??=e?.pubkey===this.pubkey,o=e.referenceTags(n,r,i);for(const t of e.getMatchingTags("p"))t[1]!==this.pubkey&&(this.tags.find((e=>"p"===e[0]&&e[1]===t[1]))||this.tags.push(["p",t[1]]))}else{if(!Array.isArray(t))throw new Error("Invalid argument",t);o=[t]}this.tags=function(e,t){const n=new Map,r=(e,t)=>e.every(((e,n)=>e===t[n]));return e.concat(t).forEach((e=>{for(const[t,i]of n)if(r(i,e)||r(e,i))return void(e.length>=i.length&&n.set(t,e));n.set((e=>e.join(","))(e),e)})),Array.from(n.values())}(this.tags,o)}async toNostrEvent(e){if(!e&&""===this.pubkey){const e=await(this.ndk?.signer?.user());this.pubkey=e?.pubkey||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const{content:t,tags:n}=await this.generateTags();this.content=t||"",this.tags=n;try{this.id=this.getEventHash()}catch(r){}return this.rawEvent()}serialize=(()=>dm.bind(this))();getEventHash=(()=>mm.bind(this))();validate=(()=>gm.bind(this))();verifySignature=(()=>wm.bind(this))();isReplaceable=(()=>Jw.bind(this))();isEphemeral=(()=>Xw.bind(this))();isParamReplaceable=(()=>em.bind(this))();encode=(()=>rm.bind(this))();encrypt=(()=>tm.bind(this))();decrypt=(()=>nm.bind(this))();getMatchingTags(e,t){const n=this.tags.filter((t=>t[0]===e));return void 0===t?n:n.filter((e=>e[3]===t))}hasTag(e,t){return this.tags.some((n=>n[0]===e&&(!t||n[3]===t)))}tagValue(e){const t=this.getMatchingTags(e);if(0!==t.length)return t[0][1]}get alt(){return this.tagValue("alt")}set alt(e){this.removeTag("alt"),e&&this.tags.push(["alt",e])}get dTag(){return this.tagValue("d")}set dTag(e){this.removeTag("d"),e&&this.tags.push(["d",e])}removeTag(e){const t=Array.isArray(e)?e:[e];this.tags=this.tags.filter((e=>!t.includes(e[0])))}async sign(e){e?this.author=await e.user():(this.ndk?.assertSigner(),e=this.ndk.signer);const t=await this.toNostrEvent();return this.sig=await e.sign(t),this.sig}async publishReplaceable(e,t,n){return this.id="",this.created_at=Math.floor(Date.now()/1e3),this.sig="",this.publish(e,t,n)}async publish(e,t,n){if(this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");e||(e=this.ndk.devWriteRelaySet||await Zw(this.ndk,this)),5===this.kind&&this.ndk.cacheAdapter?.deleteEvent&&this.ndk.cacheAdapter.deleteEvent(this);const r=this.rawEvent();if(this.ndk.cacheAdapter?.addUnpublishedEvent)try{this.ndk.cacheAdapter.addUnpublishedEvent(this,e.relayUrls)}catch(o){console.error("Error adding unpublished event to cache",o)}this.ndk.subManager.subscriptions.forEach((e=>{e.filters.some((e=>qp(e,r)))&&e.eventReceived(this,void 0,!1,!0)}));const i=await e.publish(this,t,n);return i.forEach((e=>this.ndk?.subManager.seenEvent(this.id,e))),i}async generateTags(){let e=[];const t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[],r=e=>{t.find((t=>["q",e[0]].includes(t[0])&&t[1]===e[1]))||t.push(e)};return e=e.replace(/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,(e=>{try{const t=e.split(/(@|nostr:)/)[2],{type:i,data:o}=Xp.decode(t);let s;switch(i){case"npub":s=["p",o];break;case"nprofile":s=["p",o.pubkey];break;case"note":n.push(new Promise((async e=>{r(["e",o,await Qw(),"mention"]),e()})));break;case"nevent":n.push(new Promise((async e=>{const{id:t,author:n}=o;let{relays:i}=o;i&&0!==i.length||(i=[await Qw()]),r(["e",t,i[0],"mention"]),n&&r(["p",n]),e()})));break;case"naddr":n.push(new Promise((async e=>{const t=[o.kind,o.pubkey,o.identifier].join(":");let n=o.relays??[];0===n.length&&(n=[await Qw()]),r(["a",t,n[0],"mention"]),r(["p",o.pubkey]),e()})));break;default:return e}return s&&r(s),`nostr:${t}`}catch(t){return e}})),await Promise.all(n),e=e.replace(/(?<=\s|^)(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g,((e,n)=>{const r=["t",n.slice(1)];return t.find((e=>e[0]===r[0]&&e[1]===r[1]))||t.push(r),e})),{content:e,tags:t}}(this.content,this.tags),n=t.content;if(e=t.tags,this.kind&&this.isParamReplaceable()){if(!this.getMatchingTags("d")[0]){const t=this.tagValue("title");let n=[...Array(t?6:16)].map((()=>Math.random().toString(36)[2])).join("");t&&t.length>0&&(n=t.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")+"-"+n),e.push(["d",n])}}if((this.ndk?.clientName||this.ndk?.clientNip89)&&vm.includes(this.kind)&&!this.tags.some((e=>"client"===e[0]))){const t=["client",this.ndk.clientName??""];this.ndk.clientNip89&&t.push(this.ndk.clientNip89),e.push(t)}return{content:n||"",tags:e}}muted(){const e=this.ndk?.mutedIds.get(this.pubkey);if(e&&"p"===e)return"author";const t=this.tagReference(),n=this.ndk?.mutedIds.get(t[1]);return n&&n===t[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return 0===this.kind||3===this.kind||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(!this.isParamReplaceable())throw new Error("This must only be called on replaceable events");const e=this.replaceableDTag();return`${this.kind}:${this.pubkey}:${e}`}tagType(){return this.isParamReplaceable()?"a":"e"}tagReference(e){let t;return t=this.isParamReplaceable()?["a",this.tagAddress()]:["e",this.tagId()],this.relay?t.push(this.relay.url):t.push(""),e&&t.push(e),t}referenceTags(e,t,n){let r=[];return r=this.isParamReplaceable()?[[n??"a",this.tagAddress()],[n??"e",this.id]]:[[n??"e",this.id]],this.relay?.url?r=r.map((e=>(e.push(this.relay?.url),e))):e&&(r=r.map((e=>(e.push(""),e)))),e&&r.forEach((t=>t.push(e))),r=[...r,...this.getMatchingTags("h")],t||r.push(...this.author.referenceTags()),r}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}async delete(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new e(this.ndk,{kind:5,content:t||""});return r.tag(this,void 0,!0),r.tags.push(["k",this.kind.toString()]),n&&await r.publish(),r}fetchTaggedEvent=(()=>cm.bind(this))();fetchRootEvent=(()=>hm.bind(this))();fetchReplyEvent=(()=>fm.bind(this))();repost=(()=>im.bind(this))();async react(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new e(this.ndk,{kind:7,content:t});return r.tag(this),n?await r.publish():await r.sign(),r}get isValid(){return this.validate()}};function km(e){return!(!e.filter.ids||!function(e){const t=e.filter.ids;return!!t&&t.length===e.eventFirstSeen.size}(e))}function Em(e){let t;if(e.match(xm)){const[t,n,r]=e.split(":"),i={authors:[n],kinds:[parseInt(t)]};return r&&(i["#d"]=[r]),i}if(e.match(Sm))try{switch(t=Xp.decode(e),t.type){case"nevent":{const e={ids:[t.data.id]};return t.data.author&&(e.authors=[t.data.author]),t.data.kind&&(e.kinds=[t.data.kind]),e}case"note":return{ids:[t.data]};case"naddr":const e={authors:[t.data.pubkey],kinds:[t.data.kind]};return t.data.identifier&&(e["#d"]=[t.data.identifier]),e}}catch(n){console.error("Error decoding",e,n)}return{ids:[e]}}var xm=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,Sm=/^n(event|ote|profile|pub|addr)1[\d\w]+$/;var Am={closeOnEose:!1,cacheUsage:"CACHE_FIRST",groupable:!0,groupableDelay:100,groupableDelayType:"at-most"},Cm=class extends Og.EventEmitter{subId;filters;opts;pool;skipVerification=!1;skipValidation=!1;relayFilters;relaySet;ndk;debug;eventFirstSeen=(()=>new Map)();eosesSeen=(()=>new Set)();lastEventReceivedAt;internalId;closeOnEose;poolMonitor;constructor(e,t,n,r,i){if(super(),this.ndk=e,this.pool=n?.pool||e.pool,this.opts={...Am,...n||{}},this.filters=t instanceof Array?t:[t],this.subId=i||n?.subId,this.internalId=Math.random().toString(36).substring(7),this.relaySet=r,this.debug=e.debug.extend(`subscription[${n?.subId??this.internalId}]`),this.skipVerification=n?.skipVerification||!1,this.skipValidation=n?.skipValidation||!1,this.closeOnEose=n?.closeOnEose||!1,"ONLY_CACHE"===this.opts.cacheUsage&&!this.opts.closeOnEose)throw new Error("Cannot use cache-only options with a persistent subscription")}relaysMissingEose(){if(!this.relayFilters)return[];return Array.from(this.relayFilters.keys()).filter((e=>!this.eosesSeen.has(this.pool.getRelay(e,!1,!1))))}get filter(){return this.filters[0]}get groupableDelay(){if(this.isGroupable())return this.opts?.groupableDelay}get groupableDelayType(){return this.opts?.groupableDelayType||"at-most"}isGroupable(){return this.opts?.groupable||!1}shouldQueryCache(){return"ONLY_RELAY"!==this.opts?.cacheUsage}shouldQueryRelays(){return"ONLY_CACHE"!==this.opts?.cacheUsage}shouldWaitForCache(){return this.opts.closeOnEose&&!!this.ndk.cacheAdapter?.locking&&"PARALLEL"!==this.opts.cacheUsage}async start(){let e;this.shouldQueryCache()&&(e=this.startWithCache(),this.shouldWaitForCache()&&(await e,km(this)))?this.emit("eose",this):this.shouldQueryRelays()?(this.startWithRelays(),this.startPoolMonitor()):this.emit("eose",this)}startPoolMonitor(){this.debug.extend("pool-monitor");this.poolMonitor=e=>{if(this.relayFilters?.has(e.url))return;Yw(this.ndk,this.filters,this.pool).get(e.url)&&(this.relayFilters?.set(e.url,this.filters),e.subscribe(this,this.filters))},this.pool.on("relay:connect",this.poolMonitor)}stop(){this.emit("close",this),this.poolMonitor&&this.pool.off("relay:connect",this.poolMonitor),this.removeAllListeners()}hasAuthorsFilter(){return this.filters.some((e=>e.authors?.length))}async startWithCache(){if(this.ndk.cacheAdapter?.query){const e=this.ndk.cacheAdapter.query(this);this.ndk.cacheAdapter.locking&&await e}}startWithRelays(){if(this.relaySet){this.relayFilters=new Map;for(const e of this.relaySet.relays)this.relayFilters.set(e.url,this.filters)}else this.relayFilters=Yw(this.ndk,this.filters,this.pool);if(this.relayFilters&&0!==this.relayFilters.size)for(const[e,t]of this.relayFilters){this.pool.getRelay(e,!0,!0,t).subscribe(this,t)}}eventReceived(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e.id,o=this.eventFirstSeen.has(i);let s;if(e instanceof _m&&(s=e),o){const n=Date.now()-(this.eventFirstSeen.get(i)||0);if(this.emit("event:dup",i,t,n,this),t){const n=bm.get(i);n&&"string"===typeof n&&e.sig===n&&t.addValidatedEvent()}}else{if(s??=new _m(this.ndk,e),s.ndk=this.ndk,s.relay=t,!n&&!r){if(!this.skipValidation&&!s.isValid)return void this.debug("Event failed validation %s from relay %s",i,t?.url);if(t)if(!1!==t?.shouldValidateEvent()){if(!this.skipVerification){if(!s.verifySignature(!0)&&!this.ndk.asyncSigVerification)return void this.debug("Event failed signature validation",e);t&&t.addValidatedEvent()}}else t.addNonValidatedEvent();this.ndk.cacheAdapter&&this.ndk.cacheAdapter.setEvent(s,this.filters,t)}!n&&t&&this.ndk.emit("event",s,t),this.emit("event",s,t,this),this.eventFirstSeen.set(i,Date.now())}this.lastEventReceivedAt=Date.now()}closedReceived(e,t){this.emit("closed",e,t)}eoseTimeout;eosed=!1;eoseReceived(e){this.debug("Received EOSE from %s",e.url),this.eosesSeen.add(e);let t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const n=this.eosesSeen.size===this.relayFilters?.size,r=km(this),i=e=>{this.eosed||(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.debug(`Performing EOSE: ${e}`),this.emit("eose",this),this.eosed=!0,this.opts?.closeOnEose&&this.stop())};if(r||n)i("query filled or seen all");else if(this.relayFilters){let e=1e3;const n=new Set(this.pool.connectedRelays().map((e=>e.url))),r=Array.from(this.relayFilters.keys()).filter((e=>n.has(e)));if(0===r.length)return;const o=this.eosesSeen.size/r.length;if(this.eosesSeen.size>=2&&o>=.5){if(e*=1-o,0===e)return void i("tiem to wait was 0");this.eoseTimeout&&clearTimeout(this.eoseTimeout);const n=()=>{t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,void 0!==t&&t<20?this.eoseTimeout=setTimeout(n,e):i("send eose timeout: "+e)};this.eoseTimeout=setTimeout(n,e)}}}};async function Om(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!this.ndk)throw new Error("NDK not set");const r=await this.ndk.fetchEvent({kinds:[n],authors:[this.pubkey]},e||{groupable:!1});if(r){const e=new Set;return r.tags.forEach((t=>{"p"===t[0]&&e.add(t[1])})),t&&this.ndk?.outboxTracker?.trackUsers(Array.from(e)),[...e].reduce(((e,t)=>{const n=new Bm({pubkey:t});return n.ndk=this.ndk,e.add(n),e}),new Set)}return new Set}function Rm(e){const t={};let n;try{n=JSON.parse(e.content)}catch(r){throw new Error(`Failed to parse profile event: ${r}`)}return t.created_at=e.created_at,t.profileEvent=JSON.stringify(e.rawEvent()),Object.keys(n).forEach((e=>{switch(e){case"name":t.name=n.name;break;case"display_name":t.displayName=n.display_name;break;case"image":case"picture":t.image=n.picture||n.image;break;case"banner":t.banner=n.banner;break;case"bio":t.bio=n.bio;break;case"nip05":t.nip05=n.nip05;break;case"lud06":t.lud06=n.lud06;break;case"lud16":t.lud16=n.lud16;break;case"about":t.about=n.about;break;case"zapService":t.zapService=n.zapService;break;case"website":t.website=n.website;break;default:t[e]=n[e]}})),t}function Im(e){const t={};for(const[n,r]of Object.entries(e))switch(n){case"username":case"name":t.name=r;break;case"displayName":t.display_name=r;break;case"image":case"picture":t.picture=r;break;case"bio":case"about":t.about=r;break;default:t[n]=r}return JSON.stringify(t)}var Nm=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function Tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return await e.queuesNip05.add({id:t,func:async()=>{if(e.cacheAdapter&&e.cacheAdapter.loadNip05){const n=await e.cacheAdapter.loadNip05(t);if("missing"!==n){if(n){const t=new Bm({pubkey:n.pubkey,relayUrls:n.relays,nip46Urls:n.nip46});return t.ndk=e,t}if("no-cache"!==r.cache)return null}}const i=t.match(Nm);if(!i)return null;const[o,s="_",a]=i;try{const i=await n(`https://${a}/.well-known/nostr.json?name=${s}`,r),{names:o,relays:l,nip46:u}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"===typeof n&&"string"===typeof r&&(t.names[n.toLowerCase()]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"===typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"===typeof e)))}if(e.nip46){t.nip46={};for(const[n,r]of Object.entries(e.nip46))"string"===typeof n&&Array.isArray(r)&&(t.nip46[n]=r.filter((e=>"string"===typeof e)))}return t}(await i.json()),c=o[s.toLowerCase()];let h=null;return c&&(h={pubkey:c,relays:l?.[c],nip46:u?.[c]}),e?.cacheAdapter&&e.cacheAdapter.saveNip05&&e.cacheAdapter.saveNip05(t,h),h}catch(l){return e?.cacheAdapter&&e.cacheAdapter.saveNip05&&e?.cacheAdapter.saveNip05(t,null),console.error("Failed to fetch NIP05 for",t,l),null}}})}var Lm=class e extends _m{static kind=10019;static kinds=[10019];_p2pk;constructor(e,t){super(e,t),this.kind??=10019}static from(t){return new e(t.ndk,t)}set relays(e){this.tags=this.tags.filter((e=>"relay"!==e[0]));for(const t of e)this.tags.push(["relay",t])}get relays(){const e=[];for(const t of this.tags)"relay"===t[0]&&e.push(t[1]);return e}set mints(e){this.tags=this.tags.filter((e=>"mint"!==e[0]));for(const t of e)this.tags.push(["mint",t])}get mints(){const e=[];for(const t of this.tags)"mint"===t[0]&&e.push(t[1]);return Array.from(new Set(e))}get p2pk(){return this._p2pk||(this._p2pk=this.tagValue("pubkey")??this.pubkey),this._p2pk}set p2pk(e){this._p2pk=e,this.removeTag("pubkey"),e&&this.tags.push(["pubkey",e])}get relaySet(){return Vw.fromRelayUrls(this.relays,this.ndk)}},Pm=Rg("ndk:zapper:ln");async function Um(e,t){let n,{lud06:r,lud16:i}=e;if(i&&!i.startsWith("LNURL")){const[e,t]=i.split("@");n=`https://${t}/.well-known/lnurlp/${e}`}else if(r){const{words:e}=Ih.decode(r,1e3),t=Ih.fromWords(e);n=new TextDecoder("utf-8").decode(t)}if(!n)throw Pm("No zap endpoint found %o",{lud06:r,lud16:i}),new Error("No zap endpoint found");try{const e=t.httpFetch||fetch,r=await e(n);if(200!==r.status){const e=await r.text();throw new Error(`Unable to fetch zap endpoint ${n}: ${e}`)}return await r.json()}catch(o){throw new Error(`Unable to fetch zap endpoint ${n}: ${o}`)}}var Bm=class e{ndk;profile;_npub;_pubkey;relayUrls=[];nip46Urls=[];constructor(e){e.npub&&(this._npub=e.npub),e.hexpubkey&&(this._pubkey=e.hexpubkey),e.pubkey&&(this._pubkey=e.pubkey),e.relayUrls&&(this.relayUrls=e.relayUrls),e.nip46Urls&&(this.nip46Urls=e.nip46Urls)}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("pubkey not set");this._npub=Xp.npubEncode(this.pubkey)}return this._npub}set npub(e){this._npub=e}get hexpubkey(){return this.pubkey}set hexpubkey(e){this._pubkey=e}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=Xp.decode(this.npub).data}return this._pubkey}set pubkey(e){this._pubkey=e}async getZapInfo(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["nip61","nip57"];if(!this.ndk)throw new Error("No NDK instance found");const n=[];if(t.includes("nip61")&&n.push(10019),t.includes("nip57")&&n.push(0),0===n.length)return[];let r=await this.ndk.fetchEvents({kinds:n,authors:[this.pubkey]},{cacheUsage:"ONLY_CACHE",groupable:!1});r.size<t.length&&(r=await this.ndk.fetchEvents({kinds:n,authors:[this.pubkey]},{cacheUsage:"ONLY_RELAY"}));const i=[],o=Array.from(r).find((e=>10019===e.kind)),s=Array.from(r).find((e=>0===e.kind));if(o){const t=Lm.from(o);if(t.mints.length>0&&i.push({type:"nip61",data:{mints:t.mints,relays:t.relays,p2pk:t.p2pk}}),!e)return i}if(s){const e=Rm(s),{lud06:t,lud16:n}=e;try{const e=await Um({lud06:t,lud16:n},this.ndk);e&&i.push({type:"nip57",data:e})}catch(a){console.error("Error getting NIP-57 zap spec",a)}}return i}async getZapConfiguration(e){if(e??=this.ndk,!e)throw new Error("No NDK instance found");return await e.queuesZapConfig.add({id:this.pubkey,func:async()=>{if(this.ndk?.cacheAdapter?.loadUsersLNURLDoc){const e=await this.ndk.cacheAdapter.loadUsersLNURLDoc(this.pubkey);if("missing"!==e){if(null===e)return;if(e)return e}}let t;try{if(await this.fetchProfile({groupable:!1}),this.profile){const{lud06:n,lud16:r}=this.profile;t=await Um({lud06:n,lud16:r},e)}}catch{}if(this.ndk?.cacheAdapter?.saveUsersLNURLDoc&&this.ndk.cacheAdapter.saveUsersLNURLDoc(this.pubkey,t||null),t)return t}})}async getZapperPubkey(){const e=await this.getZapConfiguration();return e?.nostrPubkey}static async fromNip05(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n)throw new Error("No NDK instance found");const i={};r&&(i.cache="no-cache");const o=await Tm(n,t,n?.httpFetch,i);if(o){const t=new e({pubkey:o.pubkey,relayUrls:o.relays,nip46Urls:o.nip46});return t.ndk=n,t}}async fetchProfile(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.ndk)throw new Error("NDK not set");this.profile||(this.profile={});let n=null;if(this.ndk.cacheAdapter&&this.ndk.cacheAdapter.fetchProfile&&"ONLY_RELAY"!==e?.cacheUsage){const e=await this.ndk.cacheAdapter.fetchProfile(this.pubkey);if(e)return this.profile=e,e}!e&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.locking&&(n=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},{cacheUsage:"ONLY_CACHE",closeOnEose:!0,groupable:!1}),e={cacheUsage:"ONLY_RELAY",closeOnEose:!0,groupable:!0,groupableDelay:250}),n&&0!==n.size||(n=await this.ndk.fetchEvents({kinds:[0],authors:[this.pubkey]},e));const r=Array.from(n).sort(((e,t)=>e.created_at-t.created_at));if(0===r.length)return null;const i=r[0];return this.profile=Rm(i),t&&(this.profile.profileEvent=JSON.stringify(i)),this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile}follows=(()=>Om.bind(this))();tagReference(){return["p",this.pubkey]}referenceTags(e){const t=[["p",this.pubkey]];return e?(t[0].push("",e),t):t}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner();const e=new _m(this.ndk,{kind:0,content:Im(this.profile)});await e.publish()}async follow(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),t||(t=await this.follows(void 0,void 0,n)),t.has(e))return!1;t.add(e);const r=new _m(this.ndk,{kind:n});for(const i of t)r.tag(i);return await r.publish(),!0}async unfollow(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t||(t=await this.follows(void 0,void 0,n));const r=new Set;let i=!1;for(const s of t)s.pubkey!==e.pubkey?r.add(s):i=!0;if(!i)return!1;const o=new _m(this.ndk,{kind:n});for(const s of r)o.tag(s);return await o.publish()}async validateNip05(e){if(!this.ndk)throw new Error("No NDK instance found");const t=await Tm(this.ndk,e);return null===t?null:t.pubkey===this.pubkey}async zap(e,t,n,r){return new Promise(((i,o)=>{if(!this.ndk)return void o("No NDK instance found");let s=this.ndk.walletConfig?.onLnPay;s??=async e=>{let{pr:t}=e;i(t)};this.ndk.zap(this,e,{comment:t,tags:n,signer:r,onLnPay:s}).zap().then(i).catch(o)}))}},Fm=class e extends _m{_encryptedTags;encryptedTagsLength;constructor(e,t){super(e,t),this.kind??=30001}static from(t){return new e(t.ndk,t)}get title(){const e=this.tagValue("title")||this.tagValue("name");return e||(3===this.kind?"Contacts":1e4===this.kind?"Mute":10001===this.kind?"Pinned Notes":10002===this.kind?"Relay Metadata":10003===this.kind?"Bookmarks":10004===this.kind?"Communities":10005===this.kind?"Public Chats":10006===this.kind?"Blocked Relays":10007===this.kind?"Search Relays":10015===this.kind?"Interests":10030===this.kind?"Emojis":this.tagValue("d"))}set title(e){this.removeTag(["title","name"]),e&&this.tags.push(["title",e])}get name(){return this.title}set name(e){this.title=e}get description(){return this.tagValue("description")}set description(e){this.removeTag("description"),e&&this.tags.push(["description",e])}get image(){return this.tagValue("image")}set image(e){this.removeTag("image"),e&&this.tags.push(["image",e])}isEncryptedTagsCacheValid(){return!(!this._encryptedTags||this.encryptedTagsLength!==this.content.length)}async encryptedTags(){if((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const e=await this.ndk.signer.user();try{if(this.content.length>0)try{const t=await this.ndk.signer.decrypt(e,this.content),n=JSON.parse(t);return n&&n[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=n):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch(t){console.log(`error decrypting ${this.content}`)}}catch(t){}return[]}validateTag(e){return!0}getItems(e){return this.tags.filter((t=>t[0]===e))}get items(){return this.tags.filter((e=>!["d","L","l","title","name","description","published_at","summary","image","thumb","alt","expiration","subject","client"].includes(e[0])))}async addItem(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom";if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(e instanceof _m)t=[e.tagReference(n)];else if(e instanceof Bm)t=e.referenceTags();else if(e instanceof qw)t=e.referenceTags();else{if(!Array.isArray(e))throw new Error("Invalid object type");t=[e]}if(n&&t[0].push(n),r){const e=await this.ndk.signer.user(),n=await this.encryptedTags();"top"===i?n.unshift(...t):n.push(...t),this._encryptedTags=n,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(n),await this.encrypt(e)}else"top"===i?this.tags.unshift(...t):this.tags.push(...t);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItemByValue(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const n=this.tags.findIndex((t=>t[1]===e));n>=0&&this.tags.splice(n,1);const r=await this.ndk.signer.user(),i=await this.encryptedTags(),o=i.findIndex((t=>t[1]===e));if(o>=0&&(i.splice(o,1),this._encryptedTags=i,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(i),await this.encrypt(r)),t)return this.publishReplaceable();this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(e,t){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(t){const t=await this.ndk.signer.user(),n=await this.encryptedTags();n.splice(e,1),this._encryptedTags=n,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(n),await this.encrypt(t)}else this.tags.splice(e,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}has(e){return this.items.some((t=>t[1]===e))}filterForItems(){const e=new Set,t=new Map,n=[];for(const r of this.items)if("e"===r[0]&&r[1])e.add(r[1]);else if("a"===r[0]&&r[1]){const[e,n,i]=r[1].split(":");if(!e||!n)continue;const o=`${e}:${n}`,s=t.get(o)||[];s.push(i||""),t.set(o,s)}if(e.size>0&&n.push({ids:Array.from(e)}),t.size>0)for(const[r,i]of t.entries()){const[e,t]=r.split(":");n.push({kinds:[parseInt(e)],authors:[t],"#d":i})}return n}};var zm="read",Mm="write",jm=class e extends _m{constructor(e,t){super(e,t),this.kind??=10002}static from(t){return new e(t.ndk,t.rawEvent())}get readRelayUrls(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).filter((e=>!e[2]||e[2]&&e[2]===zm)).map((e=>Tw(e[1]))).filter((e=>!!e))}set readRelayUrls(e){for(const t of e)this.tags.push(["r",t,zm])}get writeRelayUrls(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).filter((e=>!e[2]||e[2]&&e[2]===Mm)).map((e=>Tw(e[1]))).filter((e=>!!e))}set writeRelayUrls(e){for(const t of e)this.tags.push(["r",t,Mm])}get bothRelayUrls(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).filter((e=>!e[2])).map((e=>e[1]))}set bothRelayUrls(e){for(const t of e)this.tags.push(["r",t])}get relays(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).map((e=>e[1]))}get relaySet(){if(!this.ndk)throw new Error("NDKRelayList has no NDK instance");return new Vw(new Set(this.relays.map((e=>this.ndk.pool.getRelay(e)))),this.ndk)}};function $m(e,t){try{const n=JSON.parse(t.content),r=new jm(e),i=new Set,o=new Set;for(let[e,t]of Object.entries(n)){try{e=Lw(e)}catch{continue}if(t){const n=t;n.write&&o.add(e),n.read&&i.add(e)}else i.add(e),o.add(e)}return r.readRelayUrls=Array.from(i),r.writeRelayUrls=Array.from(o),r}catch{}}var Dm=class e extends _m{debug;_proofs=[];static kind=9321;static kinds=(()=>[e.kind])();constructor(e,t){super(e,t),this.kind??=9321,this.debug=e?.debug.extend("nutzap")??Rg("ndk:nutzap"),this.alt||(this.alt="This is a nutzap")}static from(e){const t=new this(e.ndk,e);try{const e=t.getMatchingTags("proof");e.length?t._proofs=e.map((e=>JSON.parse(e[1]))):t._proofs=JSON.parse(t.content)}catch{return}if(t._proofs&&t._proofs.length)return t}set comment(e){this.content=e??""}get comment(){const e=this.tagValue("comment");return e||this.content}set proofs(e){this._proofs=e,this.tags=this.tags.filter((e=>"proof"!==e[0]));for(const t of e)this.tags.push(["proof",JSON.stringify(t)]);this.removeTag("amount"),this.tags.push(["amount",this.amount.toString()])}get proofs(){return this._proofs}get p2pk(){const e=this.proofs[0];try{const t=JSON.parse(e.secret);let n={};"string"===typeof t?(n=JSON.parse(t),this.debug("stringified payload",e.secret)):"object"===typeof t&&(n=t);if("P2PK"===n[0]&&n[1]?.data){const e=n[1].data.slice(2,-1);if(e)return e}}catch(t){this.debug("error parsing p2pk pubkey",t,this.proofs[0])}}get mint(){return this.tagValue("u")}set mint(e){this.removeTag("u"),this.tag(["u",e])}get unit(){return this.tagValue("unit")??"msat"}set unit(e){this.removeTag("unit"),e&&this.tag(["unit",e])}get amount(){return 1e3*this.proofs.reduce(((e,t)=>e+t.amount),0)}sender=this.author;set target(e){this.tags=this.tags.filter((e=>"p"!==e[0])),e instanceof _m&&this.tags.push()}set recipientPubkey(e){this.removeTag("p"),this.tag(["p",e])}get recipientPubkey(){return this.tagValue("p")}get recipient(){const e=this.recipientPubkey;return this.ndk?this.ndk.getUser({pubkey:e}):new Bm({pubkey:e})}get isValid(){let e=0,t=0;for(const n of this.tags)"p"===n[0]&&e++,"u"===n[0]&&t++;return 1===e&&1===t&&this.proofs.length>0}};async function Hm(e){return await this.sendReq("pay_invoice",{invoice:e})}var qm=class e{_user;_privateKey;constructor(e){if(e){if("string"===typeof e)if(e.startsWith("nsec1")){const{type:t,data:n}=Xp.decode(e);"nsec"===t&&(this._privateKey=n)}else{if(64!==e.length)throw new Error("Invalid private key provided.");this._privateKey=jc(e)}else this._privateKey=e;this._privateKey&&(this._user=new Bm({pubkey:gd(this._privateKey)}))}}get privateKey(){if(this._privateKey)return Mc(this._privateKey)}static generate(){const t=yd();return new e(t)}async blockUntilReady(){if(!this._user)throw new Error("NDKUser not initialized");return this._user}async user(){return await this.blockUntilReady(),this._user}async sign(e){if(!this._privateKey)throw Error("Attempted to sign without a private key");return bd(e,this._privateKey).sig}async encrypt(e,t){if(!this._privateKey)throw Error("Attempted to encrypt without a private key");const n=e.pubkey;return await py.encrypt(this._privateKey,n,t)}async decrypt(e,t){if(!this._privateKey)throw Error("Attempted to decrypt without a private key");const n=e.pubkey;return await py.decrypt(this._privateKey,n,t)}};async function Km(e,t){const n=new _m(this.ndk,{kind:23194,tags:[["p",this.walletService.pubkey]],content:JSON.stringify({method:e,params:t})});return this.debug("Sending request",n.content),await n.encrypt(this.walletService,this.signer),await n.sign(this.signer),this.debug("Request encrypted and signed"),new Promise((async(t,r)=>{try{const i=n.tagId();if(!i)throw new Error("Failed to get e-tag");const o=e=>{this.off(i,o),this.off("event",o),this.debug("Received response",e);try{const n=JSON.parse(e);n.error&&r(n),t(n)}catch(n){this.debug("Failed to parse response",n),r({result_type:"error",error:{code:"failed_to_parse_response",message:n.message}})}},s=this.ndk.subscribe({kinds:[23195],"#e":[i],limit:1},{groupable:!1,subId:`nwc-${e}`},this.relaySet);s.on("event",(async e=>{await e.decrypt(e.author,this.signer),o(e.content),s.stop()})),this.once(i,o),this.once("event",o),this.debug("Sending request to relay",n.rawEvent()),await n.publish(this.relaySet)}catch(i){this.debug("Failed to send request",i,i.relayErrors),r({result_type:"error",error:{code:"failed_to_send_request",message:i.message}})}}))}async function Vm(){return await this.sendReq("get_balance",{})}async function Wm(){return await this.sendReq("get_info",{})}var Zm=class e extends Og.EventEmitter{ndk;debug;walletService;relaySet;signer;active=!1;constructor(e){let{ndk:t,pubkey:n,relayUrls:r,secret:i}=e;super(),this.ndk=t,this.walletService=t.getUser({pubkey:n}),this.relaySet=new Vw(new Set(r.map((e=>t.pool.getRelay(e)))),t),this.signer=new qm(i instanceof Uint8Array?i:jc(i)),this.debug=t.debug.extend("nwc"),this.debug(`Starting with wallet service ${this.walletService.npub}`)}static async fromURI(t,n){const r=new URL(n);if("nostr+walletconnect:"!==r.protocol)throw new Error("Invalid protocol");return new e({ndk:t,pubkey:r.host??r.pathname,relayUrls:r.searchParams.getAll("relay")??[""],secret:r.searchParams.get("secret")??""})}async blockUntilReady(e){const t=await this.signer.user(),n=new Promise(((t,n)=>{setTimeout((()=>{n(new Error("Timeout"))}),e)})),r=[new Promise((e=>{const n=this.ndk.subscribe({kinds:[23195],"#p":[t.pubkey],limit:1},{groupable:!1,subId:"nwc"},this.relaySet);n.on("event",(async e=>{this.debug("received response",e.rawEvent());const t=e.tagValue("e");if(t){this.debug("received an event",t);try{await e.decrypt(e.author,this.signer),this.emit(t,e.content)}catch(n){return void this.debug("Failed to decrypt event",n)}}else this.debug("Received an event without an e-tag")})),n.on("eose",(()=>{this.debug("Subscription ready"),this.active=!0,e()})),n.on("close",(()=>{this.debug("Subscription closed"),this.active=!1}))}))];return e&&r.push(n),await Promise.race(r)}async sendReq(e,t){return await Km.call(this,e,t)}async payInvoice(e){return await Hm.call(this,e)}async getInfo(){return await Wm.call(this)}getBalance=(()=>Vm.bind(this))()};var Gm=class extends Og.EventEmitter{ndk;signer;relaySet;debug;constructor(e,t,n,r){super(),this.ndk=e,this.signer=t,this.relaySet=r?Vw.fromRelayUrls(r,e):void 0,this.debug=n.extend("rpc")}subscribe(e){const t=this.ndk.subscribe(e,{closeOnEose:!1,groupable:!1,cacheUsage:"ONLY_RELAY"},this.relaySet);return t.on("event",(async e=>{try{const t=await this.parseEvent(e);t.method?this.emit("request",t):this.emit(`response-${t.id}`,t)}catch(t){this.debug("error parsing event",t,e.rawEvent())}})),new Promise((e=>{t.on("eose",(()=>e(t)))}))}async parseEvent(e){const t=this.ndk.getUser({pubkey:e.pubkey});t.ndk=this.ndk;const n=await this.signer.decrypt(t,e.content),r=JSON.parse(n),{id:i,method:o,params:s,result:a,error:l}=r;return o?{id:i,pubkey:e.pubkey,method:o,params:s,event:e}:{id:i,result:a,error:l,event:e}}async sendResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,i=arguments.length>4?arguments[4]:void 0;const o={id:e,result:n};i&&(o.error=i);const s=await this.signer.user(),a=this.ndk.getUser({pubkey:t}),l=new _m(this.ndk,{kind:r,content:JSON.stringify(o),tags:[["p",t]],pubkey:s.pubkey});l.content=await this.signer.encrypt(a,l.content),await l.sign(this.signer),await l.publish(this.relaySet)}async sendRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,i=arguments.length>4?arguments[4]:void 0;const o=Math.random().toString(36).substring(7),s=await this.signer.user(),a=this.ndk.getUser({pubkey:e}),l={id:o,method:t,params:n},u=new Promise((()=>{const e=t=>{"auth_url"===t.result?(this.once(`response-${o}`,e),this.emit("authUrl",t.error)):i&&i(t)};this.once(`response-${o}`,e)})),c=new _m(this.ndk,{kind:r,content:JSON.stringify(l),tags:[["p",e]],pubkey:s.pubkey});return c.content=await this.signer.encrypt(a,c.content),await c.sign(this.signer),await c.publish(this.relaySet),u}};Og.EventEmitter;async function Ym(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.outboxPool||t.pool,i=new Set;for(const c of r.relays.values())i.add(c);const o=new Map,s=new Map,a=new Vw(i,t);if(t.cacheAdapter?.locking&&!n){const n=await t.fetchEvents({kinds:[3,10002],authors:e},{cacheUsage:"ONLY_CACHE"});for(const e of n)10002===e.kind&&o.set(e.pubkey,jm.from(e));for(const e of n)if(3===e.kind){if(o.has(e.pubkey))continue;const n=$m(t,e);n&&s.set(e.pubkey,n)}e=e.filter((e=>!o.has(e)&&!s.has(e)))}if(0===e.length)return o;const l=new Map,u=new Map;return new Promise((async n=>{const i=t.subscribe({kinds:[3,10002],authors:e},{closeOnEose:!0,pool:r,groupable:!0,cacheUsage:"ONLY_RELAY",subId:"ndk-relay-list-fetch"},a,!1);i.on("event",(e=>{if(10002===e.kind){const t=l.get(e.pubkey);if(t&&t.created_at>e.created_at)return;l.set(e.pubkey,e)}else if(3===e.kind){const t=u.get(e.pubkey);if(t&&t.created_at>e.created_at)return;u.set(e.pubkey,e)}})),i.on("eose",(()=>{for(const e of l.values())o.set(e.pubkey,jm.from(e));for(const n of e){if(o.has(n))continue;const e=u.get(n);if(!e)continue;const r=$m(t,e);r&&o.set(n,r)}n(o)})),i.start()}))}var Qm=class{type;relayUrlScores;readRelays;writeRelays;constructor(e){this.type=e,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}},Jm=class extends Og.EventEmitter{data;ndk;debug;constructor(e){super(),this.ndk=e,this.debug=e.debug.extend("outbox-tracker"),this.data=new Rw.LRUCache({maxSize:1e5,entryExpirationTimeInMS:12e4})}async trackUsers(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[];for(let r=0;r<e.length;r+=400){const i=e.slice(r,r+400).map((e=>Xm(e))).filter((e=>!this.data.has(e)));if(0!==i.length){for(const e of i)this.data.set(e,new Qm("user"));n.push(new Promise((e=>{Ym(i,this.ndk,t).then((e=>{for(const[t,n]of e){let e=this.data.get(t);if(e??=new Qm("user"),n){e.readRelays=new Set(Pw(n.readRelayUrls)),e.writeRelays=new Set(Pw(n.writeRelayUrls));for(const t of e.readRelays)this.ndk.pool.blacklistRelayUrls.has(t)&&e.readRelays.delete(t);for(const t of e.writeRelays)this.ndk.pool.blacklistRelayUrls.has(t)&&e.writeRelays.delete(t);this.data.set(t,e)}}})).finally(e)})))}}return Promise.all(n)}track(e,t){const n=Xm(e);t??=function(e){return e instanceof Bm?"user":"kind"}(e);let r=this.data.get(n);return r||(r=new Qm(t),e instanceof Bm&&this.trackUsers([e])),r}};function Xm(e){return e instanceof Bm?e.pubkey:e}var ev=class extends Og.EventEmitter{relays=(()=>new Map)();autoConnectRelays=(()=>new Set)();blacklistRelayUrls;debug;temporaryRelayTimers=(()=>new Map)();flappingRelays=(()=>new Set)();backoffTimes=(()=>new Map)();ndk;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;super(),this.debug=r??n.debug.extend("pool"),this.ndk=n;for(const i of e){const e=new qw(i,void 0,this.ndk);this.addRelay(e,!1)}this.blacklistRelayUrls=new Set(t)}set name(e){this.debug=this.debug.extend(e)}useTemporaryRelay(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=arguments.length>2?arguments[2]:void 0;const r=this.relays.has(e.url);r||(this.addRelay(e),this.debug("Adding temporary relay %s for filters %o",e.url,n));const i=this.temporaryRelayTimers.get(e.url);if(i&&clearTimeout(i),!r||i){const n=setTimeout((()=>{this.ndk.explicitRelayUrls?.includes(e.url)||this.removeRelay(e.url)}),t);this.temporaryRelayTimers.set(e.url,n)}}addRelay(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.relays.has(e.url),r=this.blacklistRelayUrls?.has(e.url),i=e.url.includes("/npub1");let o=!0;const s=e.url;if(n)return;if(r)return void this.debug(`Refusing to add relay ${s}: blacklisted`);if(i)return void this.debug(`Refusing to add relay ${s}: is a filter relay`);if(this.ndk.cacheAdapter?.getRelayStatus){const n=this.ndk.cacheAdapter.getRelayStatus(s);if(n&&n.dontConnectBefore){if(n.dontConnectBefore>Date.now()){const r=n.dontConnectBefore-Date.now();return this.debug(`Refusing to add relay ${s}: delayed connect for ${r}ms`),void setTimeout((()=>{this.addRelay(e,t)}),r)}o=!1}}const a=t=>this.emit("notice",e,t),l=()=>this.handleRelayConnect(s),u=()=>this.handleRelayReady(e),c=()=>this.emit("relay:disconnect",e),h=()=>this.handleFlapping(e),f=t=>this.emit("relay:auth",e,t),d=()=>this.emit("relay:authed",e);e.off("notice",a),e.off("connect",l),e.off("ready",u),e.off("disconnect",c),e.off("flapping",h),e.off("auth",f),e.off("authed",d),e.on("notice",a),e.on("connect",l),e.on("ready",u),e.on("disconnect",c),e.on("flapping",h),e.on("auth",f),e.on("authed",d),e.on("delayed-connect",(t=>{this.ndk.cacheAdapter?.updateRelayStatus&&this.ndk.cacheAdapter.updateRelayStatus(e.url,{dontConnectBefore:Date.now()+t})})),this.relays.set(s,e),t&&this.autoConnectRelays.add(s),t&&(this.emit("relay:connecting",e),e.connect(void 0,o).catch((e=>{this.debug(`Failed to connect to relay ${s}`,e)})))}removeRelay(e){const t=this.relays.get(e);if(t)return t.disconnect(),this.relays.delete(e),this.autoConnectRelays.delete(e),this.emit("relay:disconnect",t),!0;const n=this.temporaryRelayTimers.get(e);return n&&(clearTimeout(n),this.temporaryRelayTimers.delete(e)),!1}isRelayConnected(e){const t=Lw(e),n=this.relays.get(t);return!!n&&5===n.status}getRelay(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=this.relays.get(Lw(e));return i||(i=new qw(e,void 0,this.ndk),n?this.useTemporaryRelay(i,3e4,r):this.addRelay(i,t)),i}handleRelayConnect(e){this.emit("relay:connect",this.relays.get(e)),this.stats().connected===this.relays.size&&this.emit("connect")}handleRelayReady(e){this.emit("relay:ready",e)}async connect(e){const t=[];this.debug(`Connecting to ${this.relays.size} relays${e?`, timeout ${e}...`:""}`);const n=new Set(this.autoConnectRelays.keys());this.ndk.explicitRelayUrls?.forEach((e=>{const t=Lw(e);n.add(t)}));for(const r of n){const n=this.relays.get(r);if(!n)continue;const i=new Promise(((t,r)=>(this.emit("relay:connecting",n),n.connect(e).then(t).catch(r))));if(e){const r=new Promise(((t,n)=>{setTimeout((()=>n(`Timed out after ${e}ms`)),e)}));t.push(Promise.race([i,r]).catch((e=>{this.debug(`Failed to connect to relay ${n.url}: ${e??"No reason specified"}`)})))}else t.push(i)}e&&setTimeout((()=>{const e=this.stats().connected===this.relays.size,t=this.stats().connected>0;!e&&t&&this.emit("connect")}),e),await Promise.all(t)}checkOnFlappingRelays(){if(this.flappingRelays.size/this.relays.size>=.8)for(const e of this.flappingRelays)this.backoffTimes.set(e,0)}handleFlapping(e){this.debug(`Relay ${e.url} is flapping`);let t=this.backoffTimes.get(e.url)||5e3;t*=2,this.backoffTimes.set(e.url,t),this.debug(`Backoff time for ${e.url} is ${t}ms`),setTimeout((()=>{this.debug(`Attempting to reconnect to ${e.url}`),this.emit("relay:connecting",e),e.connect(),this.checkOnFlappingRelays()}),t),e.disconnect(),this.emit("flapping",e)}size(){return this.relays.size}stats(){const e={total:0,connected:0,disconnected:0,connecting:0};for(const t of this.relays.values())e.total++,5===t.status?e.connected++:1===t.status?e.disconnected++:4===t.status&&e.connecting++;return e}connectedRelays(){return Array.from(this.relays.values()).filter((e=>5===e.status))}permanentAndConnectedRelays(){return Array.from(this.relays.values()).filter((e=>e.status>=5&&!this.temporaryRelayTimers.has(e.url)))}urls(){return Array.from(this.relays.keys())}};function tv(e){if(!e||""===e)return!1;try{return new URL(e),!0}catch(t){return!1}}async function nv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{type:"timeout"};const i=this.debug.extend("fetch-event-from-tag"),[o,s,a]=e;i("fetching event from tag",e,n={},r);const l=Iw(this,t.pubkey);if(l&&l.size>0){i("fetching event from author relays %o",Array.from(l));const e=Vw.fromRelayUrls(Array.from(l),this),t=await this.fetchEvent(s,n,e);if(t)return t}else i("no author relays found for %s",t.pubkey,t);const u=Yw(this,[{ids:[s]}],this.pool);i("fetching event without relay hint",u);const c=await this.fetchEvent(s,n);if(c)return c;if(a&&""!==a){const e=await this.fetchEvent(s,n,this.pool.getRelay(a,!0,!0,[{ids:[s]}]));if(e)return e}let h;const f=tv(a)?this.pool.getRelay(a,!1,!0,[{ids:[s]}]):void 0,d=new Promise((e=>{this.fetchEvent(s,n,f).then(e)}));if(!tv(a)||"none"===r.type)return d;const p=new Promise((async e=>{const t=r.relaySet,o=r.timeout??1500,a=new Promise((e=>setTimeout(e,o)));if("timeout"===r.type&&await a,h)e(h);else{i("fallback fetch triggered");e(await this.fetchEvent(s,n,t))}}));switch(r.type){case"timeout":return Promise.race([d,p]);case"eose":return h=await d,h||p}}var rv=class{ndk;spec;url;nip98Required=!1;constructor(e,t){this.url=`https://${e}/.well-known/nostr/nip96.json`,this.ndk=t}async prepareUpload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";if(this.validateHttpFetch(),this.spec||await this.fetchSpec(),!this.spec)throw new Error("Failed to fetch NIP96 spec");let n={};if(this.nip98Required){n={Authorization:await this.generateNip98Header(this.spec.api_url,t,e)}}return{url:this.spec.api_url,headers:n}}async xhrUpload(e,t){const n="POST",{url:r,headers:i}=await this.prepareUpload(t,n);e.open(n,r,!0),i.Authorization&&e.setRequestHeader("Authorization",i.Authorization);const o=new FormData;return o.append("file",t),new Promise(((t,n)=>{e.onload=function(){e.status>=200&&e.status<300?t(JSON.parse(e.responseText)):n(new Error(e.statusText))},e.onerror=function(){n(new Error("Network Error"))},e.send(o)}))}async upload(e){const t="POST",{url:n,headers:r}=await this.prepareUpload(e,t),i=new FormData;i.append("file",e);const o=await this.ndk.httpFetch(this.spec.api_url,{method:t,headers:r,body:i});if(200!==o.status)throw new Error(`Failed to upload file to ${n}`);const s=await o.json();if("success"!==s.status)throw new Error(s.message);return s}validateHttpFetch(){if(!this.ndk)throw new Error("NDK is required to fetch NIP96 spec");if(!this.ndk.httpFetch)throw new Error("NDK must have an httpFetch method to fetch NIP96 spec")}async fetchSpec(){this.validateHttpFetch();const e=await this.ndk.httpFetch(this.url);if(200!==e.status)throw new Error(`Failed to fetch NIP96 spec from ${this.url}`);const t=await e.json();if(!t)throw new Error(`Failed to parse NIP96 spec from ${this.url}`);this.spec=t,this.nip98Required=this.spec.plans.free.is_nip98_required}async generateNip98Header(e,t,n){const r=new _m(this.ndk,{kind:27235,tags:[["u",e],["method",t]]});if(["POST","PUT","PATCH"].includes(t)){const e=await this.calculateSha256(n);r.tags.push(["payload",e])}await r.sign();return`Nostr ${btoa(JSON.stringify(r.rawEvent()))}`}async calculateSha256(e){const t=await e.arrayBuffer(),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}},iv=class{queue=[];maxConcurrency;processing=(()=>new Set)();promises=(()=>new Map)();constructor(e,t){this.maxConcurrency=t}add(e){if(this.promises.has(e.id))return this.promises.get(e.id);const t=new Promise(((t,n)=>{this.queue.push({...e,func:()=>e.func().then((e=>(t(e),e)),(e=>{throw n(e),e}))}),this.process()}));return this.promises.set(e.id,t),t.finally((()=>{this.promises.delete(e.id),this.processing.delete(e.id),this.process()})),t}process(){if(this.processing.size>=this.maxConcurrency||0===this.queue.length)return;const e=this.queue.shift();e&&!this.processing.has(e.id)&&(this.processing.add(e.id),e.func())}clear(){this.queue=[]}clearProcessing(){this.processing.clear()}clearAll(){this.clear(),this.clearProcessing()}length(){return this.queue.length}},ov=class{subscriptions;seenEvents=(()=>new Map)();debug;constructor(e){this.subscriptions=new Map,this.debug=e.extend("sub-manager")}add(e){this.subscriptions.set(e.internalId,e),e.on("close",(()=>{this.subscriptions.delete(e.internalId)}))}seenEvent(e,t){const n=this.seenEvents.get(e)||[];n.push(t),this.seenEvents.set(e,n)}},sv=Rg("ndk:active-user");async function av(e){if(!this.autoConnectUserRelays)return;const t=await async function(e,t){return(await Ym([e],t)).get(e)}(e.pubkey,this);if(t){for(const e of t.relays){let t=this.pool.relays.get(e);t||(t=new qw(e,this.relayAuthDefaultPolicy,this),this.pool.addRelay(t))}return t}}async function lv(e){const t=this.outboxPool||this.pool;t.connectedRelays.length>0?uv.call(this,e):t.once("connect",(()=>{uv.call(this,e)}))}async function uv(e){const t=await av.call(this,e),n=[{kinds:[10006],authors:[e.pubkey]}];this.autoFetchUserMutelist&&n[0].kinds.push(1e4);const r=t?t.relaySet:void 0,i=this.subscribe(n,{subId:"active-user-settings",closeOnEose:!0},r,!1),o=new Map;i.on("event",(e=>{const t=o.get(e.kind);t&&t.created_at>=e.created_at||o.set(e.kind,e)})),i.on("eose",(()=>{for(const e of o.values())cv.call(this,e)})),i.start()}async function cv(e){10006===e.kind?hv.call(this,e):1e4===e.kind&&fv.call(this,e)}function hv(e){const t=Fm.from(e);for(const n of t.items)this.pool.blacklistRelayUrls.add(n[0]);sv("Added %d relays to relay blacklist",t.items.length)}function fv(e){const t=Fm.from(e);for(const n of t.items)this.mutedIds.set(n[1],n[0]);sv("Added %d users to mute list",t.items.length)}async function dv(e,t,n,r,i,o,s,a,l){const u=n.callback,c=hg.makeZapRequest({profile:r,event:null,amount:i,comment:s||"",relays:o.slice(0,4)});if(e instanceof _m){const t=e.referenceTags().filter((e=>"p"!==e[0]));c.tags.push(...t)}c.tags.push(["lnurl",u]);const h=new _m(t,c);return a&&(h.tags=h.tags.concat(a)),h.tags=h.tags.filter((e=>"p"!==e[0])),h.tags.push(["p",r]),await h.sign(l),h}var pv=Rg("ndk:zapper"),yv=class extends Og.EventEmitter{target;ndk;comment;amount;unit;tags;signer;zapMethod;onLnPay;onCashuPay;onComplete;maxRelays=3;constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"msat",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(super(),this.target=e,this.ndk=i||e.ndk,!this.ndk)throw new Error("No NDK instance provided");this.amount=t,this.comment=r,this.unit=n,this.tags=o,this.signer=s}async zap(){const e=this.getZapSplits(),t=new Map;return await Promise.all(e.map((async e=>{let n;try{n=await this.zapSplit(e)}catch(r){n=r}this.emit("split:complete",e,n),t.set(e,n)}))),this.emit("complete",t),this.onComplete&&this.onComplete(t),t}async zapSplit(e){let t,n=await this.getZapMethods(this.ndk,e.pubkey);if(0===n.length)throw new Error("No zap method available for recipient");n=n.sort(((e,t)=>"nip61"===e.type?-1:"nip61"===t.type?1:0));const r=await this.relays(e.pubkey);for(const o of n){false,pv("Zapping to %s with %d %s using %s",e.pubkey,e.amount,this.unit,o.type);try{switch(o.type){case"nip61":{const n=o.data;let i;if(i=await this.onCashuPay({target:this.target,comment:this.comment,tags:this.tags,recipientPubkey:e.pubkey,amount:e.amount,unit:this.unit,...n}),pv("NIP-61 Zap result: %o",i),i instanceof Error)t=i;else if(i){const{proofs:t,mint:n}=i;if(!t||!n)throw new Error("Invalid zap confirmation: missing proofs or mint: "+i);const o=Vw.fromRelayUrls(r,this.ndk),s=new Dm(this.ndk);return s.tags=[...s.tags,...this.tags||[]],s.proofs=t,s.mint=n,s.comment=this.comment,s.unit=this.unit,s.recipientPubkey=e.pubkey,await s.sign(this.signer),await s.publish(o),s}break}case"nip57":{const n=o.data,i=await dv(this.target,this.ndk,n,e.pubkey,e.amount,r,this.comment,this.tags,this.signer);if(!i)throw pv("Unable to generate zap request"),new Error("Unable to generate zap request");const s=await this.getLnInvoice(i,e.amount,n);if(!s)throw pv("Unable to get payment request"),new Error("Unable to get payment request");t=await this.onLnPay({target:this.target,comment:this.comment,recipientPubkey:e.pubkey,amount:e.amount,unit:this.unit,pr:s});break}}}catch(i){t=i instanceof Error?i:new Error(i),pv("Error zapping to %s with %d %s using %s: %o",e.pubkey,e.amount,this.unit,o.type,i)}}if(t instanceof Error)throw t;return t}async getLnInvoice(e,t,n){const r=n.callback,i=JSON.stringify(e.rawEvent());pv(`Fetching invoice from ${r}?`+new URLSearchParams({amount:t.toString(),nostr:i}));const o=new URL(r);o.searchParams.append("amount",t.toString()),o.searchParams.append("nostr",i),pv(`Fetching invoice from ${o.toString()}`);const s=await fetch(o.toString());if(pv(`Got response from zap endpoint: ${r}`,{status:s.status}),200!==s.status){pv(`Received non-200 status from zap endpoint: ${r}`,{status:s.status,amount:t,nostr:i});const e=await s.text();throw new Error(`Unable to fetch zap endpoint ${r}: ${e}`)}return(await s.json()).pr}getZapSplits(){if(this.target instanceof Bm)return[{pubkey:this.target.pubkey,amount:this.amount}];const e=this.target.getMatchingTags("zap");if(0===e.length)return[{pubkey:this.target.pubkey,amount:this.amount}];const t=[],n=e.reduce(((e,t)=>e+parseInt(t[2])),0);for(const r of e){const e=r[1],i=Math.floor(parseInt(r[2])/n*this.amount);t.push({pubkey:e,amount:i})}return t}async getZapMethods(e,t){const n=[];this.onCashuPay&&n.push("nip61"),n.push("nip57");const r=e.getUser({pubkey:t}),i=await r.getZapInfo(!1,n);return pv("Zap info for %s: %o",r.npub,i),i}async relays(e){let t=[];if(this.ndk?.activeUser){const n=await Ym([this.ndk.activeUser.pubkey,e],this.ndk),r=new Map;for(const e of n.values())for(const t of e.readRelayUrls){const e=r.get(t)||0;r.set(t,e+1)}t=Array.from(r.entries()).sort(((e,t)=>t[1]-e[1])).map((e=>{let[t]=e;return t})).slice(0,this.maxRelays)}return this.ndk?.pool?.permanentAndConnectedRelays().length&&(t=this.ndk.pool.permanentAndConnectedRelays().map((e=>e.url))),t.length||(t=[]),t}},gv=["wss://purplepag.es/","wss://nos.lol/"],bv=["wss://brb.io/","wss://nostr.mutinywallet.com/"];Og.EventEmitter;const wv=n.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:o,...s}=e;const a=ql(n,"container"),l="string"===typeof r?`-${r}`:"-fluid";return(0,Ul.jsx)(i,{ref:t,...s,className:Pl()(o,r?`${a}${l}`:a)})}));wv.displayName="Container";const mv=wv,vv=n.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="div",...o}=e;const s=ql(n,"row"),a=Kl(),l=Vl(),u=`${s}-cols`,c=[];return a.forEach((e=>{const t=o[e];let n;delete o[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==l?`-${e}`:"";null!=n&&c.push(`${u}${r}-${n}`)})),(0,Ul.jsx)(i,{ref:t,...o,className:Pl()(r,s,...c)})}));vv.displayName="Row";const _v=vv;const kv=n.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:s}]=function(e){let{as:t,bsPrefix:n,className:r,...i}=e;n=ql(n,"col");const o=Kl(),s=Vl(),a=[],l=[];return o.forEach((e=>{const t=i[e];let r,o,u;delete i[e],"object"===typeof t&&null!=t?({span:r,offset:o,order:u}=t):r=t;const c=e!==s?`-${e}`:"";r&&a.push(!0===r?`${n}${c}`:`${n}${c}-${r}`),null!=u&&l.push(`order${c}-${u}`),null!=o&&l.push(`offset${c}-${o}`)})),[{...i,className:Pl()(r,...a,...l)},{as:t,bsPrefix:n,spans:a}]}(e);return(0,Ul.jsx)(i,{...r,ref:t,className:Pl()(n,!s.length&&o)})}));kv.displayName="Col";const Ev=kv;const xv=function(e){const{fetchEvents:t}=El(),{user:r}=e,[i,o]=(0,n.useState)(null),s={kinds:[0]};return(0,n.useEffect)((()=>{!async function(){const e=await t(s);o(e)}()}),[r]),null==i?(0,Ul.jsx)(Ul.Fragment,{}):(0,Ul.jsx)(mv,{children:i.map((e=>(e.tags.length>0&&console.log(e.tags),(0,Ul.jsx)(_v,{children:(0,Ul.jsx)(Ev,{children:e.content})}))))})};const Sv=function(){const{ndk:e,signer:t,fetchEvents:r,fetchEventsEOSE:i,loginWithNip07:o,loginWithNip46:s,loginWithSecret:a,signPublishEvent:l}=El(),[u,c]=(0,n.useState)(null);return(0,Ul.jsx)("div",{className:"App",children:(0,Ul.jsx)("header",{className:"App-header",children:null==u?(0,Ul.jsx)(Zl,{onClick:async function(){const e=await o();c(e)},children:"Connect"}):(0,Ul.jsx)(xv,{user:u})})})},Av=e=>{e&&e instanceof Function&&__webpack_require__.e(453).then(__webpack_require__.bind(__webpack_require__,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))};r.createRoot(document.getElementById("root")).render((0,Ul.jsx)(n.StrictMode,{children:(0,Ul.jsx)(kl,{relayUrls:["wss://relay.damus.io","wss://relay.snort.social","wss://purplepag.es"],children:(0,Ul.jsx)(Sv,{})})})),Av()})()})();
//# sourceMappingURL=main.f36e15c0.js.map